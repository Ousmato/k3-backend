import{a as Ne}from"./chunk-YPOCFZ2S.js";import{b as z,d as Le}from"./chunk-UJYHWII2.js";import{$ as G,A as p,Ab as B,Ba as W,Bb as H,C as c,Cb as K,D as T,Db as Q,E as X,F as me,Fa as V,G as pe,Ga as y,H as _e,Ha as U,I as r,Ia as Pe,J as o,Ja as we,K as g,L as E,La as Me,M as P,Ma as J,N as x,Na as Oe,O as _,Oa as Ie,P as m,Q as R,Qa as Fe,T as re,Ta as ke,U as a,Ua as Te,V as b,Va as A,W as C,Wa as j,X as k,Z as $,Za as se,_ as q,ca as Ce,cb as le,da as xe,ea as Se,fa as ae,ja as be,ma as O,na as N,o as M,oa as ye,pa as Ee,qb as I,r as h,rb as ce,s as v,t as ve,ub as D,vb as F,x as s,y as u,za as L,zb as Y}from"./chunk-Q3UIBATL.js";import{a as $e}from"./chunk-W3N7LORT.js";import{f as Re}from"./chunk-OXVY4BEJ.js";var Z=function(n){return n.L1="LICENCE 1",n.L2="LICENCE 2",n.L3="LICENCE 3",n}(Z||{});function qe(n,d){n&1&&g(0,"input",24)}function Ge(n,d){if(n&1&&(r(0,"option",25),a(1),o()),n&2){let e=d.$implicit;c("value",e.id),s(),C(" ",e.nomSemetre,"")}}function We(n,d){n&1&&(r(0,"div")(1,"span",28),a(2,"Le nom de l'UE est requis."),o()())}function Je(n,d){n&1&&(r(0,"div")(1,"span",28),a(2,"Le nom de l'UE ne doit pas d\xE9passer 40 caract\xE8res."),o()())}function Ye(n,d){if(n&1&&(r(0,"div",26),p(1,We,3,0,"div",27)(2,Je,3,0,"div",27),o()),n&2){let e,i,t=m();s(),c("ngIf",(e=t.addUe.get("nomUE").errors)==null?null:e.required),s(),c("ngIf",(i=t.addUe.get("nomUE").errors)==null?null:i.maxlength)}}function He(n,d){if(n&1&&(r(0,"option",25),a(1),o()),n&2){let e=d.$implicit;c("value",e.id),s(),C(" ",e.nomUE,"")}}function Ke(n,d){if(n&1&&(r(0,"div",3)(1,"label",5),a(2,"Semestre :"),o(),r(3,"select",6)(4,"option",7),a(5,"Choisir semestre..."),o(),p(6,He,2,2,"option",8),o()()),n&2){let e=m();s(3),T("is-invalid",e.addUe.get("idSemestre").invalid&&e.addUe.get("idSemestre").touched),s(3),c("ngForOf",e.oldUes)}}function Qe(n,d){n&1&&(r(0,"div")(1,"span",28),a(2,"Le nom du module est requis."),o()())}function Xe(n,d){n&1&&(r(0,"div")(1,"span",28),a(2,"Le nom du module ne doit pas d\xE9passer 40 caract\xE8res."),o()())}function Ze(n,d){if(n&1&&(r(0,"div",26),p(1,Qe,3,0,"div",27)(2,Xe,3,0,"div",27),o()),n&2){let e,i,t=m().index,l=m();s(),c("ngIf",(e=l.addUe.get("nomModule"+(t+1)).errors)==null?null:e.required),s(),c("ngIf",(i=l.addUe.get("nomModule"+(t+1)).errors)==null?null:i.maxlength)}}function et(n,d){n&1&&(r(0,"div")(1,"span",28),a(2,"Le coefficient est requis."),o()())}function tt(n,d){n&1&&(r(0,"div")(1,"span",28),a(2,"Le coefficient doit \xEAtre compris entre 1 et 6."),o()())}function it(n,d){if(n&1&&(r(0,"div",26),p(1,et,3,0,"div",27)(2,tt,3,0,"div",27),o()),n&2){let e,i,t=m().index,l=m();s(),c("ngIf",(e=l.addUe.get("coefficient"+(t+1)).errors)==null?null:e.required),s(),c("ngIf",((i=l.addUe.get("coefficient"+t).errors)==null?null:i.min)||((i=l.addUe.get("coefficient"+t).errors)==null?null:i.max))}}function nt(n,d){if(n&1){let e=x();E(0),r(1,"div",29)(2,"div",30)(3,"label"),a(4,"Nom : "),o(),r(5,"input",31),_("keyup",function(t){h(e);let l=m();return v(l.onTouch(t))}),o(),p(6,Ze,3,2,"div",12),o(),r(7,"div",9)(8,"label",32),a(9,"Coef :"),o(),g(10,"input",33),p(11,it,3,2,"div",12),o()(),P()}if(n&2){let e=d.index,i=m();s(5),T("is-invalid",i.addUe.get("nomModule"+(e+1)).invalid&&i.addUe.get("nomModule"+(e+1)).touched),c("formControlName","nomModule"+(e+1))("placeholder","Nom du module"),s(),c("ngIf",i.addUe.get("nomModule"+(e+1)).invalid&&i.addUe.get("nomModule"+(e+1)).touched),s(4),T("is-invalid",i.addUe.get("coefficient"+(e+1)).invalid&&i.addUe.get("coefficient"+(e+1)).touched),c("formControlName","coefficient"+(e+1)),s(),c("ngIf",i.addUe.get("coefficient"+(e+1)).invalid&&i.addUe.get("coefficient"+(e+1)).touched)}}var Ae=(()=>{class n{constructor(e,i,t,l,f,S){this.classService=e,this.icons=i,this.semestreService=t,this.fb=l,this.setService=f,this.pageTitle=S,this.classes=[],this.semestres=[],this.oldUes=[],this.count=1,this.ecueNumbers=[1],this.ecues=new Set,this.isOldUe=!1,this.isEcue=!1,this.error=!1,this.closeModale=new ve}ngOnInit(){this.load_formAdd(),this.load(),this.admin=K()?.scolarite}load_formAdd(){this.addUe=this.fb.group({nomUE:["",[y.required,y.maxLength(40)]],idClasse:["",y.required],idSemestre:["",y.required],nomModule3:["",[y.maxLength(40)]],nomModule1:["",[y.maxLength(40)]],nomModule2:["",[y.maxLength(40)]],coefficient3:["",[y.min(1),y.max(10)]],coefficient1:["",[y.min(1),y.max(10)]],coefficient2:["",[y.min(1),y.max(10)]]}),this.addUe.get("idClasse")?.setValue(this.classe.id)}creatUe(){this.ecueNumbers.forEach(S=>{this.getEcues(S)});let e=this.addUe.value,i=this.semestres.find(S=>S.id==e.idSemestre),t={nomUE:e.nomUE,idAdmin:this.admin},l={idClasse:e.idClasse,semestre:i,idUe:t,modules:Array.from(this.ecues)};if(console.log(l,"dto",e,"formData"),this.addUe.valid)if(console.log(l.modules,"module"),l.modules.length===0||l.modules.some(w=>!w.nomModule||!w.coefficient)){var f=document.getElementById("error");f.style.display="block";return}else this.setService.createUe(l).subscribe({next:w=>{this.pageTitle.showSuccessToast(w.message),this.addUe.reset(),this.load_formAdd(),this.ecues=new Set,this.ecueNumbers=[1],this.count=1},error:w=>{this.pageTitle.showErrorToast(w.error.message+"Erreur"),this.ecues=new Set,this.ecueNumbers=[1],this.count=1}});else this.addUe.markAllAsTouched(),console.log(this.addUe.value,"invalid")}onTouch(e){var i=document.getElementById("error");i.style.display="none"}getAllUeByIdClasse(e){this.classService.getAllUeByIdClasse(e).subscribe(i=>{this.oldUes=i})}load(){this.semestreService.getCurrentSemestresOfYear().subscribe(e=>{e.forEach(i=>{this.semestres.some(t=>t.id===i.id)||(this.classe.idFiliere?.idNiveau.nom===Z.L1.toString()?(i.nomSemetre==="S1"||i.nomSemetre==="S2")&&this.semestres.push(i):this.classe.idFiliere?.idNiveau.nom===Z.L2.toString()?(i.nomSemetre==="S3"||i.nomSemetre==="S4")&&this.semestres.push(i):this.classe.idFiliere?.idNiveau.nom===Z.L3.toString()&&i.nomSemetre==="S5"&&this.semestres.push(i))}),console.log(this.semestres,"semestre")})}decrement(){this.count>1&&(this.count--,this.ecueNumbers.splice(this.count),console.log(this.ecueNumbers,"tab ecue after"))}increment(){console.log("is cont"),this.count<=2&&(this.count++,this.ecueNumbers.push(this.count),console.log(this.ecueNumbers,"tab ecue"))}getEcues(e){let i=this.addUe.get("coefficient"+e)?.value,t=this.addUe.get("nomModule"+e)?.value;t!==void 0&&i!==void 0?(this.ecues.add({nomModule:t,coefficient:i}),console.log(this.ecues,"ECUEs r\xE9cup\xE9r\xE9s")):console.log("Erreur : Valeur manquante pour l'index",e)}show_old_ues(){this.isOldUe=!this.isOldUe}close_add(){this.closeModale.emit()}static{this.\u0275fac=function(i){return new(i||n)(u(H),u(I),u(z),u(se),u(Ne),u(Q))}}static{this.\u0275cmp=M({type:n,selectors:[["app-add-ue"]],inputs:{classe:"classe"},outputs:{closeModale:"closeModale"},decls:37,vars:13,consts:[[1,"views"],[3,"ngSubmit","formGroup"],[1,"container-views"],[1,"form-group"],["type","number","formControlName","idClasse",4,"ngIf"],["for",""],["formControlName","idSemestre",1,"form-select"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form","form-group"],["for","email"],["type","text","formControlName","nomUE","placeholder","Nom de l'ue...",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[3,"click"],["class","form-group",4,"ngIf"],[1,"isEcue"],[1,"ecue-contenaire"],[1,"icons"],[1,"icons",3,"click","icon"],["id","error"],[4,"ngFor","ngForOf"],[1,"button-cash"],[1,"submit",3,"click"],["type","submit",1,"submit"],["type","number","formControlName","idClasse"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"],[1,"label-error"],[1,"container-ecue"],[1,"form","form-group","coefficient"],["type","text","id","nom",1,"form-control",3,"keyup","formControlName","placeholder"],["for","coefficient"],["type","number","placeholder","Coefficient",1,"form-control",3,"formControlName"]],template:function(i,t){i&1&&(r(0,"div",0)(1,"form",1),_("ngSubmit",function(){return t.creatUe()}),r(2,"div",2)(3,"div",3),p(4,qe,1,0,"input",4),o(),r(5,"div",3)(6,"label",5),a(7,"Semestre :"),o(),r(8,"select",6)(9,"option",7),a(10,"Choisir semestre..."),o(),p(11,Ge,2,2,"option",8),o()(),r(12,"div",9)(13,"label",10),a(14,"Nom:"),o(),g(15,"input",11),p(16,Ye,3,2,"div",12),o(),r(17,"span",13),_("click",function(){return t.show_old_ues()}),a(18,"old"),o(),p(19,Ke,7,3,"div",14),r(20,"div",15)(21,"div",16)(22,"span",17),a(23,"ECUE "),r(24,"fa-icon",18),_("click",function(){return t.decrement()}),o(),a(25),r(26,"fa-icon",18),_("click",function(){return t.increment()}),o()()(),r(27,"span",19),a(28,"Veuillez ajouter au moins un module et son coefficient"),o(),p(29,nt,12,9,"ng-container",20),o(),r(30,"div",21)(31,"a",22),_("click",function(){return t.close_add()}),r(32,"span"),a(33,"Annuler"),o()(),r(34,"button",23)(35,"span"),a(36,"Enregistrer"),o()()()()()()),i&2&&(s(),c("formGroup",t.addUe),s(3),c("ngIf",!1),s(4),T("is-invalid",t.addUe.get("idSemestre").invalid&&t.addUe.get("idSemestre").touched),s(3),c("ngForOf",t.semestres),s(4),T("is-invalid",t.addUe.get("nomUE").invalid&&t.addUe.get("nomUE").touched),s(),c("ngIf",t.addUe.get("nomUE").invalid&&t.addUe.get("nomUE").touched),s(3),c("ngIf",t.isOldUe),s(5),c("icon",t.icons.mimus),s(),C(" ",t.count," "),s(),c("icon",t.icons.plusCircle),s(3),c("ngForOf",t.ecueNumbers))},dependencies:[O,N,Oe,A,j,V,Ie,Te,U,Pe,Fe,ke,F],styles:[".views[_ngcontent-%COMP%]{padding:10px}select[_ngcontent-%COMP%]{margin-bottom:10px}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px #0003}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}label[_ngcontent-%COMP%]{margin-bottom:5px}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);background-color:var(--primary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.icons[_ngcontent-%COMP%]{font-size:12px;color:var(--primary)}.container-ecue[_ngcontent-%COMP%]{display:flex;padding:5px;margin-top:8px;border-radius:5px;gap:8px;border:1px solid var(--tertiary)}.coefficient[_ngcontent-%COMP%]{width:90%}#error[_ngcontent-%COMP%]{display:none;font-size:12px;color:red}"]})}}return n})();function at(n,d){if(n&1&&(r(0,"option",15),a(1),o()),n&2){let e=d.$implicit;c("value",e.id),s(),C("Promotion ",e.ans,"")}}function st(n,d){if(n&1){let e=x();r(0,"li")(1,"a",24),_("click",function(){h(e);let t=m(5);return v(t.getAll_ues(t.classeSelect))}),a(2,"Ajouter unit\xE9 d'enseignament"),o()()}}function lt(n,d){if(n&1){let e=x();r(0,"li")(1,"a",24),_("click",function(){h(e);let t=m(5);return v(t.toggle_to_notes(t.classeSelect.id))}),a(2,"Ajouter des notes"),o()()}}function ct(n,d){if(n&1){let e=x();r(0,"li")(1,"a",24),_("click",function(){h(e);let t=m(5);return v(t.toggle_to_view_ues(t.classeSelect))}),a(2,"Consult\xE9 les unit\xE9 d'enseignement"),o()()}}function dt(n,d){if(n&1){let e=x();r(0,"li")(1,"a",24),_("click",function(){h(e);let t=m(3).$implicit,l=m(2);return v(l.archive(t))}),a(2,"Archives"),o()()}}function mt(n,d){if(n&1){let e=x();r(0,"div",27),p(1,st,3,0,"li",12)(2,lt,3,0,"li",12),r(3,"li")(4,"a",24),_("click",function(){h(e);let t=m(4);return v(t.toggle_toStudentClasse(t.classeSelect.id))}),a(5,"Liste des \xE9tudiants"),o()(),r(6,"li")(7,"a",24),_("click",function(){h(e);let t=m(4);return v(t.toggle_to_noteSemestre(t.classeSelect.idFiliere==null?null:t.classeSelect.idFiliere.id))}),a(8,"Notes du semestre"),o()(),p(9,ct,3,0,"li",12)(10,dt,3,0,"li",12),o()}if(n&2){let e=m(4);s(),c("ngIf",e.permission),s(),c("ngIf",e.permission),s(7),c("ngIf",e.permission),s(),c("ngIf",e.classesArchives.length!==0)}}function pt(n,d){if(n&1&&(E(0),p(1,mt,11,4,"div",26),P()),n&2){let e=m(3);s(),c("ngIf",e.isShow_link_modal)}}function _t(n,d){if(n&1){let e=x();r(0,"div",10)(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",20),g(5,"fa-icon",21),o(),r(6,"div",22)(7,"h2",23),a(8),o(),r(9,"p",23),a(10),o(),r(11,"p"),a(12),o(),r(13,"a",24),_("click",function(){let t=h(e).$implicit,l=m(2);return v(l.show_views(t))}),a(14,"Clique ici"),g(15,"fa-icon",25),o()()(),p(16,pt,2,1,"ng-container",12),o()()()}if(n&2){let e=d.$implicit,i=m(2);s(5),c("icon",i.icons.folder),s(3),C("Nivau : ",e.idFiliere==null||e.idFiliere.idNiveau==null?null:e.idFiliere.idNiveau.nom," "),s(2),C("Filiere : ",i.abreviateFiliereName(e.idFiliere==null||e.idFiliere.idFiliere==null?null:e.idFiliere.idFiliere.nomFiliere),""),s(2),C("Effectifs : ",e.effectifs,""),s(3),c("icon",i.icons.angleDown),s(),c("ngIf",e===i.classeSelect)}}function ut(n,d){if(n&1&&p(0,_t,17,6,"div",16),n&2){let e=m();c("ngForOf",e.filterClasse_L1())}}function gt(n,d){n&1&&(r(0,"p",11),a(1,"Aucune classe pour cette promotion et ce niveau."),o())}function ft(n,d){if(n&1){let e=x();E(0),r(1,"div",28)(2,"div",29)(3,"h5"),a(4,"Ajouter unite d'enseignement"),o()(),r(5,"app-add-ue",30),_("closeModale",function(){h(e);let t=m();return v(t.closeOverlay())}),o()(),P()}if(n&2){let e=m();s(5),c("classe",e.classeSelect)}}function ht(n,d){if(n&1){let e=x();r(0,"li")(1,"a",24),_("click",function(){h(e);let t=m(5);return v(t.getAll_ues(t.classeSelect))}),a(2,"Ajouter unit\xE9 d'enseignament"),o()()}}function vt(n,d){if(n&1){let e=x();r(0,"li")(1,"a",24),_("click",function(){h(e);let t=m(5);return v(t.toggle_to_notes(t.classeSelect.id))}),a(2,"Ajouter des notes"),o()()}}function Ct(n,d){if(n&1){let e=x();r(0,"li")(1,"a",24),_("click",function(){h(e);let t=m(5);return v(t.toggle_to_view_ues(t.classeSelect))}),a(2,"Consult\xE9 les unit\xE9 d'enseignement"),o()()}}function xt(n,d){if(n&1){let e=x();r(0,"li")(1,"a",24),_("click",function(){h(e);let t=m(3).$implicit,l=m(2);return v(l.archive(t))}),a(2,"Archives"),o()()}}function St(n,d){if(n&1){let e=x();r(0,"div",27),p(1,ht,3,0,"li",12)(2,vt,3,0,"li",12),r(3,"li")(4,"a",24),_("click",function(){h(e);let t=m(4);return v(t.toggle_toStudentClasse(t.classeSelect.id))}),a(5,"Liste des \xE9tudiants"),o()(),r(6,"li")(7,"a",24),_("click",function(){h(e);let t=m(4);return v(t.toggle_to_noteSemestre(t.classeSelect.id))}),a(8,"Notes du semestre"),o()(),p(9,Ct,3,0,"li",12)(10,xt,3,0,"li",12),o()}if(n&2){let e=m(4);s(),c("ngIf",e.permission),s(),c("ngIf",e.permission),s(7),c("ngIf",e.permission),s(),c("ngIf",e.classesArchives.length!==0)}}function bt(n,d){if(n&1&&(E(0),p(1,St,11,4,"div",26),P()),n&2){let e=m(3);s(),c("ngIf",e.isShow_link_modal)}}function yt(n,d){if(n&1){let e=x();r(0,"div",10)(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",20),g(5,"fa-icon",21),o(),r(6,"div",22)(7,"h2",23),a(8),o(),r(9,"p",23),a(10),o(),r(11,"p"),a(12),o(),r(13,"a",24),_("click",function(){let t=h(e).$implicit,l=m(2);return v(l.show_views(t))}),a(14,"Clique ici"),g(15,"fa-icon",25),o()()(),p(16,bt,2,1,"ng-container",12),o()()()}if(n&2){let e=d.$implicit,i=m(2);s(5),c("icon",i.icons.folder),s(3),C("Nivau : ",e.idFiliere==null||e.idFiliere.idNiveau==null?null:e.idFiliere.idNiveau.nom," "),s(2),C("Filiere : ",i.abreviateFiliereName(e.idFiliere==null||e.idFiliere.idFiliere==null?null:e.idFiliere.idFiliere.nomFiliere),""),s(2),C("Effectifs : ",e.effectifs,""),s(3),c("icon",i.icons.angleDown),s(),c("ngIf",e===i.classeSelect)}}function Et(n,d){if(n&1&&(E(0),p(1,yt,17,6,"div",16),P()),n&2){let e=m();s(),c("ngForOf",e.filterClasse_L2())}}function Pt(n,d){n&1&&(r(0,"p",7)(1,"span",8),a(2,"LICENCE 3"),o()())}function wt(n,d){if(n&1){let e=x();r(0,"li")(1,"a",24),_("click",function(){h(e);let t=m(6);return v(t.getAll_ues(t.classeSelect))}),a(2,"Ajouter unit\xE9 d'enseignament"),o()()}}function Mt(n,d){if(n&1){let e=x();r(0,"li")(1,"a",24),_("click",function(){h(e);let t=m(6);return v(t.toggle_to_notes(t.classeSelect.id))}),a(2,"Ajouter des notes"),o()()}}function Ot(n,d){if(n&1){let e=x();r(0,"li")(1,"a",24),_("click",function(){h(e);let t=m(6);return v(t.toggle_to_view_ues(t.classeSelect))}),a(2,"Consult\xE9 les unit\xE9 d'enseignement"),o()()}}function It(n,d){if(n&1){let e=x();r(0,"li")(1,"a",24),_("click",function(){h(e);let t=m(3).$implicit,l=m(3);return v(l.archive(t))}),a(2,"Archives"),o()()}}function Ft(n,d){if(n&1){let e=x();r(0,"div",27),p(1,wt,3,0,"li",12)(2,Mt,3,0,"li",12),r(3,"li")(4,"a",24),_("click",function(){h(e);let t=m(5);return v(t.toggle_toStudentClasse(t.classeSelect.id))}),a(5,"Liste des \xE9tudiants"),o()(),r(6,"li")(7,"a",24),_("click",function(){h(e);let t=m(5);return v(t.toggle_to_noteSemestre(t.classeSelect.id))}),a(8,"Notes du semestre"),o()(),p(9,Ot,3,0,"li",12)(10,It,3,0,"li",12),o()}if(n&2){let e=m(5);s(),c("ngIf",e.permission),s(),c("ngIf",e.permission),s(7),c("ngIf",e.permission),s(),c("ngIf",e.classesArchives.length!==0)}}function kt(n,d){if(n&1&&(E(0),p(1,Ft,11,4,"div",26),P()),n&2){let e=m(4);s(),c("ngIf",e.isShow_link_modal)}}function Tt(n,d){if(n&1){let e=x();r(0,"div",10)(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",20),g(5,"fa-icon",21),o(),r(6,"div",22)(7,"h2",23),a(8),o(),r(9,"p",23),a(10),o(),r(11,"p"),a(12),o(),r(13,"a",24),_("click",function(){let t=h(e).$implicit,l=m(3);return v(l.show_views(t))}),a(14,"Clique ici"),g(15,"fa-icon",25),o()()(),p(16,kt,2,1,"ng-container",12),o()()()}if(n&2){let e=d.$implicit,i=m(3);s(5),c("icon",i.icons.folder),s(3),C("Nivau : ",e.idFiliere==null||e.idFiliere.idNiveau==null?null:e.idFiliere.idNiveau.nom," "),s(2),C("Filiere : ",i.abreviateFiliereName(e.idFiliere==null||e.idFiliere.idFiliere==null?null:e.idFiliere.idFiliere.nomFiliere),""),s(2),C("Effectifs : ",e.effectifs,""),s(3),c("icon",i.icons.angleDown),s(),c("ngIf",e===i.classeSelect)}}function Nt(n,d){if(n&1&&p(0,Tt,17,6,"div",16),n&2){let e=m(2);c("ngForOf",e.filterClasse_L3())}}function Lt(n,d){if(n&1&&(E(0),p(1,Nt,1,1,"div",10),P()),n&2){let e=m();s(),X(e.filterClasse_L3().length?1:-1)}}function Vt(n,d){n&1&&g(0,"div",31)}var hi=(()=>{class n{constructor(e,i,t,l,f,S){this.service=e,this.sideBarService=i,this.toastr=t,this.infoSchool=l,this.router=f,this.icons=S,this.searchTerm="",this.classRoms=[],this.classesArchives=[],this.filteredClasse=[],this.annees=[],this.ueList=[],this.list_checked=[],this.isDesabled=!1,this.isShow_add_module=!1,this.notFund_modal=!0,this.isShow_link_modal=!0,this.isShow_views_ues=!1,this.classes_L1=[],this.classes_L2=[],this.classes_L3=[],this.permission=!1,this.isOpen=!1,this.dropdownStates={}}ngOnInit(){this.getPermission(),this.loadClasses(),this.get_annees();let e={};this.ueList.forEach(i=>{e[i.id]=new Me(!1)}),this.addModules=new we(e),this.sideBarService.currentSearchTerm.subscribe(i=>{this.searchTerm=i,console.log(this.searchTerm,"search"),this.filterClasse_L1(),this.filterClasse_L2(),this.filterClasse_L3()})}toggleDropdown(e){this.dropdownStates[e]=!this.dropdownStates[e]}isDropdownOpen(e){return this.dropdownStates[e]||!1}loadClasses(){this.service.getAllCurrentClassOfYear().subscribe(e=>{this.classRoms=e,console.log(e,"classroom"),this.classes_L1=e.filter(i=>i.idFiliere?.idNiveau.nom==="LICENCE 1"),console.log(this.classes_L1,"L1"),this.classes_L2=e.filter(i=>i.idFiliere?.idNiveau.nom==="LICENCE 2"),this.classes_L3=e.filter(i=>i.idFiliere?.idNiveau.nom==="LICENCE 3")})}getAll_ues(e){this.isShow_add_module=!0,this.isShow_link_modal=!1,this.classeSelect=e}show_views(e){console.log(e,"dois etre changer"),this.classeSelect===e?this.classeSelect=null:this.classeSelect=e,this.service.getAllArchivesByClasseIdNivFil(e.idFiliere?.id).subscribe(i=>{this.classesArchives=i})}getPermission(){let e=K()?.scolarite;return e?(this.permission=!0,console.log(e,"autorize"),!0):!1}toggle_to_view_ues(e){let i={queryParams:{id:e.idFiliere?.id}};this.router.navigate(["/r-scolarite/view-ues"],i)}archive(e){console.log(e,"archive----------------s");let i={queryParams:{id:e.idFiliere?.id}};this.getPermission()?this.router.navigate(["/r-scolarite/class-archives"],i):this.router.navigate(["/dga/class-archives"],i)}toggle_to_notes(e){let i={queryParams:{id:e}};this.getPermission()?(console.log("scolarite"),this.router.navigate(["/r-scolarite/student-notes"],i)):(console.log("dga"),this.router.navigate(["/dga/student-notes"],i))}toggle_to_noteSemestre(e){let i={queryParams:{id:e}},t=K()?.dga;this.getPermission()?this.router.navigate(["/r-scolarite/all-notes"],i):t?this.router.navigate(["/dga/all-notes"],i):this.router.navigate(["/sidebar/all-notes"],i)}toggle_toStudentClasse(e){let i={queryParams:{id:e}},t=K()?.dga;this.getPermission()?this.router.navigate(["/r-scolarite/etudiant-de-la-classe"],i):t?this.router.navigate(["/dga/etudiant-de-la-classe"],i):this.router.navigate(["/sidebar/etudiant-de-la-classe"],i)}goToParamettre(){this.router.navigate(["/dga/setting"])}closeOverlay(){this.isShow_add_module=!1,this.isShow_link_modal=!0}filterClasse_L1(){return this.searchTerm?this.filteredClasse=this.classes_L1.filter(e=>e.idFiliere?.idFiliere.nomFiliere.toLowerCase().includes(this.searchTerm.toLowerCase())||e.idFiliere?.idNiveau.nom?.toLowerCase().includes(this.searchTerm.toLowerCase())||this.abreviateFiliereName(e.idFiliere?.idFiliere.nomFiliere.toLowerCase()).toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredClasse=this.classes_L1}filterClasse_L2(){return this.searchTerm?this.filteredClasse=this.classes_L2.filter(e=>e.idFiliere?.idFiliere.nomFiliere.toLowerCase().includes(this.searchTerm.toLowerCase())||e.idFiliere?.idNiveau.nom?.toLowerCase().includes(this.searchTerm.toLowerCase())||this.abreviateFiliereName(e.idFiliere?.idFiliere.nomFiliere.toLowerCase()).toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredClasse=this.classes_L2}filterClasse_L3(){return this.searchTerm?this.filteredClasse=this.classes_L3.filter(e=>e.idFiliere?.idFiliere.nomFiliere.toLowerCase().includes(this.searchTerm.toLowerCase())||e.idFiliere?.idNiveau.nom?.toLowerCase().includes(this.searchTerm.toLowerCase())||this.abreviateFiliereName(e.idFiliere?.idFiliere.nomFiliere.toLowerCase()).toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredClasse=this.classes_L3}abreviateFiliereName(e){return e.split(" ").filter(l=>l.length>3).map(l=>l[0].toUpperCase()).join("")}get_annees(){this.infoSchool.getAll_annee().subscribe(e=>{this.annees=e,this.annees.forEach(i=>{let l=new Date(i.debutAnnee).getFullYear();i.ans=l})})}promoSelect(e){let i=e.target.value;this.service.getAllClasse(i).subscribe(t=>{this.classRoms=[],this.classRoms=t,console.log(this.classRoms,"is class selectm list"),this.classes_L1=t.filter(l=>l.idFiliere?.idNiveau.nom==="LICENCE 1"),this.classes_L2=t.filter(l=>l.idFiliere?.idNiveau.nom==="LICENCE 2"),this.classes_L3=t.filter(l=>l.idFiliere?.idNiveau.nom==="LICENCE 3")})}static{this.\u0275fac=function(i){return new(i||n)(u(H),u(D),u(ce),u(Y),u(W),u(I))}}static{this.\u0275cmp=M({type:n,selectors:[["app-class-students"]],decls:25,vars:8,consts:[[1,"main-head"],[3,"change"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"input-search-class"],["type","text","placeholder","Recherche...",1,"search-input-class",3,"ngModelChange","ngModel"],[1,"main-content"],[1,"niveau-contenaire"],[1,"span"],[1,"main"],[1,"grid-container"],[1,"empty"],[4,"ngIf"],["class","niveau-contenaire",4,"ngIf"],["class","overlay",4,"ngIf"],[3,"value"],["class","grid-container",4,"ngFor","ngForOf"],[1,"grid-item"],[1,"section-folder"],[1,"class-folder"],[1,"icon-folder"],[1,"icons-style",3,"icon"],[1,"info-folder"],[1,"title"],[3,"click"],[3,"icon"],["class","views",4,"ngIf"],[1,"views"],[1,"views-add-ues"],[1,"nom-class"],[3,"closeModale","classe"],[1,"overlay"]],template:function(i,t){i&1&&(r(0,"main")(1,"div",0)(2,"select",1),_("change",function(f){return t.promoSelect(f)}),r(3,"option",2),a(4,"Promotions"),o(),p(5,at,2,2,"option",3),o(),r(6,"div",4)(7,"input",5),G("ngModelChange",function(f){return q(t.searchTerm,f)||(t.searchTerm=f),f}),o()()(),r(8,"div",6)(9,"p",7)(10,"span",8),a(11,"LICENCE 1"),o()(),r(12,"div",9),p(13,ut,1,1,"div",10)(14,gt,2,0,"p",11)(15,ft,6,1,"ng-container",12),o(),r(16,"p",7)(17,"span",8),a(18,"LICENCE 2"),o()(),r(19,"div",9),p(20,Et,2,1,"ng-container",12),o(),p(21,Pt,3,0,"p",13),r(22,"div",9),p(23,Lt,2,1,"ng-container",12),o(),p(24,Vt,1,0,"div",14),o()()),i&2&&(s(5),c("ngForOf",t.annees),s(2),$("ngModel",t.searchTerm),s(6),X(t.filterClasse_L1().length?13:14),s(2),c("ngIf",t.isShow_add_module),s(5),c("ngIf",t.classRoms.length>0),s(),c("ngIf",t.filterClasse_L3().length),s(2),c("ngIf",t.filterClasse_L3().length>0),s(),c("ngIf",t.isShow_add_module))},dependencies:[O,N,A,j,V,U,J,F,Ae],styles:['main[_ngcontent-%COMP%]{padding-top:10px;background-color:#fff;height:80vh}.span[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative;align-items:center}.main-content[_ngcontent-%COMP%]{overflow:hidden;flex-grow:1;position:relative;height:88%;overflow-y:auto}.main-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.main-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff;border-radius:10px}.main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--tertiary);border-radius:10px}.main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--primary)}.main-head[_ngcontent-%COMP%]{display:flex;padding:10px}.main-head[_ngcontent-%COMP%]{background-color:#fff;position:sticky;width:100%;top:55px;right:0;z-index:1001}select[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary);border-radius:5px;padding:0 7px;outline:none;border:none}.search-input-class[_ngcontent-%COMP%]{width:300px;margin-left:10px;height:40px;padding:10px;border:1px solid var(--tertiary);border-radius:5px;outline:var(--primary)}.span[_ngcontent-%COMP%]:after{content:"";display:inline-block;height:1px;background-color:var(--tertiary);width:45%;margin-left:10px}.span[_ngcontent-%COMP%]:before{content:"";display:inline-block;height:1px;background-color:var(--tertiary);width:45%;margin-right:10px}.main[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:repeat(3,1fr);grid-gap:10px}.empty[_ngcontent-%COMP%]{text-align:center;color:red;display:flex;align-items:center;justify-content:center}.my-custom-style[_ngcontent-%COMP%]{font-size:25px;margin-right:10px}.container-fluid[_ngcontent-%COMP%]{padding-top:20px}.btn-add[_ngcontent-%COMP%]{display:flex;margin-top:20px;margin-bottom:15px;margin-left:24px}#error[_ngcontent-%COMP%], #errorclass[_ngcontent-%COMP%], #error-module[_ngcontent-%COMP%]{display:none;color:red}.class-card[_ngcontent-%COMP%]{margin-left:2%;border:1px solid red}.grid-container[_ngcontent-%COMP%]{position:relative;padding:10px;grid-gap:10px}.grid-item[_ngcontent-%COMP%]{text-align:center}label[_ngcontent-%COMP%]{color:var(--primary);font-weight:500}.icon-m[_ngcontent-%COMP%]{width:30%;display:flex;justify-content:end;align-items:center}.my-custom-style[_ngcontent-%COMP%]{font-size:24px;color:#333}.h4-head[_ngcontent-%COMP%]{width:80%;display:flex;justify-content:end;align-items:center}.card-header[_ngcontent-%COMP%]{display:flex}.btn[_ngcontent-%COMP%]{margin:0}h4[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;font-size:16px}.class-folder[_ngcontent-%COMP%]{height:100px;display:flex;justify-content:flex-start;align-items:center;gap:10px;border:1px solid var(--tertiary);padding:10px;border-radius:5px}.class-folder[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:800}.icons-style[_ngcontent-%COMP%]{color:#ffc400;font-size:3.7rem}.info-folder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.info-folder[_ngcontent-%COMP%]{text-align:left}.info-folder[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:flex;gap:8px;margin:0;cursor:pointer;color:var(--primary);font-size:14px}.info-folder[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--secondary);background-color:var(--primary);padding:2px;border-radius:5px;width:100px}.info-folder[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.views[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:left;padding:5px;color:var(--primary);border-bottom:1px solid var(--tertiary);cursor:pointer}.views[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:var(--secondary)}.views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;top:105px;left:11px;border:1px solid #ddd;padding:8px;box-shadow:0 4px 8px #00000026;z-index:1000}.views-add-ues[_ngcontent-%COMP%]{background-color:#fff;position:fixed;top:6%;left:35%;width:442px;box-shadow:0 4px 8px #00000026;border-radius:5px;z-index:10005}.nom-class[_ngcontent-%COMP%]{width:100%;height:40px;text-align:center;font-size:14px;padding:10px;background-color:var(--primary);color:var(--secondary);border-top-left-radius:4px;border-top-right-radius:4px}.formModuleMatiere[_ngcontent-%COMP%]{padding:20px}.select-all[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:end;align-items:center;gap:10px;padding:8px}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:1001}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;background-color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:red;color:var(--primary)}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);background-color:var(--primary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.custom-select[_ngcontent-%COMP%]{border:none;width:100%;font-size:16px;color:#333;appearance:none;-webkit-appearance:none;-moz-appearance:none;position:relative;overflow:hidden;outline:none;overflow:scroll}.custom-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover{background-color:var(--primary);color:var(--secondary)}.info-folder[_ngcontent-%COMP%]:checked{background-color:var(--primary);color:var(--secondary)}.not-found[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30%;height:30%}.not-found[_ngcontent-%COMP%]{font-size:20px;margin-bottom:20px;position:absolute;width:100%;height:100%;text-align:center}.not-found[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;margin-bottom:20px}.not-found[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--secondary);font-size:18px;padding:8px;cursor:pointer;background-color:var(--primary);text-decoration:none;border-radius:5px}.not-found[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary);background-color:var(--secondary)}.input[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:var(--tertiary) 1px solid;padding:8px}.custom-checked[_ngcontent-%COMP%]{accent-color:var(--primary)}']})}}return n})();function Ut(n,d){if(n&1){let e=x();E(0),r(1,"tr")(2,"td"),a(3),o(),r(4,"td"),a(5),o(),r(6,"td"),a(7),o(),r(8,"td"),a(9),o(),r(10,"td",11),a(11),o(),r(12,"td",11),a(13),o(),r(14,"td"),a(15),o(),r(16,"td")(17,"div",12)(18,"a",13),_("click",function(){let t=h(e).$implicit,l=m(2);return v(l.load_module_without_note(t))}),g(19,"fa-icon",14),r(20,"span"),a(21,"Ajouter"),o()(),r(22,"a",13),_("click",function(){let t=h(e).$implicit,l=m(2);return v(l.load_bulletin(t.id))}),g(23,"fa-icon",14),r(24,"span"),a(25,"R\xE9lever"),o()()()()(),P()}if(n&2){let e=d.$implicit,i=d.index,t=m(2);s(3),b(i+1),s(2),b(e.idEtudiant.nom),s(2),b(e.idEtudiant.prenom),s(2),b(e.idEtudiant.email),s(),R("title",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idFiliere==null?null:e.idClasse.idFiliere.idFiliere.nomFiliere),s(),C(" ",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idNiveau==null?null:e.idClasse.idFiliere.idNiveau.nom,""),s(),R("title",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idFiliere==null?null:e.idClasse.idFiliere.idFiliere.nomFiliere),s(),C(" ",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idFiliere==null?null:e.idClasse.idFiliere.idFiliere.nomFiliere,""),s(2),b(e.idEtudiant.telephone),s(4),c("icon",t.icons.plus),s(4),c("icon",t.icons.eye)}}function At(n,d){if(n&1&&(E(0),p(1,Ut,26,11,"ng-container",10),P()),n&2){let e=m();s(),c("ngForOf",e.inscrits)}}function jt(n,d){n&1&&(r(0,"tr")(1,"td",15),a(2,"Aucun r\xE9sultat trouv\xE9"),o()())}function Dt(n,d){if(n&1){let e=x();r(0,"button",13),_("click",function(){let t=h(e).$implicit,l=m(2);return v(l.setPage(t))}),a(1),o()}if(n&2){let e=d.$implicit,i=m(2);T("active",e===i.page),s(),C(" ",e+1," ")}}function Bt(n,d){if(n&1){let e=x();r(0,"div",16)(1,"div",17)(2,"div",18)(3,"button",19),_("click",function(){h(e);let t=m();return v(t.previousPage())}),g(4,"fa-icon",3),o(),p(5,Dt,2,3,"button",20),r(6,"button",19),_("click",function(){h(e);let t=m();return v(t.nextPage())}),g(7,"fa-icon",3),o()()(),r(8,"p"),a(9),o()()}if(n&2){let e=m();s(3),c("disabled",e.page===0),s(),c("icon",e.icons.previous),s(),c("ngForOf",e.getVisiblePages()),s(),c("disabled",e.page===e.studentPages.totalPages-1),s(),c("icon",e.icons.nexte),s(2),k("page : ",e.page+1,"/",e.studentPages.totalPages,"")}}var Si=(()=>{class n{constructor(e,i,t,l,f,S,w,he,Be,ze){this.icons=e,this.fb=i,this.root=t,this.pageTitle=l,this.studentService=f,this.schoolService=S,this.sideBarService=w,this.route=he,this.semestreService=Be,this.location=ze,this.searchTerm="",this.inscrits=[],this.notes=[],this.modules=[],this.modules_of_student=[],this.isShow_modal=!0,this.page=0,this.size=10,this.filteredItems=[],this.pages=[],this.show_widget_add_note=!1}ngOnInit(){this.getSchoolInfo(),this.loadStudents(),this.load_update_form(),this.sideBarService.currentSearchTerm.subscribe(e=>{this.searchTerm=e,this.filterStudents()})}goBack(){this.location.back()}loadStudents(){this.route.queryParams.subscribe(e=>{this.idUrl=e.id,this.studentService.getStudent_ByIdClasse(this.page,this.size,this.idUrl).subscribe(i=>{this.inscrits=i.content,this.inscrits.forEach((t,l)=>{t.idEtudiant.urlPhoto=`${le.urlPhoto}${t.idEtudiant.urlPhoto}`}),this.studentPages=i,this.filteredItems=this.inscrits,this.pages=Array.from({length:i.totalPages},(t,l)=>l),console.log(this.inscrits,"pagenation teachers")})})}load_module_without_note(e){this.show_widget_add_note=!this.show_widget_add_note,this.inscrit_select=e,this.root.navigate(["/r-scolarite/add-note-student"],{queryParams:{id:e.id,idClasse:e.idClasse.idFiliere?.id}})}close_widget(){this.load_module_without_note(this.inscrit_select),this.loadStudents()}load_bulletin(e){let i={queryParams:{id:e}};this.root.navigate(["/r-scolarite/student-bulletin"],i)}filterStudents(){return this.searchTerm?this.filteredItems=this.inscrits.filter(e=>e.idEtudiant.nom.toLowerCase().includes(this.searchTerm.toLowerCase())||e.idEtudiant.prenom.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredItems=this.inscrits}getSchoolInfo(){this.schoolService.getSchools().subscribe(e=>{this.schoolInfo=e})}load_update(e){this.isShow_modal=!0,this.semestreService.getCurentSemestre().subscribe(i=>{let t=i})}load_update_form(){this.update_note_form=this.fb.group({examNote:["",[y.required,y.min(0),y.max(20)]],classeNote:["",[y.required,y.min(0),y.max(20)]],idModule:["",y.required]})}update_note(e){}onSelecteModule(e){console.log("clic ici");let i=e.target.value;this.notes.forEach(t=>{console.log(this.moduleSelect,"module-select"),i==t.idModule.id&&(this.moduleSelect==null,this.moduleSelect=t,console.log(this.moduleSelect,"module-select"))}),this.update_note_form.get("examNote")?.setValue(this.moduleSelect.examNote),this.update_note_form.get("classeNote")?.setValue(this.moduleSelect.classeNote)}exit(){this.moduleSelect=null,this.loadStudents()}setPage(e){e>=0&&e<this.studentPages.totalPages&&(this.page=e,this.loadStudents())}nextPage(){this.page<this.studentPages.totalPages-1&&this.setPage(this.page+1)}getVisiblePages(){let e=[],i=this.studentPages.totalPages,t=Math.max(0,this.page-1),l=Math.min(i-1,this.page+1);for(let f=t;f<=l;f++)e.push(f);return e}previousPage(){this.page>0&&this.setPage(this.page-1)}static{this.\u0275fac=function(i){return new(i||n)(u(I),u(se),u(W),u(Q),u(B),u(Y),u(D),u(L),u(z),u(be))}}static{this.\u0275cmp=M({type:n,selectors:[["app-student-note"]],decls:31,vars:5,consts:[["noResults",""],[1,"head"],[1,"back-button",3,"click"],[3,"icon"],[1,"input-search"],["type","text","placeholder","Recherche...",1,"search-input",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table","table-hover"],[4,"ngIf","ngIfElse"],["class","footer",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"class-name",3,"title"],[1,"btn-contenaire"],[3,"click"],[1,"icons",3,"icon"],["colspan","9",1,"text-center"],[1,"footer"],[1,"button-navigation"],[1,"pagination"],[3,"click","disabled"],[3,"active","click",4,"ngFor","ngForOf"]],template:function(i,t){if(i&1){let l=x();r(0,"main")(1,"div",1)(2,"div",2),_("click",function(){return h(l),v(t.goBack())}),g(3,"fa-icon",3),o(),r(4,"div",4)(5,"input",5),G("ngModelChange",function(S){return h(l),q(t.searchTerm,S)||(t.searchTerm=S),v(S)}),o()()(),r(6,"div",6)(7,"table",7)(8,"thead")(9,"tr")(10,"th"),a(11,"ID"),o(),r(12,"th"),a(13,"Nom"),o(),r(14,"th"),a(15,"Prenom"),o(),r(16,"th"),a(17,"Email"),o(),r(18,"th"),a(19,"Classe"),o(),r(20,"th"),a(21,"Filiere"),o(),r(22,"th"),a(23,"Telephone"),o(),r(24,"th"),a(25,"Action"),o()()(),r(26,"tbody"),p(27,At,2,1,"ng-container",8)(28,jt,3,0,"ng-template",null,0,ae),o()()(),p(30,Bt,10,7,"div",9),o()}if(i&2){let l=re(29);s(3),c("icon",t.icons.back),s(2),$("ngModel",t.searchTerm),s(22),c("ngIf",t.filterStudents().length)("ngIfElse",l),s(3),c("ngIf",t.inscrits.length!==0)}},dependencies:[O,N,V,U,J,F],styles:["main[_ngcontent-%COMP%]{width:100%;height:80vh;padding-top:10px}a[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:30px}.head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px}th[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fff,#d4d4d4)}.btn-contenaire[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.table-container[_ngcontent-%COMP%]{height:83%;position:relative;overflow-y:auto}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff;border-radius:10px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--tertiary);border-radius:10px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--primary)}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;text-overflow:ellipsis}.btn-contenaire[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:12px;padding:5px;display:flex;border:1px var(--primary) solid;border-radius:5px;justify-content:center;align-items:center;color:var(--primary)}.btn-contenaire[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary);border-color:var(--secondary);background-color:var(--secondary);cursor:pointer}.icons[_ngcontent-%COMP%]{cursor:pointer;text-align:center;font-size:16px}.class-name[_ngcontent-%COMP%]{cursor:pointer}td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:100%;border:1px solid var(--tertiary);height:50px;width:auto}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px var(--primary)}.flex-contenaire[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.modal-header[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary)}.btn-contenair[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background-color:var(--primary);color:var(--secondary);padding:10px 20px;border:none;border-radius:4px;cursor:pointer;margin-top:20px;font-size:16px}.btn-contenair[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.vide[_ngcontent-%COMP%]{width:200px;height:auto;background-color:#fff;border-radius:5px;border:1px solid #ccc;padding:10px;text-align:center}.no-module-template[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;color:var(--primary);text-align:center;font-weight:500}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;padding-bottom:10px}.button-navigation[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:flex-end}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--primary);margin-right:10px}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:10px}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px;font-size:12px;background-color:transparent;color:var(--secondary);cursor:pointer;border:1px solid var(--secondary);border-radius:50%}.pagination[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.disabled):not(.active){background-color:var(--secondary);color:var(--primary)}"]})}}return n})();function zt(n,d){n&1&&(r(0,"div",14),g(1,"img",15),o())}function Rt(n,d){if(n&1&&(r(0,"option",16),a(1),o()),n&2){let e=d.$implicit;c("value",e.id),s(),b(e.nomSemetre)}}function $t(n,d){if(n&1&&(E(0),r(1,"th",17),a(2),o(),P()),n&2){let e=d.$implicit;s(2),b(e.nomModule)}}function qt(n,d){if(n&1&&(E(0),p(1,$t,3,1,"ng-container",12),r(2,"th",13),a(3),o(),P()),n&2){let e=d.$implicit;s(),c("ngForOf",e.modules),s(2),b(e.nomUE)}}function Gt(n,d){n&1&&(E(0),g(1,"td"),P())}function Wt(n,d){if(n&1&&(E(0),p(1,Gt,2,0,"ng-container",12),r(2,"td"),a(3),o(),P()),n&2){let e=d.$implicit;s(),c("ngForOf",e.modules),s(2),b(e.noteUE)}}function Jt(n,d){if(n&1&&(E(0),r(1,"tr")(2,"td"),a(3),o(),r(4,"td"),a(5),o(),r(6,"td"),a(7),xe(8,"date"),o(),p(9,Wt,4,2,"ng-container",12),r(10,"td"),a(11,"--"),o(),r(12,"td"),a(13,"--"),o()(),P()),n&2){let e=d.$implicit,i=d.index,t=m();s(3),b(i+1),s(2),k("",e.nom," ",e.prenom,""),s(2),k("",Se(8,6,e.date_naissance,"dd/MM/yyyy"),", ",e.lieuNaissance,""),s(2),c("ngForOf",t.notes)}}var yi=(()=>{class n{constructor(e,i,t,l,f,S,w){this.etudiantService=e,this.icons=i,this.semestreService=t,this.clasService=l,this.route=f,this.schollService=S,this.sideBarService=w,this.notes=[],this.ueListe=[],this.modules=[],this.students=[],this.semestres=[],this.searchTerm="",this.page=0,this.size=10,this.filteredItems=[],this.pages=[]}ngOnInit(){this.getSchoolInfo(),this.load_semestre(),this.getClasse(),this.sideBarService.currentSearchTerm.subscribe(e=>{this.searchTerm=e,this.filterStudents()})}getSchoolInfo(){this.schollService.getSchools().subscribe(e=>{this.school=e,this.school.urlPhoto=`http://localhost/StudentImg/${this.school.urlPhoto}`})}load_semestre(){this.route.queryParams.subscribe(e=>{this.idClasse=e.id}),this.semestreService.getCurrentSemestresByIdNivFiliere(this.idClasse).subscribe(e=>{e.forEach(i=>{this.semestres.some(t=>t.id==i.id)||this.semestres.push(i)}),console.log(this.semestres,"semestre")})}getClasse(){this.clasService.getClassById(this.idClasse).subscribe(e=>{this.classe=e})}goBack(){window.history.back()}filterStudents(){return this.searchTerm?this.filteredItems=this.students.filter(e=>e.nom.toLowerCase().includes(this.searchTerm.toLowerCase())||e.prenom.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredItems=this.students}setPage(e){e>=0&&e<this.studentspage.totalPages&&(this.page=e,this.getNotes_classe())}nextPage(){this.page<this.studentspage.totalPages-1&&this.setPage(this.page+1)}previousPage(){this.page>0&&this.setPage(this.page-1)}onSelect(e){this.idSemestre=e.target.value,this.getNotes_classe()}getNotes_classe(){this.etudiantService.getAllNoteByClasse(this.page,this.size,this.idClasse,this.idSemestre).subscribe(e=>{this.studentspage=e,this.students=this.studentspage.content,this.modules=[],this.notes=[],this.studentspage.content.forEach(i=>{i.noteDTO&&i.noteDTO.length>0?(i.noteDTO.forEach(t=>{this.notes.some(l=>l.nomUE===t.nomUE)||this.notes.push(t),t.modules.forEach(l=>{this.modules.some(f=>f.nomModule===l.nomModule)||this.modules.push(l)})}),console.log(this.modules,"modules"),console.log(this.notes,"notes")):console.log(`Pas de modules pour ${i.nom} ${i.prenom}`)}),console.log(this.studentspage,"student note page")})}static{this.\u0275fac=function(i){return new(i||n)(u(B),u(I),u(z),u(H),u(L),u(Y),u(D))}}static{this.\u0275cmp=M({type:n,selectors:[["app-all-notes-semestre"]],decls:36,vars:8,consts:[[1,"back-button",3,"click"],[3,"icon"],[1,"head"],["class","logo",4,"ngIf"],[1,"info"],[3,"change"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"table-container"],[1,"table-responsive"],[1,"table","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],["scope","col",1,"vertical-header"],[1,"logo"],["src","/assets/logounivsegou.png","alt","PHOTO"],[3,"value"],[1,"vertical-header","nom-module"]],template:function(i,t){i&1&&(r(0,"main")(1,"div",0),_("click",function(){return t.goBack()}),g(2,"fa-icon",1),o(),r(3,"section",2),p(4,zt,2,0,"div",3),r(5,"div",4)(6,"h4"),a(7,"Institut Universitaire de Formation Professionnelle (IUFP)"),o(),r(8,"p"),a(9),o(),r(10,"p"),a(11,"Resultat definitifs du : "),r(12,"select",5),_("change",function(f){return t.onSelect(f)}),r(13,"option",6),a(14,"Semestre"),o(),p(15,Rt,2,2,"option",7),o()(),r(16,"p"),a(17),o()()(),r(18,"section",8)(19,"div",9)(20,"table",10)(21,"thead")(22,"tr")(23,"th",11),a(24,"#"),o(),r(25,"th",11),a(26,"Nom et Pr\xE9nom"),o(),r(27,"th",11),a(28,"Date et lieu de naissance"),o(),p(29,qt,4,2,"ng-container",12),r(30,"th",13),a(31,"Moyenne"),o(),r(32,"th",13),a(33,"Observation"),o()()(),r(34,"tbody"),p(35,Jt,14,9,"ng-container",12),o()()()()()),i&2&&(s(2),c("icon",t.icons.back),s(2),c("ngIf",t.school==null?null:t.school.urlPhoto),s(5),C("Annee Universitaire ",t.anneeScolaire,""),s(6),c("ngForOf",t.semestres),s(2),k("Filiere : ",t.classe==null||t.classe.idFiliere==null||t.classe.idFiliere.idNiveau==null?null:t.classe.idFiliere.idNiveau.nom," ",t.classe==null||t.classe.idFiliere==null||t.classe.idFiliere.idFiliere==null?null:t.classe.idFiliere.idFiliere.nomFiliere,""),s(12),c("ngForOf",t.notes),s(6),c("ngForOf",t.students))},dependencies:[O,N,A,j,F,Ee],styles:["main[_ngcontent-%COMP%]{width:100%;padding:20px;height:80vh}.vertical-header[_ngcontent-%COMP%]{writing-mode:vertical-lr;transform:rotate(180deg)}.head[_ngcontent-%COMP%]{display:flex;width:100%;gap:25%}table[_ngcontent-%COMP%]{font-size:12px}th[_ngcontent-%COMP%]{height:130px;text-overflow:ellipsis;overflow:hidden;width:150px;white-space:nowrap}p[_ngcontent-%COMP%]{margin:0;font-size:16px}h4[_ngcontent-%COMP%]{font-size:20px}.nom-module[_ngcontent-%COMP%]{font-weight:400}.info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;text-align:center}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:70px;width:auto}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}select[_ngcontent-%COMP%]{border:none}select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.table-container[_ngcontent-%COMP%]{position:relative;width:100%;height:70%}.table-responsive[_ngcontent-%COMP%]{width:100%;height:70%;position:absolute;overflow-x:auto;overflow-y:auto}"]})}}return n})();var Yt=n=>({color:n});function Ht(n,d){if(n&1){let e=x();r(0,"tr")(1,"td"),a(2),o(),r(3,"td"),a(4),o(),r(5,"td"),a(6),o(),r(7,"td",13),a(8),o(),r(9,"td",13),a(10),o(),r(11,"td"),a(12),o(),r(13,"td"),a(14),o(),r(15,"td")(16,"a"),g(17,"fa-icon",14),r(18,"span"),a(19),o()()(),r(20,"td")(21,"div",15)(22,"a",16),_("click",function(){let t=h(e).$implicit,l=m(2);return v(l.load_bulletin(t.idEtudiant.idEtudiant))}),g(23,"fa-icon",17),r(24,"span"),a(25,"R\xE9lever"),o()()()()()}if(n&2){let e=d.$implicit,i=d.index,t=m(2);s(2),b(i+1),s(2),b(e.idEtudiant.nom),s(2),b(e.idEtudiant.prenom),s(),R("title",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idFiliere==null?null:e.idClasse.idFiliere.idFiliere.nomFiliere),s(),C(" ",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idNiveau==null?null:e.idClasse.idFiliere.idNiveau.nom," "),s(),R("title",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idFiliere==null?null:e.idClasse.idFiliere.idFiliere.nomFiliere),s(),C(" ",t.abrevigateFiliereName(e.idClasse.idFiliere==null||e.idClasse.idFiliere.idFiliere==null?null:e.idClasse.idFiliere.idFiliere.nomFiliere)," "),s(2),b(e.idEtudiant.telephone),s(2),b(e.idEtudiant.status),s(3),c("icon",(e.payer,t.icons.circle))("ngStyle",Ce(13,Yt,e.payer?"green":"red")),s(2),b(e.payer?"inscrit(e)":"Non Inscrit(e)"),s(4),c("icon",t.icons.eye)}}function Kt(n,d){if(n&1&&(E(0),p(1,Ht,26,15,"tr",12),P()),n&2){let e=m();s(),c("ngForOf",e.filterStudents())}}function Qt(n,d){n&1&&(r(0,"tr")(1,"td",18),a(2,"Aucun r\xE9sultat trouv\xE9"),o()())}function Xt(n,d){if(n&1){let e=x();r(0,"button",16),_("click",function(){let t=h(e).$implicit,l=m(2);return v(l.setPage(t))}),a(1),o()}if(n&2){let e=d.$implicit,i=m(2);T("active",e===i.page),s(),C(" ",e+1," ")}}function Zt(n,d){if(n&1){let e=x();r(0,"div",19)(1,"button",20),_("click",function(){h(e);let t=m();return v(t.previousPage())}),g(2,"fa-icon",3),o(),p(3,Xt,2,3,"button",21),r(4,"button",20),_("click",function(){h(e);let t=m();return v(t.nextPage())}),g(5,"fa-icon",3),o()()}if(n&2){let e=m();s(),c("disabled",e.page===0),s(),c("icon",e.icons.previous),s(),c("ngForOf",e.getVisiblePages()),s(),c("disabled",e.page===e.studentspage.totalPages-1),s(),c("icon",e.icons.nexte)}}var wi=(()=>{class n{constructor(e,i,t,l,f){this.service=e,this.route=i,this.router=t,this.sideBarService=l,this.icons=f,this.searchTerm="",this.inscrits=[],this.page=0,this.size=20,this.filteredItems=[],this.pages=[],this.permission=!1}ngOnInit(){this.loadStudents(),this.sideBarService.currentSearchTerm.subscribe(e=>{this.searchTerm=e,this.filterStudents()})}loadStudents(){this.route.queryParams.subscribe(e=>{this.idClasse=e.id}),this.service.getStudent_ByIdClasse(this.page,this.size,this.idClasse).subscribe(e=>{this.inscrits=e.content,this.inscrits.forEach(i=>{i.idEtudiant.urlPhoto=`${le.urlPhoto}${i.idEtudiant.urlPhoto}`}),this.studentspage=e,this.filteredItems=this.inscrits,this.pages=Array.from({length:e.totalPages},(i,t)=>t)})}filterStudents(){return this.searchTerm?this.filteredItems=this.inscrits.filter(e=>e.idEtudiant.nom.toLowerCase().includes(this.searchTerm.toLowerCase())||e.idEtudiant.prenom.toLowerCase().includes(this.searchTerm.toLowerCase())||e.idEtudiant.email.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredItems=this.inscrits}goBack(){window.history.back()}getPermission(){return sessionStorage.getItem("dga")?(this.permission=!0,!0):!1}load_bulletin(e){let i={queryParams:{id:e}};this.getPermission()?this.router.navigate(["/dga/student-bulletin"],i):this.router.navigate(["/r-scolarite/student-bulletin"],i)}setPage(e){e>=0&&e<this.studentspage.totalPages&&(this.page=e,this.loadStudents())}nextPage(){this.page<this.studentspage.totalPages-1&&this.setPage(this.page+1)}previousPage(){this.page>0&&this.setPage(this.page-1)}getVisiblePages(){let e=[],i=this.studentspage.totalPages,t=Math.max(0,this.page-1),l=Math.min(i-1,this.page+1);for(let f=t;f<=l;f++)e.push(f);return e}abrevigateFiliereName(e){return e.split(" ").filter(t=>t.length>3).map(t=>t[0].toUpperCase()).join("")}static{this.\u0275fac=function(i){return new(i||n)(u(B),u(L),u(W),u(D),u(I))}}static{this.\u0275cmp=M({type:n,selectors:[["app-etudiants-de-la-classe"]],decls:37,vars:7,consts:[["noResults",""],[1,"head"],[1,"back-button",3,"click"],[3,"icon"],[1,"input-search"],["type","text","placeholder","Recherche...",1,"search-input",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table","table-hover"],[4,"ngIf","ngIfElse"],[1,"footer"],[1,"button-navigation"],["class","pagination",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"class-name",3,"title"],[3,"icon","ngStyle"],[1,"btn-contenaire"],[3,"click"],[1,"icons",3,"icon"],["colspan","9",1,"text-center"],[1,"pagination"],[3,"click","disabled"],[3,"active","click",4,"ngFor","ngForOf"]],template:function(i,t){if(i&1){let l=x();r(0,"main")(1,"div",1)(2,"div",2),_("click",function(){return h(l),v(t.goBack())}),g(3,"fa-icon",3),o(),r(4,"div",4)(5,"input",5),G("ngModelChange",function(S){return h(l),q(t.searchTerm,S)||(t.searchTerm=S),v(S)}),o()()(),r(6,"div",6)(7,"table",7)(8,"thead")(9,"tr")(10,"th"),a(11,"N\xB0D'ordre"),o(),r(12,"th"),a(13,"Nom"),o(),r(14,"th"),a(15,"Prenom"),o(),r(16,"th"),a(17,"Classe"),o(),r(18,"th"),a(19,"Filiere"),o(),r(20,"th"),a(21,"Telephone"),o(),r(22,"th"),a(23,"Status"),o(),r(24,"th"),a(25,"Etat"),o(),r(26,"th"),a(27,"Action"),o()()(),r(28,"tbody"),p(29,Kt,2,1,"ng-container",8)(30,Qt,3,0,"ng-template",null,0,ae),o()()(),r(32,"div",9)(33,"div",10),p(34,Zt,6,5,"div",11),o(),r(35,"p"),a(36),o()()()}if(i&2){let l=re(31);s(3),c("icon",t.icons.back),s(2),$("ngModel",t.searchTerm),s(24),c("ngIf",t.filterStudents().length)("ngIfElse",l),s(5),c("ngIf",t.inscrits.length!==0),s(2),k("page : ",t.page+1,"/",t.studentspage.totalPages,"")}},dependencies:[O,N,ye,V,U,J,F],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;width:100%;padding-top:20px}a[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:30px}th[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fff,#d4d4d4)}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;text-overflow:ellipsis}span[_ngcontent-%COMP%]{margin-left:5px;font-size:10px;color:var(--primary)}.class-name[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{border-radius:100%;border:1px solid #ccc;height:50px;width:auto}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}.btn-contenaire[_ngcontent-%COMP%]{cursor:pointer}.table-container[_ngcontent-%COMP%]{height:400px;position:relative;overflow-y:auto;width:100%}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.head[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;padding:0 10px}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;padding-bottom:10px;width:100%}.button-navigation[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:flex-end}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--primary);margin-right:10px}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:10px}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px;font-size:12px;background-color:transparent;color:var(--secondary);cursor:pointer;border:1px solid var(--secondary);border-radius:50%}.pagination[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.disabled):not(.active){background-color:var(--secondary);color:var(--primary)}"]})}}return n})();var De=Re($e());function ei(n,d){if(n&1&&(r(0,"option",18),a(1),o()),n&2){let e=d.$implicit;c("value",e.id),s(),b(e.nomSemetre)}}function ti(n,d){if(n&1&&(a(0),g(1,"br")),n&2){let e=d.$implicit;C(" ",e.nomModule," ")}}function ii(n,d){if(n&1&&(a(0),g(1,"br")),n&2){let e=d.$implicit;C(" ",e.noteModule," ")}}function ni(n,d){if(n&1&&(r(0,"tr")(1,"td"),a(2),o(),r(3,"td"),pe(4,ti,2,1,"br",null,me),o(),r(6,"td",11),a(7),g(8,"br"),o(),r(9,"td"),a(10),o(),r(11,"td"),pe(12,ii,2,1,"br",null,me),o(),g(14,"td"),r(15,"td"),a(16),o(),g(17,"td"),o()),n&2){let e=d.$implicit;s(2),b(e.nomUE),s(2),_e(e.modules),s(3),C(" ",e.coefficientUe," "),s(3),b(e.session),s(2),_e(e.modules),s(4),b(e.noteUE)}}function oi(n,d){if(n&1&&p(0,ni,18,4,"tr",19),n&2){let e=m();c("ngForOf",e.notes)}}function ri(n,d){n&1&&(r(0,"tr")(1,"td",20),a(2,"Aucune note pour trouver"),o()())}var Ii=(()=>{class n{constructor(e,i,t,l,f,S){this.icons=e,this.root=i,this.toast=t,this.semestreService=l,this.studentService=f,this.pageTitle=S,this.moyenneGenerale=0,this.mention="",this.semestres=[],this.notes=[]}ngOnInit(){this.load_admin(),this.load_student()}imprimer(){let e=document.querySelector(".btn-container");e.style.display="none";var i=document.getElementById("bulletin");(0,De.default)(i,{scale:2}).then(t=>{let l=208,f=t.height*l/t.width,S=t.toDataURL("image/png"),w=new Le("p","mm","a4");w.addImage(S,"PNG",0,0,l,f),w.save(`fiche_paie ${name}.pdf`),e.style.display="block"})}load_student(){this.root.queryParams.subscribe(e=>{this.idStudent=+e.id}),this.studentService.getStudent_by_id(this.idStudent).subscribe(e=>{this.students=e,console.log(this.students,"student"),this.load_semestre()})}load_semestre(){this.semestreService.getCurrentSemestresByIdNivFiliere(this.students.idClasse?.idFiliere?.id).subscribe(e=>{e.forEach(i=>{this.semestres.some(t=>t.id==i.id)||this.semestres.push(i)}),console.log(this.semestres,"semestre")})}onSelect(e){let i=e.target.value,t=0,l=0;this.studentService.getAllNoteByIdStudent(this.idStudent,i).subscribe(f=>{this.notes=f,this.notes.forEach(S=>{t+=S.noteUeCoefficient,l+=S.coefficientUe}),l=l-1,console.log(t,"sum",l),this.moyenneGenerale=t/l,this.moyenneGenerale=Math.round(this.moyenneGenerale*100)/100,this.notes.length===0&&this.toast.warning("Les notes de l'\xE9tudiant sont indisponible"),console.log(this.notes,"notes student")})}goBack(){window.history.back()}getCurrentDate(){let e=new Date,i={day:"numeric",month:"long",year:"numeric"};return new Intl.DateTimeFormat("fr-FR",i).format(e)}load_admin(){let e=sessionStorage.getItem("scolarite");this.admin=JSON.parse(e)}static{this.\u0275fac=function(i){return new(i||n)(u(I),u(L),u(ce),u(z),u(B),u(Q))}}static{this.\u0275cmp=M({type:n,selectors:[["app-student-bulletin"]],decls:83,vars:14,consts:[[1,"back-button",3,"click"],[3,"icon"],[1,"section-head"],[1,"info"],[1,"coll"],[1,"img"],["src","/assets/logounivsegou.png","alt",""],[3,"change"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"table","table-bordered"],[1,"coef"],[1,"info-footer"],[1,"footer"],[1,"signature"],[1,"btn-content"],["type","button",3,"click"],[1,"pdf-icon",3,"icon"],[3,"value"],[4,"ngFor","ngForOf"],["colspan","9"]],template:function(i,t){i&1&&(r(0,"main")(1,"div",0),_("click",function(){return t.goBack()}),g(2,"fa-icon",1),o(),r(3,"section",2)(4,"h5"),a(5,"Relever de notes "),o(),r(6,"div",3)(7,"div",4)(8,"div",5),g(9,"img",6),o(),r(10,"p"),a(11,"Anne\xE9 universitaire : 2024 - 2025"),o(),r(12,"p"),a(13),o(),r(14,"p"),a(15),o()(),r(16,"div",4)(17,"p"),a(18,"Semestre : "),r(19,"select",7),_("change",function(f){return t.onSelect(f)}),r(20,"option",8),a(21,"Semestre"),o(),p(22,ei,2,2,"option",9),o()(),r(23,"p"),a(24),o(),r(25,"p"),a(26),o()(),r(27,"div",4)(28,"p"),a(29,"Universit\xE9 de S\xE9gou"),o(),r(30,"p"),a(31,"Institut universitaire de Formation Professionnel "),o(),r(32,"p"),a(33),o()()()(),r(34,"table",10)(35,"thead")(36,"tr")(37,"th"),a(38,"UE"),o(),r(39,"th"),a(40,"ECUE"),o(),r(41,"th",11),a(42,"Coefficient"),o(),r(43,"th"),a(44,"Session"),o(),r(45,"th"),a(46,"Moyenne"),o(),r(47,"th"),a(48,"PJ "),g(49,"br"),a(50,"ECUE"),o(),r(51,"th"),a(52,"Moyenne "),g(53,"br"),a(54," UE"),o(),r(55,"th"),a(56,"PJ"),g(57,"br"),a(58," UE"),o()()(),r(59,"tbody"),p(60,oi,1,1,"tr")(61,ri,3,0,"tr"),o()(),r(62,"div",12)(63,"p"),a(64),o(),r(65,"p"),a(66," Point Jury : "),o(),r(67,"p"),a(68," Validation du semestre : "),o()(),r(69,"div",13)(70,"div",14)(71,"p"),a(72),g(73,"br"),a(74," Le ch\xE9f de D\xE9partement "),o(),r(75,"p"),a(76),g(77,"br"),a(78," Ma\xEEtre assistant "),o()()(),r(79,"div",15)(80,"button",16),_("click",function(){return t.imprimer()}),g(81,"fa-icon",17),a(82," Imprimer"),o()()()),i&2&&(s(2),c("icon",t.icons.back),s(11),C("Nom: ",t.students.nom,""),s(2),C("Prenom : ",t.students.prenom,""),s(7),c("ngForOf",t.semestres),s(2),C("Date de naissance : ",t.students.dateNaissance,""),s(2),C("Lieu de naissance : ",t.students.lieuNaissance,""),s(7),k("Mention : ",t.students.idClasse==null||t.students.idClasse.idFiliere==null||t.students.idClasse.idFiliere.idNiveau==null?null:t.students.idClasse.idFiliere.idNiveau.nom," ",t.students.idClasse==null||t.students.idClasse.idFiliere==null||t.students.idClasse.idFiliere.idFiliere==null?null:t.students.idClasse.idFiliere.idFiliere.nomFiliere,""),s(27),X(t.notes.length>0?60:61),s(4),C(" Moyenne du semestre : ",t.moyenneGenerale,""),s(8),C("S\xE9gou le, ",t.getCurrentDate(),""),s(4),k("Dr ",t.admin.nom.charAt(0).toLocaleUpperCase()," ",t.admin.prenom.toLocaleUpperCase(),""),s(5),c("icon",t.icons.pdf))},dependencies:[O,A,j,F],styles:[".info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end}.section-head[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:10px}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:auto}.section-head[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;justify-content:center}p[_ngcontent-%COMP%]{margin:0}select[_ngcontent-%COMP%]{border:none;margin-left:10px}select[_ngcontent-%COMP%]:focus{outline:none;border:none}.signature[_ngcontent-%COMP%]{padding-right:20px;display:flex;flex-direction:column;gap:80px}.signature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}.info-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.btn-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px 0;padding:8px;border:none;border-radius:10px;cursor:pointer;text-align:center;font-weight:500}.btn-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}fa-icon[_ngcontent-%COMP%]{color:red}"]})}}return n})();export{hi as a,Si as b,yi as c,wi as d,Ii as e};
