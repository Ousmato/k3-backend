import{a as D}from"./chunk-MMUNQ446.js";import{d as H}from"./chunk-UJYHWII2.js";import{A as I,C as f,I as t,J as n,K as v,L as y,M as _,O as E,P as F,Q as C,U as i,V as c,W as l,X as P,ma as k,o as b,qb as w,vb as O,w as S,x as r,y as p,za as M,zb as j}from"./chunk-Q3UIBATL.js";import{a as U}from"./chunk-W3N7LORT.js";import{f as R}from"./chunk-OXVY4BEJ.js";var N=R(U());function z(m,T){if(m&1&&(y(0),t(1,"tr")(2,"td"),i(3),n(),t(4,"td"),i(5),n(),t(6,"td",13)(7,"div"),i(8),n(),t(9,"span"),i(10),n()(),t(11,"td"),i(12),n(),t(13,"td"),i(14),n()(),_()),m&2){let o=T.$implicit,a=F();r(3),c(o.date),r(2),P("",o.journee.idEmplois.idClasse.idFiliere==null||o.journee.idEmplois.idClasse.idFiliere.idNiveau==null?null:o.journee.idEmplois.idClasse.idFiliere.idNiveau.nom," (",o.journee.idEmplois.idClasse.idFiliere==null||o.journee.idEmplois.idClasse.idFiliere.idFiliere==null?null:o.journee.idEmplois.idClasse.idFiliere.idFiliere.nomFiliere,")"),r(3),l("",o.nbreHeures," heures"),r(2),c(a.moment),r(2),c(o.coutHeureFormatter),r(2),c(o.montantFormatter)}}var K=(()=>{class m{constructor(o,a,e,s){this.enseignantService=o,this.icons=a,this.root=e,this.schoolService=s,this.sum_montant="",this.montant_total=0,this.paie=[]}ngOnInit(){this.getPaieByEnseignant(),this.getSchoolInfo()}getPaieByEnseignant(){this.root.queryParams.subscribe(o=>{this.idEnseignant=o.id}),this.enseignantService.getPaieBy_Enseignant_id(this.idEnseignant).subscribe(o=>{this.paie=o,this.paie.forEach(a=>{a.montant=a.coutHeure*a.nbreHeures;let e=new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"});a.coutHeureFormatter=e.format(a.coutHeure),a.montantFormatter=e.format(a.montant),this.sum_montant=e.format(this.paie.reduce((x,B)=>x+B.montant,0));let s=a.journee.heureFin,h=new Date,g=new Date,u=new Date(g.toDateString()+" "+s),d=new Date(h.setHours(12,0,0,0)).getTime();u.getHours()<=d?this.moment="Matin/Soir":u.getHours()<d?this.moment="Matin":this.moment="Soir"})})}getSchoolInfo(){this.schoolService.getSchools().subscribe(o=>{this.schoolInfo=o,this.schoolInfo.urlPhoto="http://localhost/StudentImg/"+this.schoolInfo.urlPhoto})}goBack(){window.history.back()}imprimer(o){let a=document.querySelector(".btn-content");a.style.display="none";var e=document.getElementById("main-content");(0,N.default)(e,{scale:2}).then(s=>{let h=208,g=s.height*h/s.width,u=s.toDataURL("image/png"),d=new H("p","mm","a4");d.addImage(u,"PNG",0,0,h,g),d.save(`fiche_paie ${o}.pdf`),a.style.display="block"})}static{this.\u0275fac=function(a){return new(a||m)(p(D),p(w),p(M),p(j))}}static{this.\u0275cmp=b({type:m,selectors:[["app-enseignant-fiche-paie"]],decls:51,vars:12,consts:[[1,"back-button",3,"click"],[3,"icon"],["id","main-content"],[1,"contenaire-head"],[1,"first-child"],[1,"second-child"],[1,"image-content"],["alt","",3,"src"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["colspan","9",1,"text-center"],[1,"btn-content"],["id","button","type","button",3,"click"],[1,"heure-content"]],template:function(a,e){a&1&&(t(0,"div",0),E("click",function(){return e.goBack()}),v(1,"fa-icon",1),n(),t(2,"main",2)(3,"section",3)(4,"div",4)(5,"h4"),i(6,"Employeur"),n(),t(7,"p"),i(8),n(),t(9,"p"),i(10),n(),t(11,"p"),i(12),n(),t(13,"p"),i(14),n()(),t(15,"div",5)(16,"h4"),i(17,"Employer"),n(),t(18,"p"),i(19),n(),t(20,"p"),i(21),n(),t(22,"p"),i(23),n(),t(24,"p"),i(25),n()(),t(26,"div",6),v(27,"img",7),n()(),t(28,"table",8)(29,"thead")(30,"tr")(31,"th"),i(32,"Date"),n(),t(33,"th"),i(34,"Nom des classes"),n(),t(35,"th"),i(36,"Nombre d'heures effctuee"),n(),t(37,"th"),i(38,"Cout Unitaire d'heure"),n(),t(39,"th"),i(40,"Montant"),n()()(),t(41,"tbody"),I(42,z,15,7,"ng-container",9),t(43,"tr")(44,"td",10),i(45,"Montant total est : "),t(46,"b"),i(47),n()()()()(),t(48,"div",11)(49,"button",12),E("click",function(){return e.imprimer(e.enseignant.nom)}),i(50,"Telecharger en PDF"),n()()()),a&2&&(r(),f("icon",e.icons.back),r(7),l("Nom : ",e.schoolInfo==null?null:e.schoolInfo.nomSchool,""),r(2),l("Sise :",e.schoolInfo==null?null:e.schoolInfo.localite,""),r(2),l("Tel : +223 ",e.schoolInfo==null?null:e.schoolInfo.telephone,""),r(2),l("Email : ",e.schoolInfo==null?null:e.schoolInfo.email,""),r(5),l("Nom : ",e.enseignant.nom,""),r(2),l("Prenom : ",e.enseignant.prenom,""),r(2),l("Tel : ",e.enseignant.telephone,""),r(2),l("Email : ",e.enseignant.email,""),r(2),C("src",e.schoolInfo==null?null:e.schoolInfo.urlPhoto,S),r(15),f("ngForOf",e.paie),r(5),c(e.sum_montant))},dependencies:[k,O],styles:["main[_ngcontent-%COMP%]{padding:20px;box-shadow:0 4px 8px #0003}.contenaire-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px}span[_ngcontent-%COMP%]{color:var(--primary);font-size:12px}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px 10px;border-radius:5px;background-color:var(--primary);color:var(--secondary);cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}h4[_ngcontent-%COMP%]{color:var(--primary)}.heure-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}img[_ngcontent-%COMP%]{width:80px;height:auto;border-radius:50%}"]})}}return m})();export{K as a};
