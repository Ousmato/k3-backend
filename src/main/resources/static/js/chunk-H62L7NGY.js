import{Ba as g,a as s,b as a,cb as n,d as l,g as h,k as c,m as i,pb as m,sa as u}from"./chunk-Q3UIBATL.js";var v=(()=>{class o{constructor(e,r,t){this.http=e,this.loadingService=r,this.router=t,this.authUrl=`${n.apiUrl}Auth/login`}login(e,r){return this.loadingService.loading(),this.http.post(this.authUrl,{email:e,password:r}).pipe(a(t=>(t&&t.token&&(console.log(t,"response"),sessionStorage.setItem("authToken",t.token),sessionStorage.setItem("refreshToken",t.refreshToken),sessionStorage.setItem("user",JSON.stringify(t.user))),t)),h(()=>this.loadingService.stopLoading()),l(t=>(console.error("Error during login:",t),s(t))))}logout(){sessionStorage.clear(),this.router.navigate([""])}isLoggedIn(){return console.log(sessionStorage.getItem("user")!=null),sessionStorage.getItem("user")!=null}refreshToken(e,r){return this.http.post(`${n.apiUrl}Auth/refresh-token`,{email:e,refreshToken:r})}static{this.\u0275fac=function(r){return new(r||o)(i(u),i(m),i(g))}}static{this.\u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{v as a};
