import{a as k}from"./chunk-MMUNQ446.js";import{a as _e}from"./chunk-YPOCFZ2S.js";import{d as be}from"./chunk-UJYHWII2.js";import{$ as ee,A as d,B as E,Ba as ie,C as c,Cb as fe,D as y,Db as ve,E as G,F as Y,Fa as R,G as X,Ga as q,H as J,Ha as A,I as r,Ia as oe,J as o,K as g,L as V,M as N,Ma as re,N as C,Na as ae,O as f,P as p,Pa as se,Q as K,Qa as le,T as D,Ta as ce,U as a,Ua as me,V as h,Va as z,W as L,Wa as B,Xa as pe,Z as Q,Za as de,_ as Z,ba as S,ca as H,fa as j,fb as ge,gb as he,ib as $,jb as ue,ma as w,na as T,o as P,oa as te,qb as O,r as v,s as b,ub as U,vb as M,x as s,y as u,za as ne}from"./chunk-Q3UIBATL.js";import{a as Me}from"./chunk-W3N7LORT.js";import{f as Oe}from"./chunk-OXVY4BEJ.js";function Fe(n,m){if(n&1){let e=C();r(0,"button",10),f("click",function(){v(e);let t=p();return b(t.addTeacher())}),a(1,"Ajouter enseignant "),g(2,"fa-icon",11),o()}if(n&2){let e=p();s(2),c("icon",e.icons.had_point_down)}}function Ve(n,m){if(n&1){let e=C();r(0,"button",10),f("click",function(){v(e);let t=p();return b(t.timeWorks())}),a(1,"Heure \xE9ffectuer "),g(2,"fa-icon",11),o()}if(n&2){let e=p();s(2),c("icon",e.icons.had_point_down)}}function Ne(n,m){if(n&1&&(r(0,"span",14),a(1),o()),n&2){let e=m.$implicit,i=p(3);s(),L("",i.abbreviateFiliereName(e.nomFiliere),", ")}}function Le(n,m){if(n&1){let e=C();r(0,"tr")(1,"td",13),a(2),o(),r(3,"td"),a(4),o(),r(5,"td"),a(6),o(),r(7,"td"),a(8),o(),r(9,"td"),a(10),o(),r(11,"td"),a(12),o(),r(13,"td"),X(14,Ne,2,1,"span",14,Y),o(),r(16,"td")(17,"div",15)(18,"a",16),f("click",function(){let t=v(e).$implicit,l=p(2);return b(l.toggle_toEdit(t.teachers.idEnseignant))}),g(19,"fa-icon",11),r(20,"span"),a(21,"Details"),o()()()()()}if(n&2){let e=m.$implicit,i=m.index,t=p(2);s(2),h(i+1),s(2),h(e.teachers.nom),s(2),h(e.teachers.prenom),s(2),h(e.teachers.email),s(2),h(e.teachers.telephone),s(2),h(e.teachers.status),s(2),J(e.filieres),s(5),c("icon",t.icons.eye)}}function De(n,m){if(n&1&&(V(0),d(1,Le,22,7,"tr",12),N()),n&2){let e=p();s(),c("ngForOf",e.filterTeachers())}}function je(n,m){n&1&&(r(0,"tr")(1,"td",17),a(2,"Aucun r\xE9sultat trouv\xE9"),o()())}function Re(n,m){if(n&1){let e=C();r(0,"button",16),f("click",function(){let t=v(e).$implicit,l=p(2);return b(l.setPage(t))}),a(1),o()}if(n&2){let e=m.$implicit,i=p(2);y("active",e===i.page),s(),L(" ",e+1," ")}}function Ae(n,m){if(n&1){let e=C();r(0,"div",18)(1,"button",19),f("click",function(){v(e);let t=p();return b(t.previousPage())}),g(2,"fa-icon",11),o(),d(3,Re,2,3,"button",20),r(4,"button",19),f("click",function(){v(e);let t=p();return b(t.nextPage())}),g(5,"fa-icon",11),o()()}if(n&2){let e=p();s(),c("disabled",e.page===0),s(),c("icon",e.icons.previous),s(),c("ngForOf",e.getVisiblePages()),s(),c("disabled",e.page===e.teachersPage.totalPages-1),s(),c("icon",e.icons.nexte)}}var nt=(()=>{class n{constructor(e,i,t,l){this.icons=e,this.root=i,this.sideBareService=t,this.enseignantService=l,this.enseignants=[],this.searchTerm="",this.page=0,this.size=20,this.filteredItems=[],this.pages=[],this.profiles=[],this.profilesItem=[],this.permission=!1}ngOnInit(){this.loadTeachers(),this.getPermission(),this.sideBareService.currentSearchTerm.subscribe(e=>{this.searchTerm=e,this.filterTeachers()})}filterTeachers(){return this.searchTerm?this.profilesItem=this.profiles.filter(e=>e.teachers.nom.toLowerCase().includes(this.searchTerm.toLowerCase())||e.teachers.prenom.toLowerCase().includes(this.searchTerm.toLowerCase())||e.filieres.some(i=>this.abbreviateFiliereName(i.nomFiliere).toLowerCase().includes(this.searchTerm.toLowerCase()))):this.profilesItem=this.profiles}toggle_toEdit(e){let i={queryParams:{id:e}};this.permission?this.root.navigate(["/der/t-edit"],i):this.root.navigate(["/sidebar/t-edit"],i)}loadTeachers(){this.enseignantService.getTeachers(this.page,this.size).subscribe(e=>{e.content.forEach(i=>{this.enseignants.some(t=>t.idEnseignant===i.teachers.idEnseignant)||(this.enseignants.push(i.teachers),this.profiles.push(i))}),this.teachersPage=e,console.log(this.teachersPage,"teacher"),this.profilesItem=this.profiles,this.pages=Array.from({length:e.totalPages},(i,t)=>t),console.log(this.pages,"pages")})}setPage(e){e>=0&&e<this.teachersPage.totalPages&&(this.page=e,this.loadTeachers())}nextPage(){this.page<this.teachersPage.totalPages-1&&this.setPage(this.page+1)}previousPage(){this.page>0&&this.setPage(this.page-1)}timeWorks(){this.searchTerm="",this.getPermission()?this.root.navigate(["/sidebar/paiement"]):this.root.navigate(["/der/paiement"])}addTeacher(){this.root.navigate(["/der/t-singin"])}abbreviateFiliereName(e){return e.split(" ").filter(l=>l.length>3).map(l=>l[0].toUpperCase()).join("")}getVisiblePages(){let e=[],i=this.teachersPage.totalPages,t=Math.max(0,this.page-1),l=Math.min(i-1,this.page+1);for(let _=t;_<=l;_++)e.push(_);return e}getPermission(){let e=fe()?.der;return this.admin=e,e?(this.permission=!0,!0):!1}static{this.\u0275fac=function(i){return new(i||n)(u(O),u(ie),u(U),u(k))}}static{this.\u0275cmp=P({type:n,selectors:[["app-enseignant"]],decls:32,vars:6,consts:[["noResults",""],[1,"btn-containere"],[1,"right"],["type","button",3,"click",4,"ngIf"],[1,"input-search"],["type","text","placeholder","Recherche...",1,"search-input",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table","table-hover"],[4,"ngIf","ngIfElse"],["class","pagination",4,"ngIf"],["type","button",3,"click"],[3,"icon"],[4,"ngFor","ngForOf"],[1,"numerotation-clumn"],[1,"span"],[1,"btn-contenaire"],[3,"click"],["colspan","9",1,"text-center"],[1,"pagination"],[3,"click","disabled"],[3,"active","click",4,"ngFor","ngForOf"]],template:function(i,t){if(i&1){let l=C();r(0,"main")(1,"div",1)(2,"div",2),d(3,Fe,3,1,"button",3)(4,Ve,3,1,"button",3),o(),r(5,"div",4)(6,"input",5),ee("ngModelChange",function(x){return v(l),Z(t.searchTerm,x)||(t.searchTerm=x),b(x)}),o()()(),r(7,"div",6)(8,"table",7)(9,"thead")(10,"tr")(11,"th"),a(12,"N\xB0"),o(),r(13,"th"),a(14,"Nom"),o(),r(15,"th"),a(16,"Prenom"),o(),r(17,"th"),a(18,"Email"),o(),r(19,"th"),a(20,"Telephone"),o(),r(21,"th"),a(22,"Status"),o(),r(23,"th"),a(24,"Sp\xE9cialit\xE9 "),o(),r(25,"th"),a(26,"Action"),o()()(),r(27,"tbody"),d(28,De,2,1,"ng-container",8)(29,je,3,0,"ng-template",null,0,j),o()()(),d(31,Ae,6,5,"div",9),o()}if(i&2){let l=D(30);s(3),c("ngIf",t.permission),s(),c("ngIf",t.permission),s(2),Q("ngModel",t.searchTerm),s(22),c("ngIf",t.filterTeachers().length)("ngIfElse",l),s(3),c("ngIf",t.enseignants.length!==0)}},dependencies:[w,T,R,A,re,M],styles:["main[_ngcontent-%COMP%]{width:100%;padding-top:10px;height:80vh}.table-container[_ngcontent-%COMP%]{height:82%;position:relative;overflow-y:auto}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#fff;position:sticky;top:0;z-index:1}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff;border-radius:10px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--tertiary);border-radius:10px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--primary)}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:20px}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px;font-size:12px;background-color:transparent;color:var(--secondary);cursor:pointer;border:1px solid var(--secondary);border-radius:50%}.pagination[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.disabled):not(.active){background-color:var(--secondary);color:var(--primary)}.numerotation-clumn[_ngcontent-%COMP%]{width:auto;min-width:30px;text-align:center}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-containere[_ngcontent-%COMP%]{margin:10px;display:flex;justify-content:space-between}.btn-contenaire[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100px;display:flex;justify-content:center;align-items:center;cursor:pointer;font-size:12px;color:var(--primary);padding:4px 10px;border:1px solid var(--primary);border-radius:5px}.btn-contenaire[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary);border-color:var(--secondary)}td[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{font-size:13px;letter-spacing:1px;font-weight:800;color:var(--primary)}.class-name[_ngcontent-%COMP%]{cursor:pointer}li[_ngcontent-%COMP%]{list-style-type:none;padding:8px;border:#ccc 1px solid;margin-top:8px}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;color:var(--primary)}.classe[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:800}.btn-add[_ngcontent-%COMP%]{margin-bottom:10px;padding:8px;background-color:var(--primary);color:var(--secondary)}.btn-add[_ngcontent-%COMP%]:hover{color:var(--primary);background-color:var(--secondary)}.modal-header[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary)}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}.info-container[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-end}.column-2[_ngcontent-%COMP%]{flex:1}.btn-containere[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:20px;margin-bottom:10px;font-size:14px;padding:5px;background-color:var(--primary);color:var(--secondary);border:none;border-radius:4px;cursor:pointer;height:30px;width:auto}.btn-containere[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transition:background-color .3s ease;color:var(--primary);background-color:var(--secondary)}"]})}}return n})();var W=function(n){return n.PEMANENT="Vacataire",n.PRINCIPAL="Permanent",n}(W||{}),I=function(n){return n.L1="Licence 1",n.L2="Licence 2",n.M1="Master 1",n.M2="Master 2",n.Doctorat="Doctorat",n}(I||{});var F=()=>({color:"red"}),we=n=>({display:n});function ze(n,m){n&1&&(r(0,"span",30),a(1," Champ obligatoire* "),o()),n&2&&c("ngStyle",S(1,F))}function Be(n,m){n&1&&(r(0,"span",30),a(1," Champ obligatoire* "),o()),n&2&&c("ngStyle",S(1,F))}function Ue(n,m){n&1&&(r(0,"span",30),a(1," Champ bligatoire* "),o()),n&2&&c("ngStyle",S(1,F))}function He(n,m){n&1&&(r(0,"span",30),a(1," Champ obligatoire* "),o()),n&2&&c("ngStyle",S(1,F))}function qe(n,m){n&1&&(r(0,"span",30),a(1," Maximum 8 chiffres autoris\xE9s* "),o()),n&2&&c("ngStyle",S(1,F))}function $e(n,m){if(n&1&&(r(0,"option",31),a(1),o()),n&2){let e=m.$implicit,i=p();c("ngStyle",H(3,we,i.isEdit?"block":"none"))("value",e),s(),h(e)}}function We(n,m){if(n&1&&(r(0,"option",31),a(1),o()),n&2){let e=m.$implicit,i=p();c("ngStyle",H(3,we,i.isEdit?"block":"none"))("value",e.key),s(),h(e.value)}}function Ge(n,m){n&1&&(r(0,"span",30),a(1," Champ obligatoire* "),o()),n&2&&c("ngStyle",S(1,F))}function Ye(n,m){if(n&1){let e=C();r(0,"button",32),f("click",function(){v(e);let t=p();return b(t.sunmit())}),a(1,"Enregistrer"),o()}}function Xe(n,m){if(n&1){let e=C();r(0,"button",32),f("click",function(){v(e);let t=p();return b(t.toggle_toChageEdit())}),a(1,"Modifier"),o()}}var ct=(()=>{class n{constructor(e,i,t,l,_,x){this.enseignantService=e,this.root=i,this.pageTitle=t,this.icons=l,this.fb=_,this.setService=x,this.passwordVisible=!1,this.ueList=[],this.isEdit=!1,this.isUpdate=!1,this.teacherDiplomOptions=[]}ngOnInit(){this.load_update_form(),this.getTeacher(),this.load_ues(),this.getStatusOptions()}load_update_form(){this.teacher_form=this.fb.group({idEnseignant:["",q.required],nom:[""],prenom:[""],email:[""],sexe:[""],password:[""],telephone:[""],urlPhoto:[""],idUe:[""],diplome:[""],status:["",q.required]})}load_ues(){this.setService.getAll_ue_all().subscribe(e=>{this.ueList=e})}getStatusOptions(){Object.keys(I).map(i=>({key:i,value:I[i]})).forEach(i=>{i.value!=I.L1&&i.value!=I.L2&&this.teacherDiplomOptions.push(i)})}getTeacher(){this.teacherStatusOptions=Object.values(W),this.root.queryParams.subscribe(e=>{this.idEnseignant=+e.id,console.log(this.idEnseignant,"id----"),this.enseignantService.getTeacher_by_id(this.idEnseignant).subscribe({next:i=>{this.enseignant=i,console.log(this.enseignant,"ense"),this.teacher_form.get("nom")?.setValue(this.enseignant.nom),this.teacher_form.get("idEnseignant")?.setValue(this.enseignant.idEnseignant),this.teacher_form.get("prenom")?.setValue(this.enseignant.prenom),this.teacher_form.get("email")?.setValue(this.enseignant.email),this.teacher_form.get("sexe")?.setValue(this.enseignant.sexe),this.teacher_form.get("telephone")?.setValue(this.enseignant.telephone)},error:i=>{this.pageTitle.showErrorToast(i.error.message)}})})}onFileSelected(e){this.fileName=e.target.files[0]}onPhotoSelected(e){console.log(this.fileName,"fill"),this.photoSelect=e.target.files[0];let i=new FileReader;i.onload=t=>{this.urlImage=t.target.result},i.readAsDataURL(this.photoSelect)}update_enseignant(){if(this.isUpdate){let e=this.teacher_form.value;console.log(e,"fomData");let i=this.ueList.find(l=>l.id==e.idUe),t={idEnseignant:e.idEnseignant,nom:e.nom,prenom:e.prenom,email:e.email,sexe:e.sexe,telephone:e.telephone,status:e.status,diplome:e.diplome};console.log(t,"enseign"),this.enseignantService.updateTeacher(t).subscribe({next:l=>{this.pageTitle.showSuccessToast(l.message),this.teacher_form.reset(),this.load_update_form(),this.getTeacher()},error:l=>{this.pageTitle.showErrorToast(l.error.message)}})}}sunmit(){this.isUpdate=!0,this.update_enseignant()}goBack(){window.history.back()}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}toggle_toChageEdit(){this.isEdit=!this.isEdit}static{this.\u0275fac=function(i){return new(i||n)(u(k),u(ne),u(ve),u(O),u(de),u(_e))}}static{this.\u0275cmp=P({type:n,selectors:[["app-teachers-edit"]],decls:59,vars:27,consts:[[1,"back-button",3,"click"],[3,"icon"],["id","formProf",3,"ngSubmit","formGroup"],[1,"form-add"],[1,"column-f"],[1,"input"],["for","validationDefault01",1,"label","form-label"],["type","text","formControlName","nom","id","nom","placeholder","Nom....",1,"input-with","form-control"],[3,"ngStyle",4,"ngIf"],["for","validationDefault02",1,"label","form-label"],["type","text","formControlName","prenom","id","prenom","placeholder","Prenom....",1,"input-with","form-control"],[1,"label","form-label"],["type","email","formControlName","email","placeholder","Email...",1,"input-with","form-control"],["for","telephone",1,"label","form-label"],["type","text","formControlName","telephone","placeholder","Numero de telephone....",1,"form-control"],[1,"form","form-group"],["formControlName","status","placeholder","Status","required","",1,"form-select"],["disabled","","value",""],[3,"ngStyle","value",4,"ngFor","ngForOf"],[1,"radio"],["for",""],[1,"radio-content"],[1,"form-check","form-check-inline"],["type","radio","formControlName","sexe","id","inlineRadio1","value","Homme","required","",1,"form-check-input"],["for","inlineRadio1",1,"form-check-label"],["type","radio","formControlName","sexe","id","inlineRadio2","value","Femme","required","",1,"form-check-input"],["for","inlineRadio2",1,"form-check-label"],["formControlName","diplome",1,"form-select"],["selected","","disabled","","value",""],[1,"col-12"],[3,"ngStyle"],[3,"ngStyle","value"],[3,"click"]],template:function(i,t){i&1&&(r(0,"main")(1,"div",0),f("click",function(){return t.goBack()}),g(2,"fa-icon",1),o(),r(3,"form",2),f("ngSubmit",function(){return t.update_enseignant()}),r(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),a(8,"Nom :"),o(),g(9,"input",7),d(10,ze,2,2,"span",8),o(),r(11,"div",5)(12,"label",9),a(13,"Prenom :"),o(),g(14,"input",10),d(15,Be,2,2,"span",8),o(),r(16,"div",5)(17,"label",11),a(18,"Email :"),o(),g(19,"input",12),d(20,Ue,2,2,"span",8),o()(),r(21,"div",4)(22,"div",5)(23,"label",13),a(24,"T\xE9l\xE9phone :"),o(),g(25,"input",14),d(26,He,2,2,"span",8)(27,qe,2,2,"span",8),o(),r(28,"div",15)(29,"label",11),a(30,"Status : "),o(),r(31,"select",16)(32,"option",17),a(33),o(),d(34,$e,2,5,"option",18),o()(),r(35,"div",19)(36,"label",20),a(37,"Choisir le sexe :"),o(),r(38,"div",21)(39,"div",22),g(40,"input",23),r(41,"label",24),a(42,"Homme"),o()(),r(43,"div",22),g(44,"input",25),r(45,"label",26),a(46,"Femme"),o()()()()(),r(47,"div",4)(48,"div",15)(49,"label",11),a(50,"Diplomes : "),o(),r(51,"select",27)(52,"option",28),a(53),o(),d(54,We,2,5,"option",18),o(),d(55,Ge,2,2,"span",8),o()()(),r(56,"div",29),d(57,Ye,2,0,"button")(58,Xe,2,0,"button"),o()()()),i&2&&(s(2),c("icon",t.icons.back),s(),c("formGroup",t.teacher_form),s(6),y("is-invalid",t.teacher_form.get("nom").invalid&&t.teacher_form.get("nom").touched),E("readonly",t.isEdit?null:!0),s(),c("ngIf",t.teacher_form.controls.nom.invalid&&t.teacher_form.controls.nom.touched),s(4),y("is-invalid",t.teacher_form.get("prenom").invalid&&t.teacher_form.get("prenom").touched),E("readonly",t.isEdit?null:!0),s(),c("ngIf",t.teacher_form.controls.prenom.invalid&&t.teacher_form.controls.prenom.touched),s(4),y("is-invalid",t.teacher_form.get("email").invalid&&t.teacher_form.get("email").touched),E("readonly",t.isEdit?null:!0),s(),c("ngIf",t.teacher_form.controls.email.invalid&&t.teacher_form.controls.email.touched),s(5),E("readonly",t.isEdit?null:!0),s(),c("ngIf",t.teacher_form.controls.telephone.hasError("required")&&t.teacher_form.controls.telephone.touched),s(),c("ngIf",t.teacher_form.controls.telephone.hasError("pattern")&&!t.teacher_form.controls.telephone.hasError("required")),s(6),h(t.enseignant==null?null:t.enseignant.status),s(),c("ngForOf",t.teacherStatusOptions),s(6),E("readonly",t.isEdit?null:!0),s(4),E("readonly",t.isEdit?null:!0),s(7),y("is-invalid",t.teacher_form.get("diplome").invalid&&t.teacher_form.get("diplome").touched),s(2),h(t.enseignant==null?null:t.enseignant.diplome),s(),c("ngForOf",t.teacherDiplomOptions),s(),c("ngIf",t.teacher_form.controls.diplome.invalid&&t.teacher_form.controls.diplome.touched),s(2),G(t.isEdit?57:58))},dependencies:[w,T,te,ae,z,B,R,me,se,A,oe,pe,le,ce,M],styles:["main[_ngcontent-%COMP%]{width:100%;padding:10px}form[_ngcontent-%COMP%]{padding:10px}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}strong[_ngcontent-%COMP%]{font-size:12px;color:var(--tertiary)}.form-add[_ngcontent-%COMP%]{display:flex;gap:50px}label[_ngcontent-%COMP%]{font-weight:700}.radio[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.radio[_ngcontent-%COMP%]   .radio-content[_ngcontent-%COMP%]{display:flex;width:100%;padding-left:8px;align-items:center}.column-f[_ngcontent-%COMP%]{width:40%;display:flex;flex-direction:column;gap:30px}button[_ngcontent-%COMP%]{margin-top:10px;background-color:var(--primary);color:var(--secondary);border:var(--primary);padding:8px 20px;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px var(--primary)}"]})}}return n})();var Te=Oe(Me());function Je(n,m){if(n&1&&(r(0,"option",14),a(1),o()),n&2){let e=m.$implicit;K("value",e.value),s(),h(e.name.toUpperCase())}}function Ke(n,m){if(n&1&&(V(0),r(1,"tr")(2,"td"),a(3),o(),r(4,"td"),a(5),o(),r(6,"td"),a(7),o(),r(8,"td"),a(9),o(),r(10,"td"),a(11),o(),g(12,"td"),o(),N()),n&2){let e=m.$implicit,i=p(2);s(3),h(i.month.toUpperCase()),s(2),h(e.nom),s(2),h(e.prenom),s(2),L("",e.nbreHeures," Heures"),s(2),h(e.montanFormat)}}function Qe(n,m){if(n&1&&(V(0),d(1,Ke,13,5,"ng-container",15),N()),n&2){let e=p();s(),c("ngForOf",e.filteredPaie())}}function Ze(n,m){n&1&&(r(0,"tr")(1,"td",16),a(2,"Aucun r\xE9sultat trouv\xE9"),o()())}var gt=(()=>{class n{constructor(e,i,t){this.teacherService=e,this.icons=i,this.sideBarService=t,this.searchTerm="",this.month="",this.filteredPai=[],this.paies=[],this.months=[]}ngOnInit(){this.getAllPaie(),this.sideBarService.currentSearchTerm.subscribe(e=>{this.searchTerm=e,this.filteredPaie(),this.initializeMonths()})}getAllPaie(){this.teacherService.getAllPaie().subscribe(e=>{console.log("resultat : ",e),e.forEach(i=>{if(!this.paies.some(t=>t.idTeacher==i.idTeacher)){i.montant=i.coutHeure*i.nbreHeures;let t=Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"});i.montanFormat=t.format(i.montant);let l=new Date(i.date);this.month=l.toLocaleString("fr-FR",{month:"long"}),this.paies.push(i)}}),console.log(this.paies,"paie--------------------------")})}filteredPaie(){return this.searchTerm?this.filteredPai=this.paies.filter(e=>e.nom.toLowerCase().includes(this.searchTerm.toLowerCase())||e.prenom.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredPai=this.paies}goBack(){this.searchTerm="",window.history.back()}imprimer(){var e=document.getElementById("idTable");e&&(e.style.padding="50px"),(0,Te.default)(e,{scale:2}).then(i=>{let t=297,l=i.height*t/i.width,_=i.toDataURL("image/png"),x=new be("l","mm","a4");x.addImage(_,"PNG",0,0,t,l),x.save("programme-de-soutenace.pdf"),e.style.padding="0px"})}checkMonth(e){let i=e.target.value;this.paies=[],this.teacherService.getAllPaieByMonth(i).subscribe(t=>{t.forEach(l=>{if(!this.paies.some(_=>_.idTeacher==l.idTeacher)){l.montant=l.coutHeure*l.nbreHeures;let _=Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"});l.montanFormat=_.format(l.montant);let x=new Date(l.date);this.month=x.toLocaleString("fr-FR",{month:"long"}),this.paies.push(l)}}),this.filteredPai=this.paies})}initializeMonths(){for(let e=0;e<12;e++){let i=new Intl.DateTimeFormat("fr-FR",{month:"long"}).format(new Date(2023,e));this.months.push({value:e+1,name:i})}}abrevigateName(e){return e.split(" ").filter(l=>l.length>3).map(l=>l[0].toUpperCase()).join("")}static{this.\u0275fac=function(i){return new(i||n)(u(k),u(O),u(U))}}static{this.\u0275cmp=P({type:n,selectors:[["app-der-pai-list"]],decls:33,vars:4,consts:[["notFund",""],[1,"back-button",3,"click"],[3,"icon"],[1,"head-content"],[1,"btn-contente"],[3,"click"],[3,"change"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"logo"],["src","assets/logounivsegou.png","alt",""],["id","idTable",1,"table-container"],[1,"table","table-bordered"],[4,"ngIf","ngIfElse"],[3,"value"],[4,"ngFor","ngForOf"],["colspan","9",1,"text-center"]],template:function(i,t){if(i&1){let l=C();r(0,"main")(1,"div",1),f("click",function(){return v(l),b(t.goBack())}),g(2,"fa-icon",2),o(),r(3,"div",3)(4,"div",4)(5,"button",5),f("click",function(){return v(l),b(t.imprimer())}),a(6,"Imprimer"),o(),r(7,"select",6),f("change",function(x){return v(l),b(t.checkMonth(x))}),r(8,"option",7),a(9,"Archives"),o(),d(10,Je,2,2,"option",8),o()(),r(11,"div",9),g(12,"img",10),o()(),r(13,"div",11)(14,"table",12)(15,"thead")(16,"tr")(17,"th"),a(18,"Mois"),o(),r(19,"th"),a(20,"Nom"),o(),r(21,"th"),a(22,"Prenom"),o(),r(23,"th"),a(24,"Heures/Sv"),o(),r(25,"th"),a(26,"Montant"),o(),r(27,"th"),a(28,"Emergement"),o()()(),r(29,"tbody"),d(30,Qe,2,1,"ng-container",13)(31,Ze,3,0,"ng-template",null,0,j),o()()()()}if(i&2){let l=D(32);s(2),c("icon",t.icons.back),s(8),c("ngForOf",t.months),s(20),c("ngIf",t.paies.length)("ngIfElse",l)}},dependencies:[w,T,z,B,M],styles:["main[_ngcontent-%COMP%]{box-shadow:0 4px 8px #00000026;padding:10px;transition:box-shadow .3s ease-in-out,padding .3s ease-in-out;transform:translateY(20px)}.head-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;margin-bottom:10px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:auto}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;padding:8px;font-size:20px}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}button[_ngcontent-%COMP%]{border:none;padding:5px;background-color:transparent;cursor:pointer;color:var(--primary);border-radius:5px}button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary);transition:background-color .2s ease-in-out}select[_ngcontent-%COMP%]{border:none;font-size:14px}select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}"],data:{animation:[ge("zoom",[ue(":enter",[$({opacity:0,transform:"translateY(20px)"}),he("0.5s ease-out",$({opacity:1,transform:"translateY(0)"}))])])]}})}}return n})();export{nt as a,W as b,I as c,ct as d,gt as e};
