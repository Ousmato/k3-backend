import{a as X}from"./chunk-4EK2Q4LD.js";import{b as ct,c as De}from"./chunk-B3N235ZQ.js";import{a as Pe}from"./chunk-DMQKSSUW.js";import{a as rt}from"./chunk-H62L7NGY.js";import{a as Y,b as Te,c as Re}from"./chunk-MMUNQ446.js";import{a as lt}from"./chunk-YPOCFZ2S.js";import{a as ve,d as st}from"./chunk-UJYHWII2.js";import{$ as ne,A as g,Aa as Ke,Ab as U,Ba as _e,Bb as Me,C as c,Ca as Ze,Cb as Q,D as P,Da as et,Db as G,E as xe,F as de,Fa as T,G as pe,Ga as S,H as me,Ha as D,I as r,Ia as L,J as n,K as u,L as N,M as A,Ma as re,N as y,Na as R,O as _,Oa as fe,P as h,Pa as tt,Q as w,Qa as B,Ra as it,Sa as nt,T as ue,Ta as z,U as l,Ua as ae,V as x,Va as $,W as C,Wa as W,X as j,Xa as ye,Y as ke,Ya as ot,Z as te,Za as q,_ as ie,ba as k,c as We,ca as Be,cb as ze,e as Ie,f as He,fa as ge,h as Je,i as Ye,la as Le,ma as V,na as I,o as M,oa as he,pa as Qe,qb as O,r as v,rb as at,s as b,t as Se,ub as J,vb as F,w as Ge,x as a,y as m,ya as Xe,za as oe,zb as Ee}from"./chunk-Q3UIBATL.js";import{a as vt}from"./chunk-W3N7LORT.js";import{f as ft}from"./chunk-OXVY4BEJ.js";function bt(o,d){if(o&1){let e=y();N(0),r(1,"div",28)(2,"h3",29),l(3,"Confirmation"),n(),r(4,"div",30)(5,"p"),l(6,"\xCAtes-vous s\xFBr de vouloir vous d\xE9connectez ?"),n(),r(7,"div",31)(8,"img",22),_("error",function(t){v(e);let s=h();return b(s.onError(t))}),n(),r(9,"div",32)(10,"p"),l(11),n(),r(12,"p",24),l(13),n()()(),r(14,"div",33)(15,"a",34),_("click",function(){v(e);let t=h();return b(t.close())}),l(16,"Annuler"),n(),r(17,"button",34),_("click",function(){v(e);let t=h();return b(t.auth.logout())}),l(18,"Confirmer"),n()()()(),A()}if(o&2){let e=h();a(8),c("src",e.dataAdmin.urlPhoto,Ge),a(3),j("",e.dataAdmin.nom," ",e.dataAdmin.prenom,""),a(2),x(e.dataAdmin.role.toUpperCase())}}function xt(o,d){o&1&&u(0,"div",35)}var kn=(()=>{class o{toggleSubMenuEnseignant(){this.isSubMenuOpen.enseignants=!this.isSubMenuOpen.enseignants,this.isSubMenuOpen.etudiants=!1}toggleSubMenuStudent(){this.isSubMenuOpen.etudiants=!this.isSubMenuOpen.etudiants,this.isSubMenuOpen.enseignants=!1}toggleSubMenuArchive(){this.isSubMenuOpen.archive=!this.isSubMenuOpen.archive}toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed;let e=document.getElementById("sidebar");this.isSidebarCollapsed?e.classList.add("active"):e.classList.remove("active")}constructor(e,i,t,s,p,f){this.auth=e,this.schoolService=i,this.sidebarService=t,this.router=s,this.icons=p,this.route=f,this.isSidebarCollapsed=!1,this.isSubmenuCollapsed=!1,this.desable_add_button=!0,this.showSearchInput=!1,this.isConfirm=!1,this.urlLogo="",this.show_admin=!1,this.show_add_form=!1,this.searchTerm="",this.isSubMenuOpen={enseignants:!1,etudiants:!1,archive:!1},this.isSubMenuVisible=!1}ngOnInit(){this.urlLogo=ze.assetUrlLogo,this.router.events.pipe(We(e=>e instanceof Xe)).subscribe(()=>{this.setTitle()}),this.setTitle(),this.load_school_info(),this.load_admin()}setTitle(){let e=this.route.firstChild;for(;e?.firstChild;)e=e.firstChild;this.title=e?.snapshot.data.title||"",console.log(this.title,"le titre")}load_school_info(){this.schoolService.getSchools().subscribe(e=>{this.school=e})}load_admin(){this.dataAdmin=Q()?.der,this.dataAdmin.urlPhoto=`${ze.urlPhoto}${this.dataAdmin.urlPhoto}`}onSearchChange(){this.sidebarService.changeSearchTerm(this.searchTerm)}onError(e){let i=e.target;i.src="assets/business-professional-icon.svg"}show_confirm(){this.isConfirm=!0}close(){this.isConfirm=!1}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe()}toAccunt(){this.router.navigate(["/der/my-accunt"],{queryParams:{id:this.dataAdmin.idAdministra}})}static{this.\u0275fac=function(i){return new(i||o)(m(rt),m(Ee),m(J),m(_e),m(O),m(oe))}}static{this.\u0275cmp=M({type:o,selectors:[["app-der-sidebar"]],decls:68,vars:17,consts:[[1,"wrapper"],["id","sidebar"],[1,"sidebar-header"],["alt","",3,"src"],[1,"side-child"],[1,"list-unstyled","components"],[1,"menu-link"],["routerLink","/der"],[3,"icon"],["routerLink","/der/salles","routerLinkActive","active"],[3,"click"],["routerLink","/der/enseignants","routerLinkActive","active"],["routerLink","/der/emplois-du-temps","routerLinkActive","active"],["routerLink","/der/doc","routerLinkActive","active"],["id","components"],["routerLink","/der/my-accunt","routerLinkActive","active",3,"click"],["id","content"],[1,"nav-content"],[1,"btn-contenair"],["type","button",1,"btn","btn-info",3,"click"],[1,"title-page"],[1,"item-image"],["alt","",3,"error","src"],[1,"name-content"],[1,"text-muted","small"],["id","layoutSidenav_content"],[4,"ngIf"],["class","overlay",4,"ngIf"],[1,"views"],[1,"span"],[1,"container-views"],[1,"profil"],[1,"info-pofil"],[1,"button-cash"],["type","button",3,"click"],[1,"overlay"]],template:function(i,t){i&1&&(r(0,"main")(1,"div",0)(2,"nav",1)(3,"div",2),u(4,"img",3),r(5,"strong"),l(6),n()(),r(7,"div",4)(8,"ul",5)(9,"div")(10,"li",6)(11,"a",7)(12,"span"),u(13,"fa-icon",8),l(14,"Acceuil"),n()()()(),r(15,"li",6)(16,"a",9)(17,"span"),u(18,"fa-icon",8),l(19,"Salles"),n()()(),r(20,"li",6)(21,"div",10),_("click",function(){return t.toggleSubMenuEnseignant()}),r(22,"a",11)(23,"span"),u(24,"fa-icon",8),l(25,"Enseignants"),n()()()(),r(26,"li",6)(27,"a",12)(28,"span"),u(29,"fa-icon",8),l(30," Programmer EDT"),n()()(),r(31,"li",6)(32,"a",13)(33,"span"),u(34,"fa-icon",8),l(35,"Rapport et Memoire"),n()()()()(),r(36,"ul",14)(37,"li",6)(38,"a",15),_("click",function(){return t.toAccunt()}),r(39,"span"),u(40,"fa-icon",8),l(41,"Mon Compte"),n()()(),r(42,"li",6)(43,"a",10),_("click",function(){return t.show_confirm()}),r(44,"span"),u(45,"fa-icon",8),l(46,"D\xE9connexion"),n()()()()(),r(47,"div",16)(48,"div",17)(49,"div",18)(50,"button",19),_("click",function(){return t.toggleSidebar()}),u(51,"fa-icon",8),n(),r(52,"h6"),l(53),n()(),u(54,"div",20),r(55,"div",21)(56,"img",22),_("error",function(p){return t.onError(p)}),n(),r(57,"div",23)(58,"span"),l(59),n(),r(60,"span",24),l(61),n()()()(),r(62,"div",25)(63,"main")(64,"div"),u(65,"router-outlet"),n()()()()(),g(66,bt,19,4,"ng-container",26)(67,xt,1,0,"div",27),n()),i&2&&(a(4),w("src",t.urlLogo,Ge),a(2),x(t.school==null?null:t.school.nomSchool),a(7),c("icon",t.icons.home),a(5),c("icon",t.icons.scool),a(6),c("icon",t.icons.users),a(5),c("icon",t.icons.calandarPlus),a(5),c("icon",t.icons.archive),a(6),c("icon",t.icons.user),a(5),c("icon",t.icons.aout),a(6),c("icon",t.icons.menu),a(2),x(t.title.toUpperCase()),a(3),c("src",t.dataAdmin.urlPhoto,Ge),a(3),j("",t.dataAdmin.nom.charAt(0).toUpperCase(),". ",t.dataAdmin.prenom.toUpperCase(),""),a(2),x(t.dataAdmin.role.toUpperCase()),a(5),c("ngIf",t.isConfirm),a(),c("ngIf",t.isConfirm))},dependencies:[I,Ke,Ze,et,F],styles:["main[_ngcontent-%COMP%]{height:80vh}.container-views[_ngcontent-%COMP%]{padding:10px}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);background-color:var(--primary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}p[_ngcontent-%COMP%]{margin:0}.views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;width:260px;bottom:20px;padding:0;border-radius:4px;z-index:10004;box-shadow:0 4px 8px #00000026}.views[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary);font-size:14px;padding:10px;width:100%;text-align:center;border-top-left-radius:4px;border-top-right-radius:4px}.profil[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:60px;border:1px solid var(--tertiary);border-radius:50%;object-fit:cover}.profil[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:flex-start;gap:10px}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:10002}"]})}}return o})();var Dn=(()=>{class o{constructor(e,i,t,s,p,f){this.icons=e,this.emploisService=i,this.studentService=t,this.router=s,this.enseignantService=p,this.salleService=f,this.teacherCount=0,this.studentNumber_noInscrit=0,this.salle=0,this.memoire=0,this.rapport=0,this.salleOccuper=0,this.emplois=[]}ngOnInit(){this.load_cunt(),this.salleNumber(),this.load_all_emplois_actif(),this.docNumber()}load_all_emplois_actif(){this.emploisService.getAllEmploisActifs().subscribe(e=>{this.emplois=e,this.emploiCount=e.length})}load_cunt(){this.enseignantService.countTeacherNumber().subscribe(e=>{this.teacherCount=e})}toggle_doc(){this.router.navigate(["/der/doc"])}toggle_enseignant(){this.router.navigate(["/der/enseignants"])}toggle_toEmploi(){this.router.navigate(["/der/emplois-du-temps"])}toggle_class(){this.router.navigate(["/der/salles"])}salleNumber(){this.salleService.getNombreSalleOccupe().subscribe(e=>{this.salleOccuper=e}),this.salleService.getNombreSalleNonOccupe().subscribe(e=>{this.salle=e})}docNumber(){this.studentService.getMemoireNumber().subscribe(e=>{this.memoire=e}),this.studentService.getRapportNumber().subscribe(e=>{this.rapport=e})}static{this.\u0275fac=function(i){return new(i||o)(m(O),m(ve),m(U),m(_e),m(Y),m(X))}}static{this.\u0275cmp=M({type:o,selectors:[["app-der-home"]],decls:45,vars:6,consts:[[1,"first-container"],[1,"head-card-content"],[1,"child-card",3,"click"],[1,"child-card-content"],[1,"card-img"],["src","assets/clients-icon.svg","alt","Logo"],[1,"card-text"],["src","assets/open-folder-outline-icon.svg","alt","Logo"],["src","assets/school-admission-icon.svg","alt","Logo"],["src","assets/booking-confirmed-icon.svg","alt","Logo"]],template:function(i,t){i&1&&(r(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),_("click",function(){return t.toggle_enseignant()}),r(4,"div",3)(5,"div",4),u(6,"img",5),n(),r(7,"div",6)(8,"p"),l(9,"Nombres d'enseignants"),n(),r(10,"h1"),l(11),n()()()(),r(12,"div",2),_("click",function(){return t.toggle_doc()}),r(13,"div",3)(14,"div",4),u(15,"img",7),n(),r(16,"div",6)(17,"p"),l(18,"Rapport et M\xE9moire"),n(),r(19,"span"),l(20),n(),u(21,"br"),r(22,"span"),l(23),n()()()(),r(24,"div",2),_("click",function(){return t.toggle_class()}),r(25,"div",3)(26,"div",4),u(27,"img",8),n(),r(28,"div",6)(29,"p"),l(30,"Salles "),n(),r(31,"span"),l(32),n(),u(33,"br"),r(34,"span"),l(35),n()()()(),r(36,"div",2),_("click",function(){return t.toggle_toEmploi()}),r(37,"div",3)(38,"div",4),u(39,"img",9),n(),r(40,"div",6)(41,"p"),l(42,"Emplois du temps actifs"),n(),r(43,"h1"),l(44),n()()()()()()()),i&2&&(a(11),x(t.teacherCount),a(9),C("Rapports : ",t.rapport,""),a(3),C("M\xE9moire: ",t.memoire,""),a(9),C("Disponible : ",t.salle,""),a(3),C("Occup\xE9 : ",t.salleOccuper,""),a(9),x(t.emploiCount))},styles:[".first-container[_ngcontent-%COMP%], .second-container[_ngcontent-%COMP%]{background-color:#fff;margin-bottom:20px;padding:10px;border-radius:8px}.head-card-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:25px;margin-bottom:20px}.child-card[_ngcontent-%COMP%]{cursor:pointer;padding:10px;flex:1;border-radius:8px;border:1px solid #ccc;box-shadow:2px 2px 2px #00000026;transition:transform .3s,box-shadow .3s}.child-card[_ngcontent-%COMP%]:hover{border:1px solid var(--primary);border-radius:8px}.child-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;gap:10px}.child-cards[_ngcontent-%COMP%]{display:flex;padding:8px;justify-content:start;gap:10px;flex:1;border:1px solid #ccc;box-shadow:2px 2px 2px #00000026;transition:transform .3s,box-shadow .3s;margin-bottom:10px}.child-card[_ngcontent-%COMP%]   .child-card-content[_ngcontent-%COMP%]{display:flex}h1[_ngcontent-%COMP%]{font-weight:700;margin:0;padding:0}p[_ngcontent-%COMP%]{font-weight:700;font-size:14px;margin:0;padding:0}.calendar-classes-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0}.sc-annuel[_ngcontent-%COMP%]{margin-top:20px;font-size:18px}.date-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:5px;font-size:14px;font-weight:500}.card-img[_ngcontent-%COMP%]{width:30%}.card-text[_ngcontent-%COMP%]{width:70%}.card-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}#cart-text[_ngcontent-%COMP%]{margin-left:20px}.card-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:5px;border-radius:8px;height:60px;width:60px}#calendar[_ngcontent-%COMP%]{height:90px;width:90px}.child-card[_ngcontent-%COMP%]:last-child{margin-right:0}.body-content[_ngcontent-%COMP%]{padding:20px;border-radius:8px;border:#ccc 1px solid}.calendar-classes-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:var(--primary) 1px solid}#span[_ngcontent-%COMP%]{color:var(--primary)}fa-icon[_ngcontent-%COMP%]{font-size:30px;color:gray}"]})}}return o})();function Ct(o,d){o&1&&(r(0,"div")(1,"span",15),l(2,"Champ obligatoire*"),n()())}function St(o,d){o&1&&(r(0,"div")(1,"span",15),l(2,"Le nom ne doit pas d\xE9passer 40 caract\xE8res."),n()())}function yt(o,d){if(o&1&&(r(0,"div",13),g(1,Ct,3,0,"div",14)(2,St,3,0,"div",14),n()),o&2){let e,i,t=h();a(),c("ngIf",(e=t.add_form.get("nom").errors)==null?null:e.required),a(),c("ngIf",(i=t.add_form.get("nom").errors)==null?null:i.maxlength)}}function Et(o,d){o&1&&(r(0,"div")(1,"span",15),l(2,"Champ obligatoire*"),n()())}function Mt(o,d){o&1&&(r(0,"div")(1,"span",15),l(2,"Nombres de places trops \xE9lev\xE9"),n()())}function Pt(o,d){if(o&1&&(r(0,"div",13),g(1,Et,3,0,"div",14)(2,Mt,3,0,"div",14),n()),o&2){let e,i,t=h();a(),c("ngIf",(e=t.add_form.get("nombrePlace").errors)==null?null:e.required),a(),c("ngIf",(i=t.add_form.get("nombrePlace").errors)==null?null:i.max)}}var pt=(()=>{class o{constructor(e,i,t,s){this.pageTitle=e,this.salleService=i,this.icons=t,this.fb=s,this.closeModal=new Se}ngOnInit(){this.load_form()}load_form(){this.add_form=this.fb.group({nom:["",[S.required,S.maxLength(40)]],nombrePlace:["",[S.required,S.max(1e3)]]})}add_salle(){let e=this.add_form.value;this.add_form.valid?this.salleService.add_salle(e).subscribe({next:i=>{this.pageTitle.showSuccessToast(i.message),this.closeModal.emit()},error:i=>{this.pageTitle.showErrorToast(i.error.message)}}):this.add_form.markAllAsTouched()}close_modal(){this.closeModal.emit()}static{this.\u0275fac=function(i){return new(i||o)(m(G),m(X),m(O),m(q))}}static{this.\u0275cmp=M({type:o,selectors:[["app-der-salles-add"]],outputs:{closeModal:"closeModal"},decls:24,vars:8,consts:[[1,"views"],[3,"ngSubmit","formGroup"],[1,"chil"],[1,"input"],["for","validationDefault01",1,"label","form-label"],["type","text","formControlName","nom","id","nom","placeholder","Nom de la salle....",1,"input-with","form-control"],["class","invalid-feedback",4,"ngIf"],["for","validationDefault02",1,"label","form-label"],["type","45","formControlName","nombrePlace","placeholder","Nombres de places....",1,"input-with","form-control"],[1,"button-cash"],[1,"submit",3,"click"],["type","submit",1,"submit"],[3,"icon"],[1,"invalid-feedback"],[4,"ngIf"],[1,"label-error"]],template:function(i,t){i&1&&(r(0,"main")(1,"div",0)(2,"h4"),l(3,"Ajouter salle de classe"),n(),r(4,"form",1),_("ngSubmit",function(){return t.add_salle()}),r(5,"div",2)(6,"div",3)(7,"label",4),l(8,"Nom :"),n(),u(9,"input",5),g(10,yt,3,2,"div",6),n(),r(11,"div",3)(12,"label",7),l(13,"Nombres des places :"),n(),u(14,"input",8),g(15,Pt,3,2,"div",6),n()(),r(16,"div",9)(17,"a",10),_("click",function(){return t.close_modal()}),r(18,"span"),l(19,"Annuler"),n()(),r(20,"button",11)(21,"span"),l(22,"Enregistrer"),n(),u(23,"fa-icon",12),n()()()()()),i&2&&(a(4),c("formGroup",t.add_form),a(5),P("is-invalid",t.add_form.get("nom").invalid&&t.add_form.get("nom").touched),a(),c("ngIf",t.add_form.get("nom").invalid&&t.add_form.get("nom").touched),a(4),P("is-invalid",t.add_form.get("nombrePlace").invalid&&t.add_form.get("nombrePlace").touched),a(),c("ngIf",t.add_form.get("nombrePlace").invalid&&t.add_form.get("nombrePlace").touched),a(8),c("icon",t.icons.nexte_circle))},dependencies:[I,R,T,D,L,B,z,F],styles:[".button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;color:var(--primary);background-color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:red;color:var(--primary)}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px var(--primary)}form[_ngcontent-%COMP%]{padding:10px}.views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;border-radius:4px;margin-top:15px;left:10px;z-index:1000;box-shadow:0 4px 8px #00000026}h4[_ngcontent-%COMP%]{border-top-left-radius:4px;border-top-right-radius:4px;background-color:var(--primary);color:var(--secondary);font-size:16px;text-align:center;padding:8px 10px}"]})}}return o})();function wt(o,d){if(o&1){let e=y();N(0),r(1,"app-der-salles-add",10),_("closeModal",function(){v(e);let t=h(2);return b(t.toggle_form_add())}),n(),A()}}function It(o,d){if(o&1){let e=y();r(0,"div",4)(1,"button",5),_("click",function(){v(e);let t=h();return b(t.toggle_form_add())}),l(2,"Ajouter salle"),n(),r(3,"div",6),g(4,wt,2,0,"ng-container",7),n(),r(5,"div",8)(6,"input",9),ne("ngModelChange",function(t){v(e);let s=h();return ie(s.searchTerm,t)||(s.searchTerm=t),b(t)}),n()()()}if(o&2){let e=h();a(4),c("ngIf",e.show_add_form),a(2),te("ngModel",e.searchTerm)}}function kt(o,d){if(o&1){let e=y();N(0),r(1,"app-der-salles-add",10),_("closeModal",function(){v(e);let t=h(2);return b(t.toggle_form_add())}),n(),A()}}function Tt(o,d){if(o&1){let e=y();r(0,"div",1)(1,"h5"),l(2," Aucun elements trouv\xE9"),n(),r(3,"button",5),_("click",function(){v(e);let t=h();return b(t.toggle_form_add())}),l(4,"Ajouter salle"),n(),r(5,"div",11),g(6,kt,2,0,"ng-container",7),n()()}if(o&2){let e=h();a(6),c("ngIf",e.show_add_form)}}function Dt(o,d){if(o&1&&(r(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17),u(4,"fa-icon",18),n(),r(5,"div",19)(6,"h2",20),l(7),n(),r(8,"p",20),l(9),n(),r(10,"span",21),l(11),n()()()()()),o&2){let e=d.$implicit,i=h(3);a(2),c("ngClass",i.isSalleOccupee(e.id)?"contour-o":"contour-d"),a(2),c("icon",i.icons.folder),a(3),C("Nom : ",e.nom,""),a(2),C("Place : ",e.nombrePlace,""),a(),c("ngClass",i.isSalleOccupee(e.id)?"occupe":"disponible"),a(),C(" ",i.isSalleOccupee(e.id)?"Occup\xE9":"Disponible"," ")}}function Ft(o,d){if(o&1&&(N(0),u(1,"h4"),r(2,"div",12),g(3,Dt,12,6,"div",13),n(),A()),o&2){let e=h(2);a(3),c("ngForOf",e.filteredSalles())}}function Nt(o,d){if(o&1&&(r(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17),u(4,"fa-icon",18),n(),r(5,"div",19)(6,"h2",20),l(7),n(),r(8,"p",20),l(9),n(),r(10,"span",21),l(11),n()()()()()),o&2){let e=d.$implicit,i=h(3);a(2),c("ngClass",i.isSalleOccupee(e.id)?"contour-o":"contour-d"),a(2),c("icon",i.icons.folder),a(3),C("Nom : ",e.nom,""),a(2),C("Place : ",e.nombrePlace,""),a(),c("ngClass",i.isSalleOccupee(e.id)?"occupe":"disponible"),a(),C(" ",i.isSalleOccupee(e.id)?"Occup\xE9":"Disponible"," ")}}function At(o,d){if(o&1&&(N(0),u(1,"h4"),r(2,"div",12),g(3,Nt,12,6,"div",13),n(),A()),o&2){let e=h(2);a(3),c("ngForOf",e.filteredSallesE2())}}function Vt(o,d){if(o&1&&(r(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17),u(4,"fa-icon",18),n(),r(5,"div",19)(6,"h2",20),l(7),n(),r(8,"p",20),l(9),n(),r(10,"span",21),l(11),n()()()()()),o&2){let e=d.$implicit,i=h(3);a(2),c("ngClass",i.isSalleOccupee(e.id)?"contour-o":"contour-d"),a(2),c("icon",i.icons.folder),a(3),C("Nom : ",e.nom,""),a(2),C("Place : ",e.nombrePlace,""),a(),c("ngClass",i.isSalleOccupee(e.id)?"occupe":"disponible"),a(),C(" ",i.isSalleOccupee(e.id)?"Occup\xE9":"Disponible"," ")}}function jt(o,d){if(o&1&&(N(0),u(1,"h4"),r(2,"div",12),g(3,Vt,12,6,"div",13),n(),A()),o&2){let e=h(2);a(3),c("ngForOf",e.filteredSallesE3())}}function Gt(o,d){if(o&1&&(r(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17),u(4,"fa-icon",18),n(),r(5,"div",19)(6,"h2",20),l(7),n(),r(8,"p",20),l(9),n(),r(10,"span",21),l(11),n()()()()()),o&2){let e=d.$implicit,i=h(3);a(2),c("ngClass",i.isSalleOccupee(e.id)?"contour-o":"contour-d"),a(2),c("icon",i.icons.folder),a(3),C("Nom : ",e.nom,""),a(2),C("Place : ",e.nombrePlace,""),a(),c("ngClass",i.isSalleOccupee(e.id)?"occupe":"disponible"),a(),C(" ",i.isSalleOccupee(e.id)?"Occup\xE9":"Disponible"," ")}}function Lt(o,d){if(o&1&&(N(0),u(1,"h4"),r(2,"div",12),g(3,Gt,12,6,"div",13),n(),A()),o&2){let e=h(2);a(3),c("ngForOf",e.filteredSallesR())}}function Rt(o,d){if(o&1&&(r(0,"div",2),g(1,Ft,4,1,"ng-container",7)(2,At,4,1,"ng-container",7)(3,jt,4,1,"ng-container",7)(4,Lt,4,1,"ng-container",7),n()),o&2){let e=h();a(),c("ngIf",e.filteredSalles().length!==0),a(),c("ngIf",e.filteredSallesE2().length!==0),a(),c("ngIf",e.filteredSallesE3().length!==0),a(),c("ngIf",e.filteredSallesR().length!==0)}}function Bt(o,d){o&1&&u(0,"div",22)}var Gn=(()=>{class o{constructor(e,i,t){this.icons=e,this.saleService=i,this.sideBarService=t,this.show_add_form=!1,this.salles=[],this.overlay=!1,this.searchTerm="",this.filteredSalle=[],this.salle_E1=[],this.salles_E2=[],this.salles_E3=[],this.amphies=[],this.salles_occuper=[]}ngOnInit(){this.load_salles(),this.get_salles_occuper(),this.sideBarService.currentSearchTerm.subscribe(e=>{this.searchTerm=e,this.filteredSalles(),this.filteredSallesE2(),this.filteredSallesE3(),this.filteredSallesR()})}load_salles(){this.saleService.getAll().subscribe(e=>{this.salles=e,e.forEach(i=>{i.nom.includes("E1")?this.salle_E1.push(i):i.nom.includes("E2")?(this.salles_E2.push(i),console.log(this.salles_E2,"salle E2")):i.nom.includes("E3")?this.salles_E3.push(i):this.amphies.push(i)})})}toggle_form_add(){this.overlay=!this.overlay,this.show_add_form=!this.show_add_form,this.salle_E1=[],this.salles_E2=[],this.salles_E3=[],this.amphies=[],this.load_salles(),this.get_salles_occuper()}get_salles_occuper(){this.saleService.getSallesOccuper().subscribe(e=>{this.salles_occuper=e,console.log(this.salles_occuper,"salle occuper")})}isSalleOccupee(e){return this.salles_occuper.some(i=>i.id===e)}refreshe(){this.load_salles()}filteredSalles(){return this.searchTerm?this.filteredSalle=this.salle_E1.filter(e=>e.nom.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredSalle=this.salle_E1}filteredSallesE2(){return this.searchTerm?this.filteredSalle=this.salles_E2.filter(e=>e.nom.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredSalle=this.salles_E2}filteredSallesE3(){return this.searchTerm?this.filteredSalle=this.salles_E3.filter(e=>e.nom.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredSalle=this.salles_E3}filteredSallesR(){return this.searchTerm?this.filteredSalle=this.amphies.filter(e=>e.nom.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredSalle=this.amphies}static{this.\u0275fac=function(i){return new(i||o)(m(O),m(X),m(J))}}static{this.\u0275cmp=M({type:o,selectors:[["app-der-salles"]],decls:5,vars:3,consts:[["class","head",4,"ngIf"],[1,"empty-content"],[1,"main-contente"],["class","overlay",4,"ngIf"],[1,"head"],[1,"btn",3,"click"],[1,"app"],[4,"ngIf"],[1,"input-search"],["type","text","placeholder","Recherche...",1,"search-input",3,"ngModelChange","ngModel"],[3,"closeModal"],[1,"add-modal"],[1,"grid-container"],["class","grid-item",4,"ngFor","ngForOf"],[1,"grid-item"],[1,"section-folder"],[1,"class-folder",3,"ngClass"],[1,"icon-folder"],[1,"icons-style",3,"icon"],[1,"info-folder"],[1,"title"],[3,"ngClass"],[1,"overlay"]],template:function(i,t){i&1&&(r(0,"main"),g(1,It,7,2,"div",0)(2,Tt,7,1,"div",1)(3,Rt,5,4,"div",2)(4,Bt,1,0,"div",3),n()),i&2&&(a(),c("ngIf",t.salles.length!==0),a(),xe(t.salles.length==0?2:3),a(2),c("ngIf",t.overlay))},dependencies:[Le,V,I,T,D,re,F,pt],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:80vh}button[_ngcontent-%COMP%]{color:var(--secondary);margin-top:20px;margin-right:10px;background-color:var(--primary);border:none}button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.class-folder[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:flex-start;align-items:center;gap:10px;border:1px solid var(--tertiary);padding:10px;border-radius:5px}.class-folder[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:800}.icons-style[_ngcontent-%COMP%]{color:#ffc400;font-size:2.7rem}.info-folder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.info-folder[_ngcontent-%COMP%]{text-align:left}.info-folder[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:flex;gap:8px;margin:0;cursor:pointer;color:var(--primary);font-size:14px}.info-folder[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--secondary);background-color:var(--primary);padding:2px;border-radius:5px;width:100px}.info-folder[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.grid-container[_ngcontent-%COMP%]{position:relative;padding:10px;margin:0 10px;background-color:var(--primo-light);border-radius:8px;display:grid;grid-template-columns:repeat(4,1fr);grid-gap:10px}.grid-item[_ngcontent-%COMP%]{background-color:#fff;text-align:center}.occupe[_ngcontent-%COMP%]{color:red}.disponible[_ngcontent-%COMP%]{font-size:12px;color:var(--primary)}h4[_ngcontent-%COMP%]{font-size:16px;font-weight:800;margin-top:20px;margin-bottom:8px;display:flex;justify-content:center;position:relative;align-items:center}.empty-content[_ngcontent-%COMP%]{font-size:16px;height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center}.add-modal[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;position:relative;right:40%;top:-40%}h4[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:136px}.main-contente[_ngcontent-%COMP%]{overflow:hidden;height:90%;overflow-y:auto}.head[_ngcontent-%COMP%]{padding:0 10px 10px;display:flex;justify-content:space-between;align-items:flex-end;background-color:#fff;position:sticky;top:0;z-index:1}.main-contente[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.main-contente[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff;border-radius:10px}.main-contente[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--tertiary);border-radius:10px}.main-contente[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--primary)}"]})}}return o})();var zt=()=>({cursor:"pointer",right:"10px",top:"50%",transform:"translateY(-50%)"}),ce=()=>({color:"red"});function qt(o,d){o&1&&(r(0,"span",39),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,ce))}function Ut(o,d){o&1&&(r(0,"span",39),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,ce))}function $t(o,d){o&1&&(r(0,"span",39),l(1," Champ bligatoire* "),n()),o&2&&c("ngStyle",k(1,ce))}function Wt(o,d){o&1&&(r(0,"span",39),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,ce))}function Ht(o,d){o&1&&(r(0,"span",39),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,ce))}function Jt(o,d){o&1&&(r(0,"span",39),l(1," Maximum 8 chiffres autoris\xE9s* "),n()),o&2&&c("ngStyle",k(1,ce))}function Yt(o,d){if(o&1&&(r(0,"option",40),l(1),n()),o&2){let e=d.$implicit;c("value",e),a(),x(e)}}function Qt(o,d){o&1&&(r(0,"span",39),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,ce))}function Xt(o,d){if(o&1&&(r(0,"option",40),l(1),n()),o&2){let e=d.$implicit;c("value",e.key),a(),x(e.value)}}function Kt(o,d){o&1&&(r(0,"span",39),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,ce))}function Zt(o,d){if(o&1&&(r(0,"option",40),l(1),n()),o&2){let e=d.$implicit;c("value",e.id),a(),x(e.nomFiliere)}}function ei(o,d){o&1&&(r(0,"span",39),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,ce))}function ti(o,d){if(o&1){let e=y();r(0,"div",41)(1,"div",18)(2,"select",42),_("change",function(t){let s=v(e).index,p=h();return b(p.onSelect(t,s+1))}),r(3,"option",20),l(4,"Choisir La sp\xE9cialit\xE9s "),n(),g(5,Zt,2,2,"option",21)(6,ei,2,2,"span",8),n()()()}if(o&2){let e=d.index,i=h();a(2),P("is-invalid",i.teacher_form.get("idFiliere"+(e+1)).invalid&&i.teacher_form.get("idFiliere"+(e+1)).touched),c("formControlName","idFiliere"+(e+1)),a(3),c("ngForOf",i.filieres),a(),c("ngIf",i.teacher_form.controls["idFiliere"+(e+1)].invalid&&i.teacher_form.controls["idFiliere"+(e+1)].touched)}}var Un=(()=>{class o{constructor(e,i,t,s,p){this.enseignantService=e,this.pageTitle=i,this.icons=t,this.fb=s,this.setService=p,this.teacherDiplomOptions=[],this.filieres=[],this.filiereNumbers=[1],this.listFilieresSelect=[],this.count=1,this.passwordVisible=!1}ngOnInit(){this.loa_teacher_form(),this.load_filieres(),this.getStatusOptions(),this.admin=Q()?.der}loa_teacher_form(){this.teacherStatusOptions=Object.values(ct),this.teacher_form=this.fb.group({nom:["",S.required],prenom:["",S.required],email:["",S.required],sexe:["",S.required],password:["",S.required],telephone:["",S.required],idFiliere1:[""],idFiliere2:[""],idFiliere3:[""],diplome:["",S.required],status:["",S.required]})}load_filieres(){this.setService.getAll_filiere().subscribe(e=>{this.filieres=e})}onFileSelected(e){this.fileName=e.target.files[0]}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}add_teacher(){let e=[];this.filiereNumbers.forEach(f=>{e.push(this.getFiliereSelectList(f))});let i=this.teacher_form.value,t={nom:i.nom,prenom:i.prenom,email:i.email,password:i.password,telephone:i.telephone,sexe:i.sexe,status:i.status,diplome:i.diplome},s={idAdmin:this.admin,teachers:t,filieres:e};if(console.log(s,"dto"),this.teacher_form.valid)if(s.filieres.length===0||s.filieres.some(E=>!E||!E.nomFiliere)){var p=document.getElementById("error");p.style.display="block";return}else this.enseignantService.create(s).subscribe({next:E=>{this.pageTitle.showSuccessToast(E.message),this.teacher_form.reset(),this.loa_teacher_form(),this.filiereNumbers=[1],this.count=1},error:E=>{this.pageTitle.showErrorToast(E.error.message)}});else this.teacher_form.markAllAsTouched(),console.log("Veuillez remplir tous les champs correctement!",this.teacher_form.value)}getStatusOptions(){Object.keys(De).map(i=>({key:i,value:De[i]})).forEach(i=>{i.value!=De.L1&&i.value!=De.L2&&this.teacherDiplomOptions.push(i)})}decrement(){this.count>1&&(this.teacher_form.get("idFiliere"+this.count)?.setValue(""),this.count--,this.filiereNumbers.splice(this.count),console.log(this.filiereNumbers,"tab ecue after"))}increment(){console.log("is cont"),this.count<=2&&(this.count++,this.filiereNumbers.push(this.count),console.log(this.filiereNumbers,"tab ecue"))}getFiliereSelectList(e){let i=this.teacher_form.get("idFiliere"+e)?.value,t=this.filieres.find(s=>s.id==i);return console.log(t,"id filiere"),t}onSelect(e,i){var t=document.getElementById("error");t.style.display="none"}goBack(){window.history.back()}static{this.\u0275fac=function(i){return new(i||o)(m(Y),m(G),m(O),m(q),m(lt))}}static{this.\u0275cmp=M({type:o,selectors:[["app-teachers-singin"]],decls:78,vars:32,consts:[[1,"back-button",3,"click"],[3,"icon"],["id","formProf",3,"ngSubmit","formGroup"],[1,"form-add"],[1,"column-f"],[1,"input"],["for","validationDefault01",1,"label","form-label"],["type","text","formControlName","nom","id","nom","placeholder","Nom....",1,"input-with","form-control"],[3,"ngStyle",4,"ngIf"],["for","validationDefault02",1,"label","form-label"],["type","text","formControlName","prenom","id","prenom","placeholder","Prenom....",1,"input-with","form-control"],[1,"label","form-label"],["type","email","formControlName","email","placeholder","Email...",1,"input-with","form-control"],[1,"pass-chec","position-relative"],["formControlName","password","id","password","placeholder","Mot de passe....",1,"form-control",3,"type"],["id","togglePassword",1,"toggle-password","position-absolute",3,"click","icon","ngStyle"],["for","telephone",1,"label","form-label"],["type","text","formControlName","telephone","pattern","[0-9]{1,8}","placeholder","Numero de telephone....",1,"form-control"],[1,"form","form-group"],["formControlName","status","id","enseignant","placeholder","Status","required","",1,"form-select"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"radio"],["for",""],[1,"radio-content"],[1,"form-check","form-check-inline"],["type","radio","formControlName","sexe","id","inlineRadio1","value","Homme","required","",1,"form-check-input"],["for","inlineRadio1",1,"form-check-label"],["type","radio","formControlName","sexe","id","inlineRadio2","value","Femme","required","",1,"form-check-input"],["for","inlineRadio2",1,"form-check-label"],["formControlName","diplome",1,"form-select"],[1,"filieres-content"],[1,"ecue-contenaire"],[1,"icons"],[1,"icons",3,"click","icon"],["id","error"],["class","filieres",4,"ngFor","ngForOf"],[1,"col-12"],["type","submit"],[3,"ngStyle"],[3,"value"],[1,"filieres"],[1,"form-select",3,"change","formControlName"]],template:function(i,t){i&1&&(r(0,"main")(1,"div",0),_("click",function(){return t.goBack()}),u(2,"fa-icon",1),n(),r(3,"form",2),_("ngSubmit",function(){return t.add_teacher()}),r(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),l(8,"Nom :"),n(),u(9,"input",7),g(10,qt,2,2,"span",8),n(),r(11,"div",5)(12,"label",9),l(13,"Prenom :"),n(),u(14,"input",10),g(15,Ut,2,2,"span",8),n(),r(16,"div",5)(17,"label",11),l(18,"Email :"),n(),u(19,"input",12),g(20,$t,2,2,"span",8),n(),r(21,"div",5)(22,"label",9),l(23,"Mot de Passe :"),n(),r(24,"div",13),u(25,"input",14),g(26,Wt,2,2,"span",8),r(27,"fa-icon",15),_("click",function(){return t.togglePasswordVisibility()}),n()()()(),r(28,"div",4)(29,"div",5)(30,"label",16),l(31,"T\xE9l\xE9phone :"),n(),u(32,"input",17),g(33,Ht,2,2,"span",8)(34,Jt,2,2,"span",8),n(),r(35,"div",18)(36,"label"),l(37,"Status :"),n(),r(38,"select",19)(39,"option",20),l(40,"Choisir Le status"),n(),g(41,Yt,2,2,"option",21),n(),g(42,Qt,2,2,"span",8),n(),r(43,"div",22)(44,"label",23),l(45,"Choisir le sexe :"),n(),r(46,"div",24)(47,"div",25),u(48,"input",26),r(49,"label",27),l(50,"Homme"),n()(),r(51,"div",25),u(52,"input",28),r(53,"label",29),l(54,"Femme"),n()()()()(),r(55,"div",4)(56,"div",18)(57,"label"),l(58,"Diplomes :"),n(),r(59,"select",30)(60,"option",20),l(61,"Choisir Le diplome"),n(),g(62,Xt,2,2,"option",21),n(),g(63,Kt,2,2,"span",8),n(),r(64,"div",31)(65,"div",32)(66,"span",33)(67,"label"),l(68,"Sp\xE9cialit\xE9s "),n(),r(69,"fa-icon",34),_("click",function(){return t.decrement()}),n(),l(70),r(71,"fa-icon",34),_("click",function(){return t.increment()}),n()()(),r(72,"span",35),l(73,"Veuillez ajouter au moins une fili\xE8re"),n(),g(74,ti,7,5,"div",36),n()()(),r(75,"div",37)(76,"button",38),l(77,"Enregistrer"),n()()()()),i&2&&(a(2),c("icon",t.icons.back),a(),c("formGroup",t.teacher_form),a(6),P("is-invalid",t.teacher_form.get("nom").invalid&&t.teacher_form.get("nom").touched),a(),c("ngIf",t.teacher_form.controls.nom.invalid&&t.teacher_form.controls.nom.touched),a(4),P("is-invalid",t.teacher_form.get("prenom").invalid&&t.teacher_form.get("prenom").touched),a(),c("ngIf",t.teacher_form.controls.prenom.invalid&&t.teacher_form.controls.prenom.touched),a(4),P("is-invalid",t.teacher_form.get("email").invalid&&t.teacher_form.get("email").touched),a(),c("ngIf",t.teacher_form.controls.email.invalid&&t.teacher_form.controls.email.touched),a(5),P("is-invalid",t.teacher_form.get("password").invalid&&t.teacher_form.get("password").touched),w("type",t.passwordVisible?"text":"password"),a(),c("ngIf",t.teacher_form.controls.password.invalid&&t.teacher_form.controls.password.touched),a(),c("icon",t.passwordVisible?t.icons.eyeSlash:t.icons.eye)("ngStyle",k(31,zt)),a(5),P("is-invalid",t.teacher_form.get("telephone").invalid&&t.teacher_form.get("telephone").touched),a(),c("ngIf",t.teacher_form.controls.telephone.hasError("required")&&t.teacher_form.controls.telephone.touched),a(),c("ngIf",t.teacher_form.controls.telephone.hasError("pattern")&&!t.teacher_form.controls.telephone.hasError("required")),a(7),c("ngForOf",t.teacherStatusOptions),a(),c("ngIf",t.teacher_form.controls.status.invalid&&t.teacher_form.controls.status.touched),a(17),P("is-invalid",t.teacher_form.get("diplome").invalid&&t.teacher_form.get("diplome").touched),a(3),c("ngForOf",t.teacherDiplomOptions),a(),c("ngIf",t.teacher_form.controls.diplome.invalid&&t.teacher_form.controls.diplome.touched),a(6),c("icon",t.icons.mimus),a(),C(" ",t.count," "),a(),c("icon",t.icons.plusCircle),a(3),c("ngForOf",t.filiereNumbers))},dependencies:[V,I,he,R,$,W,T,ae,tt,D,L,ye,ot,B,z,F],styles:["main[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]{padding:10px}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}.form-add[_ngcontent-%COMP%]{display:flex;gap:50px}label[_ngcontent-%COMP%]{margin-right:5px;font-weight:700}.radio[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.radio[_ngcontent-%COMP%]   .radio-content[_ngcontent-%COMP%]{height:50px;display:flex;width:100%;padding-left:8px;border-radius:5px;border:1px solid var(--tertiary);align-items:center}.column-f[_ngcontent-%COMP%]{width:40%;display:flex;flex-direction:column;gap:30px}button[_ngcontent-%COMP%]{margin-top:10px;background-color:var(--primary);color:var(--secondary);border:var(--primary);padding:8px 20px;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px var(--primary)}.filieres[_ngcontent-%COMP%]{margin:10px 0}fa-icon[_ngcontent-%COMP%]{color:var(--primary);cursor:pointer}#error[_ngcontent-%COMP%]{display:none;color:red;font-size:14px}"]})}}return o})();var Ue=()=>({color:"red"});function ni(o,d){if(o&1&&(r(0,"option",15),l(1),n()),o&2){let e=d.$implicit;w("value",e.id),a(),x(e.nomModule)}}function oi(o,d){o&1&&(r(0,"span",16),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,Ue))}function ri(o,d){if(o&1&&(r(0,"option",15),l(1),n()),o&2){let e=d.$implicit;w("value",e.idEnseignant),a(),j("",e.nom," ",e.prenom,"")}}function ai(o,d){o&1&&(r(0,"span",16),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,Ue))}function li(o,d){if(o&1&&(r(0,"option",15),l(1),n()),o&2){let e=d.$implicit;c("value",e.id),a(),x(e.nom)}}function si(o,d){o&1&&(r(0,"span",16),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,Ue))}var Jn=(()=>{class o{constructor(e,i,t,s,p,f,E,ee){this.emploisService=e,this.icons=i,this.enseignantService=t,this.pageTitle=s,this.fb=p,this.classService=f,this.seanceService=E,this.salleService=ee,this.list_checked=[],this.enseignants=[],this.modules=[],this.classes=[],this.salles=[],this.dates_check=[],this.isShow_add_jour=!1,this.seanceTypeOptions=[],this.datesWithDays=[],this.datesWithDaysTest=[]}ngOnInit(){this.load_form(),this.getStatusOptions(),this.load_enseignants(),this.load_classe(),this.load_salles()}load_form(){this.form_seance=this.fb.group({heureDebut:["",S.required],heureFin:["",S.required],idEmplois:[""],idSalle:["",S.required],date:[""],idModule:["",S.required],jour:[""],idClasse:["",S.required]})}load_enseignants(){this.enseignantService.getAll().subscribe(e=>{this.enseignants=e})}load_classe(){this.classService.getAllCurrentClassOfYear().subscribe(e=>{this.classes=e})}load_salles(){this.salleService.getAll().subscribe(e=>{this.salles=e})}create_seance(){let e=[],i=this.form_seance.value,t=this.modules.find(s=>s.id===+i.idModule);this.dates_check&&this.dates_check.length>0&&this.dates_check.forEach(s=>{let p={heureDebut:i.heureDebut,heureFin:i.heureFin,date:s.date,idEmplois:this.emplois,idModule:t};e.push(p)}),this.form_seance.valid?this.seanceService.create(e).subscribe({next:s=>{this.pageTitle.showSuccessToast(s.message),this.form_seance.reset(),this.load_classe(),this.load_classe(),this.load_salles(),this.load_enseignants(),this.load_form()},error:s=>{this.pageTitle.showErrorToast(s.error.message)}}):(this.form_seance.markAllAsTouched(),console.log("Le formulaire n'est pas valide",this.form_seance.value))}sortSeancesByDay(){let e=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"];this.datesWithDays.sort((i,t)=>{let s=e.indexOf(i.day),p=e.indexOf(t.day);return s-p})}onSelect(e){this.idUrl=e.target.value,this.emploisService.getEmploisByClasse2(+this.idUrl).subscribe(i=>{this.emplois=i;let t=this.emplois.dateDebut,s=this.emplois.dateFin;console.log(this.emplois,"emplois trouver"),console.log("ici c'est bon"),this.datesWithDays=this.emploisService.getDaysBetweenDates(t,s),console.log(this.datesWithDays,"dates days component"),this.datesWithDays.sort((p,f)=>new Date(p.date).getTime()-new Date(f.date).getTime()),this.sortSeancesByDay(),this.loadModulesByClass(this.idUrl),console.log("je suis la avec l'emplis ",this.emplois)}),this.datesWithDays=[]}loadModulesByClass(e){this.classService.getAllModules(e).subscribe(i=>{this.modules=i})}getSeance_date(e,i){i.length==0?this.form_seance.get("date")?.setValue(e):this.form_seance.get("date")?.setValue("")}hasChecked(e){e.length>0&&(this.dates_check=e,this.isShow_add_jour=!1)}closeModal(){this.isShow_add_jour=!1}onMention_Select(){this.isShow_add_jour=!this.isShow_add_jour}day_check(e,i){let t=this.datesWithDays.find(s=>s.date===e);this.getSeance_date(t?.date,this.list_checked),t&&(i.target.checked?this.list_checked.some(s=>s.date===e)||this.list_checked.push(t):this.list_checked=this.list_checked.filter(s=>s.date!==t.date),console.log(this.list_checked,i.target.checked?"checked":"unchecked"))}selectAll(e){e.target.checked?(this.list_checked=[...this.datesWithDays],this.getSeance_date("",this.list_checked)):this.list_checked=[],console.log(this.list_checked,e.target.checked?"tous checked":"tous unchecked")}is_checked(e){return this.list_checked.some(i=>i.date===e)}areAllChecked(){return this.list_checked.length===this.datesWithDays.length}getStatusOptions(){Object.keys(Te).map(i=>({key:i,value:Te[i]})).forEach(i=>{(i.value==Te.SESSION||i.value==Te.Examen)&&this.seanceTypeOptions.push(i)})}static{this.\u0275fac=function(i){return new(i||o)(m(ve),m(O),m(Y),m(G),m(q),m(Me),m(Re),m(X))}}static{this.\u0275cmp=M({type:o,selectors:[["app-der-seances"]],decls:37,vars:13,consts:[[1,"form-add",3,"ngSubmit","formGroup"],[1,"div-content"],[1,"first-content"],[1,"input-content"],[1,"form","form-group"],["formControlName","idModule",1,"form-select"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngStyle",4,"ngIf"],["formControlName","idTeacher","required","",1,"form-select"],["formControlName","idSalle","required","",1,"form-select"],["for","date"],["id","date","type","date","formControlName","date","readonly","",1,"form-control"],[1,"button-cash"],["id","btn-submit","type","submit",1,"btn"],[3,"value"],[3,"ngStyle"]],template:function(i,t){i&1&&(r(0,"main")(1,"form",0),_("ngSubmit",function(){return t.create_seance()}),r(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"label"),l(7,"Modules :"),n(),r(8,"select",5)(9,"option",6),l(10,"Choisir le module"),n(),g(11,ni,2,2,"option",7),n(),g(12,oi,2,2,"span",8),n(),r(13,"div",4)(14,"label"),l(15,"Enseignants :"),n(),r(16,"select",9)(17,"option",6),l(18,"Choisir L'enseignant"),n(),g(19,ri,2,3,"option",7),n(),g(20,ai,2,2,"span",8),n(),r(21,"div",4)(22,"label"),l(23,"Salles :"),n(),r(24,"select",10)(25,"option",6),l(26,"Choisir la salle"),n(),g(27,li,2,2,"option",7),n(),g(28,si,2,2,"span",8),n()(),r(29,"div",3)(30,"div",4)(31,"label",11),l(32,"Date :"),n(),u(33,"input",12),n()()()(),r(34,"div",13)(35,"button",14),l(36,"Enregistrer"),n()()()()),i&2&&(a(),c("formGroup",t.form_seance),a(7),P("is-invalid",t.form_seance.get("idModule").invalid&&t.form_seance.get("idModule").touched),a(3),c("ngForOf",t.modules),a(),c("ngIf",t.form_seance.controls.idModule.invalid&&t.form_seance.controls.idModule.touched),a(4),P("is-invalid",t.form_seance.get("idTeacher").invalid&&t.form_seance.get("idTeacher").touched),a(3),c("ngForOf",t.enseignants),a(),c("ngIf",t.form_seance.controls.idTeacher.invalid&&t.form_seance.controls.idTeacher.touched),a(4),P("is-invalid",t.form_seance.get("idSalle").invalid&&t.form_seance.get("idSalle").touched),a(3),c("ngForOf",t.salles),a(),c("ngIf",t.form_seance.controls.idSalle.invalid&&t.form_seance.controls.idSalle.touched))},dependencies:[V,I,he,R,$,W,T,ae,D,L,ye,B,z],styles:["main[_ngcontent-%COMP%]{padding:10px 20px}.div-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.first-content[_ngcontent-%COMP%]{display:flex;gap:30px}.input-content[_ngcontent-%COMP%]{width:50%}.head[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:center;width:100%;padding:5px;border-radius:4px;background-color:var(--primary);color:var(--secondary)}.head[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px;cursor:pointer}.head[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary);border-radius:4px}.form-group[_ngcontent-%COMP%]{margin-top:15px}label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:5px}.check-val[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:20px}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px 20px;border-radius:5px;background-color:var(--primary);color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.check-val[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:3px 20px;border-radius:5px;background-color:var(--primary);color:var(--secondary);cursor:pointer}.check-val[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.check-val[_ngcontent-%COMP%]   .isCheck-valid[_ngcontent-%COMP%]{border:none;display:flex;justify-content:center;margin-top:8px;padding:3px 20px;border-radius:5px;background-color:var(--primary);color:var(--secondary);cursor:pointer}.check-val[_ngcontent-%COMP%]   .isCheck-valid[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px var(--primary)}.input-click[_ngcontent-%COMP%]{cursor:pointer}.views-add-ues[_ngcontent-%COMP%]{width:500px;background-color:#fff;position:absolute;top:20%;left:2%;right:50%;box-shadow:0 4px 8px #00000026;border-radius:5px;z-index:10001}.nom-class[_ngcontent-%COMP%]{width:100%;height:40px;padding:10px;background-color:var(--primary);color:var(--secondary);border-top-left-radius:4px;border-top-right-radius:4px}.formModuleMatiere[_ngcontent-%COMP%]{padding:20px}.input-disabled[_ngcontent-%COMP%]{pointer-events:none;background-color:#e9ecef;cursor:not-allowed}.input[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px;cursor:pointer}.input[_ngcontent-%COMP%]:hover{background-color:#ddd;color:var(--primary)}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:transparent;z-index:1000}"]})}}return o})();function ci(o,d){if(o&1&&(r(0,"option",12),l(1),n()),o&2){let e=d.$implicit;c("value",e.idEnseignant),a(),j("",e.nom," ",e.prenom,"")}}function di(o,d){o&1&&u(0,"input",23)}function pi(o,d){if(o&1&&(r(0,"option",12),l(1),n()),o&2){let e=d.$implicit;w("value",e.id),a(),j("",e.idFiliere==null||e.idFiliere.idNiveau==null?null:e.idFiliere.idNiveau.nom," ",e.idFiliere==null||e.idFiliere.idFiliere==null?null:e.idFiliere.idFiliere.nomFiliere,"")}}function mi(o,d){if(o&1&&(r(0,"option",12),l(1),n()),o&2){let e=d.$implicit;w("value",e.id),a(),x(e.nomModule)}}function ui(o,d){if(o&1&&(r(0,"option",12),l(1),n()),o&2){let e=d.$implicit;c("value",e.date),a(),x(e.day)}}function gi(o,d){if(o&1&&(r(0,"option",12),l(1),n()),o&2){let e=d.$implicit;c("value",e.id),a(),x(e.nom)}}var Qn=(()=>{class o{constructor(e,i,t,s,p,f,E,ee,we,je){this.emploisService=e,this.icons=i,this.enseignantService=t,this.pageTitle=s,this.fb=p,this.classService=f,this.route=E,this.router=ee,this.seanceService=we,this.salleService=je,this.enseignants=[],this.modules=[],this.classes=[],this.salles=[],this.datesWithDays=[],this.datesWithDaysTest=[]}ngOnInit(){this.load_form(),this.get_by_id(),this.load_classe(),this.load_enseignants(),this.getSeance_date(),this.load_salles()}load_form(){this.form_seance=this.fb.group({id:[""],heureDebut:[""],heureFin:[""],idEmplois:[""],idSalle:[""],idTeacher:[""],date:[""],idModule:[""],jour:[""],idClasse:[""]})}get_by_id(){this.route.queryParams.subscribe(e=>{this.idUrl=+e.id}),this.seanceService.getSeance_byId(this.idUrl).subscribe(e=>{this.seance=e,this.form_seance?.get("id")?.setValue(this.seance.id),this.form_seance?.get("idEmplois")?.setValue(this.seance.idEmplois),this.form_seance?.get("heureDebut")?.setValue(this.seance.heureDebut),this.form_seance?.get("heureFin")?.setValue(this.seance.heureFin),this.form_seance?.get("date")?.setValue(this.seance.date),this.nomMension=this.seance.idEmplois.idClasse.idFiliere,this.nomModule=this.seance.idModule})}load_enseignants(){this.enseignantService.getAll().subscribe(e=>{this.enseignants=e})}load_classe(){this.classService.getAllCurrentClassOfYear().subscribe(e=>{this.classes=e})}load_salles(){this.salleService.getAll_non_occuper().subscribe(e=>{this.salles=e})}updat_seance(){let e=this.form_seance?.value,i=this.modules.find(E=>E.id==+e.idModule),t=this.seance.idEmplois,s=this.enseignants.find(E=>E.idEnseignant==+e.idTeacher),p=this.salles.find(E=>E.id==+e.idSalle),f={id:e.id,heureDebut:e.heureDebut,heureFin:e.heureFin,date:e.date,idEmplois:t,idModule:i};console.log("valid :",f),this.seanceService.update(f).subscribe({next:E=>{this.pageTitle.showSuccessToast(E.message),window.history.back()},error:E=>{this.pageTitle.showErrorToast(E.error.message)}})}onSelect(e){this.idUrl=e.target.value,this.emploisService.getEmploisByClasse2(this.idUrl).subscribe(i=>{this.emplois=i;let t=this.emplois.dateDebut,s=this.emplois.dateFin;this.datesWithDays=this.emploisService.getDaysBetweenDates(t,s),this.datesWithDays.sort((p,f)=>new Date(p.date).getTime()-new Date(f.date).getTime()),this.loadModulesByClass(this.idUrl)})}loadModulesByClass(e){this.classService.getAllModules(e).subscribe(i=>{this.modules=i})}getSeance_date(){this.form_seance?.get("jour")?.valueChanges.subscribe(e=>{e?this.form_seance?.get("date")?.setValue(e):this.form_seance?.get("date")?.setValue("")})}goBack(){window.history.back()}static{this.\u0275fac=function(i){return new(i||o)(m(ve),m(O),m(Y),m(G),m(q),m(Me),m(oe),m(_e),m(Re),m(X))}}static{this.\u0275cmp=M({type:o,selectors:[["app-der-edit-seance"]],decls:60,vars:17,consts:[[1,"back-button",3,"click"],[3,"icon"],[1,"form-add",3,"ngSubmit","formGroup"],[1,"div-content"],[1,"first-content"],[1,"input-content"],[1,"form","form-group"],["formControlName","idTeacher","id","enseignant",1,"form-select"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","id",4,"ngIf"],["formControlName","idClasse",1,"form-select",3,"change"],[3,"value"],["formControlName","idModule","id","idModule","placeholder","Modules","required","",1,"form-select"],["formControlName","jour",1,"form-select","jours"],["formControlName","idSalle","required","",1,"form-select"],["for","date"],["id","date","type","date","formControlName","date","readonly","",1,"form-control"],[1,"input-time"],["type","time","id","heureDebut","formControlName","heureDebut","required","",1,"form-control"],["type","time","id","heureFin","formControlName","heureFin","required","",1,"form-control"],[1,"button-cash"],["id","btn-submit","type","submit",1,"btn"],["type","number","formControlName","id"]],template:function(i,t){i&1&&(r(0,"main")(1,"div",0),_("click",function(){return t.goBack()}),u(2,"fa-icon",1),n(),r(3,"form",2),_("ngSubmit",function(){return t.updat_seance()}),r(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"label"),l(9,"Enseignants :"),n(),r(10,"select",7)(11,"option",8),l(12),n(),g(13,ci,2,3,"option",9),n()(),g(14,di,1,0,"input",10),r(15,"div",6)(16,"label"),l(17,"Mentions :"),n(),r(18,"select",11),_("change",function(p){return t.onSelect(p)}),r(19,"option",12),l(20),n(),g(21,pi,2,3,"option",9),n()(),r(22,"div",6)(23,"label"),l(24,"Modules :"),n(),r(25,"select",13)(26,"option",12),l(27),n(),g(28,mi,2,2,"option",9),n()(),r(29,"div",6)(30,"label"),l(31,"Jours :"),n(),r(32,"select",14)(33,"option",8),l(34,"Choisir Le Jour"),n(),g(35,ui,2,2,"option",9),n()()(),r(36,"div",5)(37,"div",6)(38,"label"),l(39,"Salles :"),n(),r(40,"select",15)(41,"option",12),l(42),n(),g(43,gi,2,2,"option",9),n()(),r(44,"div",6)(45,"label",16),l(46,"Date :"),n(),u(47,"input",17),n(),r(48,"div",18)(49,"div",6)(50,"label"),l(51,"Heure de d\xE9but :"),n(),u(52,"input",19),n(),r(53,"div",6)(54,"label"),l(55,"Heure de Fin :"),n(),u(56,"input",20),n()()()()(),r(57,"div",21)(58,"button",22),l(59,"Enregistrer"),n()()()()),i&2&&(a(2),c("icon",t.icons.back),a(),c("formGroup",t.form_seance),a(9),j("",t.enseig==null?null:t.enseig.nom," ",t.enseig==null?null:t.enseig.prenom,""),a(),c("ngForOf",t.enseignants),a(),c("ngIf",!1),a(5),w("value",t.nomMension==null||t.nomMension.idNiveau==null?null:t.nomMension.idNiveau.id),a(),j("",t.nomMension==null||t.nomMension.idNiveau==null?null:t.nomMension.idNiveau.nom," ",t.nomMension==null||t.nomMension.idFiliere==null?null:t.nomMension.idFiliere.nomFiliere,""),a(),c("ngForOf",t.classes),a(5),w("value",t.nomModule==null?null:t.nomModule.id),a(),x(t.nomModule==null?null:t.nomModule.nomModule),a(),c("ngForOf",t.modules),a(7),c("ngForOf",t.datesWithDays),a(6),w("value",t.salle==null?null:t.salle.id),a(),x(t.salle==null?null:t.salle.nom),a(),c("ngForOf",t.salles))},dependencies:[V,I,R,$,W,T,fe,ae,D,L,ye,B,z,F],styles:["main[_ngcontent-%COMP%]{padding:10px 20px}.div-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.first-content[_ngcontent-%COMP%]{display:flex;gap:30px}.input-content[_ngcontent-%COMP%]{width:50%}.form-group[_ngcontent-%COMP%]{margin-top:15px}label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:5px}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;background-color:var(--primary);color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px var(--primary)}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}"]})}}return o})();var gt=()=>({color:"red"}),hi=o=>({"red-border":o}),_i=o=>({"custom-checked":o});function fi(o,d){if(o&1&&(r(0,"option",23),l(1),n()),o&2){let e=d.$implicit;w("value",e.id),a(),x(e.nom)}}function vi(o,d){o&1&&(r(0,"button",24),l(1,"Ajouter participants"),n())}function bi(o,d){if(o&1){let e=y();r(0,"a",25),_("click",function(){v(e);let t=h();return b(t.exit())}),l(1,"Annuler"),n()}}function xi(o,d){if(o&1){let e=y();r(0,"button",25),_("click",function(){v(e);let t=h();return b(t.to_createGroup())}),l(1,"Cr\xE9er"),n()}}function Ci(o,d){o&1&&(r(0,"span",30),l(1," Nom trop long* "),n()),o&2&&c("ngStyle",k(1,gt))}function Si(o,d){o&1&&(r(0,"span",30),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,gt))}function yi(o,d){if(o&1){let e=y();r(0,"div",26)(1,"p"),l(2,"Ajouter groupe"),n(),r(3,"form",27),_("ngSubmit",function(){v(e);let t=h();return b(t.add_groupe())}),r(4,"div",6)(5,"label"),l(6,"Nom du groupe :"),n(),u(7,"input",28),g(8,Ci,2,2,"span",29)(9,Si,2,2,"span",29),n(),r(10,"div",10)(11,"a",25),_("click",function(){v(e);let t=h();return b(t.close())}),l(12,"Annuler"),n(),r(13,"button",24),l(14,"Enregistrer"),n()()()()}if(o&2){let e=h();a(3),c("formGroup",e.form_add),a(4),P("is-invalid",e.form_add.get("nom").invalid&&e.form_add.get("nom").touched),a(),c("ngIf",(e.form_add.controls.nom.errors==null?null:e.form_add.controls.nom.errors.maxlength)&&e.form_add.controls.nom.touched),a(),c("ngIf",(e.form_add.controls.nom.errors==null?null:e.form_add.controls.nom.errors.required)&&e.form_add.controls.nom.touched)}}function Ei(o,d){if(o&1){let e=y();N(0),r(1,"tr",32)(2,"td")(3,"input",33),_("change",function(t){let s=v(e).$implicit,p=h(2);return b(p.student_check(s.id,t))}),n()(),r(4,"td"),l(5),n(),r(6,"td"),l(7),n(),r(8,"td",34),l(9),n(),r(10,"td",34),l(11),n(),r(12,"td"),l(13),n(),r(14,"td"),l(15),n()(),A()}if(o&2){let e=d.$implicit,i=h(2);a(),c("ngClass",Be(12,hi,i.check(e.id))),a(2),c("checked",i.is_checked(e.id))("ngClass",Be(14,_i,i.is_checked(e.id)))("disabled",i.check(e.id)),a(2),x(e.idEtudiant.nom),a(2),x(e.idEtudiant.prenom),a(),w("title",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idFiliere==null?null:e.idClasse.idFiliere.idFiliere.nomFiliere),a(),C(" ",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idNiveau==null?null:e.idClasse.idFiliere.idNiveau.nom,""),a(),w("title",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idFiliere==null?null:e.idClasse.idFiliere.idFiliere.nomFiliere),a(),C(" ",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idFiliere==null?null:e.idClasse.idFiliere.idFiliere.nomFiliere,""),a(2),x(e.idEtudiant.telephone),a(2),x(i.isPresent(e.idEtudiant.idEtudiant)?i.particip==null||i.particip.idStudentGroup==null?null:i.particip.idStudentGroup.nom:"Accun")}}function Mi(o,d){if(o&1&&(N(0),g(1,Ei,16,16,"ng-container",31),A()),o&2){let e=h();a(),c("ngForOf",e.filteredInscription())}}function Pi(o,d){o&1&&(r(0,"tr")(1,"td",35),l(2,"Aucun r\xE9sultat trouv\xE9"),n()())}function Oi(o,d){o&1&&u(0,"div",36)}var eo=(()=>{class o{constructor(e,i,t,s,p,f,E,ee){this.service=e,this.inscriptionService=i,this.fb=t,this.root=s,this.sidebarService=p,this.emploisService=f,this.icons=E,this.pageTitle=ee,this.searchTerm="",this.list_checked=[],this.inscriptions=[],this.filteredItem=[],this.is_Show_addGroup=!1,this.is_Show_addParticipant=!1,this.groupes=[],this.participants=[]}ngOnInit(){this.admin=Q()?.der,this.load_form(),this.getAll_group(),this.load_participant_form(),this.loadStudents(),this.sidebarService.currentSearchTerm.subscribe(e=>{this.searchTerm=e,this.filteredInscription()})}loadStudents(){this.root.queryParams.subscribe(e=>{this.idClasse=+e.id,this.emploisService.getEmploisById(this.idEmploi).subscribe(i=>{this.emploi=i,console.log(this.emploi,"emploi trouver")})})}to_createGroup(){this.is_Show_addGroup=!this.is_Show_addGroup}close(){this.is_Show_addGroup=!1}add_groupe(){let i={nom:this.form_add.value.nom,idEmploi:this.emploi};this.form_add.valid?this.service.addGroup(i).subscribe({next:t=>{this.pageTitle.showSuccessToast(t.message),this.form_add.reset(),this.load_form(),this.getAll_group(),this.is_Show_addGroup=!1},error:t=>{this.pageTitle.showErrorToast(t.error.message)}}):this.form_add.markAllAsTouched()}getAll_group(){this.root.queryParams.subscribe(e=>{this.idEmploi=+e.idEmploi}),this.service.getListGroupByIdEmploi(this.idEmploi).subscribe(e=>{this.groupes=e,console.log(this.groupes,"groupes")}),this.inscriptionService.getListInscriptionByIdEmploi(this.idEmploi).subscribe(e=>{this.inscriptions=e,console.log(e,"touts les incrits")}),this.load_participation_by_emploi(this.idEmploi)}load_participation_by_emploi(e){this.service.getParticipantsByEmploiId(e).subscribe(i=>{console.log("parti----------",i),i.forEach(t=>{this.participants.some(s=>s.idStudentGroup.id==t.idStudentGroup.id)||this.participants.push(t)}),console.log(this.participants,"participations")})}load_form(){this.form_add=this.fb.group({nom:["",[S.required,S.maxLength(8)]]})}student_check(e,i){let t=this.inscriptions.find(s=>s.id===e);t&&(i.target.checked?this.list_checked.some(s=>s.id===e)||this.list_checked.push(t):this.list_checked=this.list_checked.filter(s=>s.id!==t.id))}selectAll(e){e.target.checked?this.list_checked=[...this.inscriptions]:this.list_checked=[]}is_checked(e){return this.list_checked.some(i=>i.id===e)}areAllChecked(){return this.list_checked.length===this.inscriptions.length}goBack(){window.history.back()}load_participant_form(){this.form_participants=this.fb.group({idStudentGroup:["",S.required]})}create_participant(e){let i=[],t=this.form_participants.value,s=this.groupes.find(p=>p.id==t.idStudentGroup);e&&e.length>0&&(e.forEach(p=>{let f={idStudentGroup:s,idInscription:p,idAdmin:this.admin};i.push(f)}),console.log(i)),console.log(i,"list to add"),this.form_participants.valid?this.service.addParticipant(i).subscribe({next:p=>{this.pageTitle.showSuccessToast(p.message),this.form_participants.reset(),this.load_participant_form(),this.getAll_group(),this.list_checked=[]},error:p=>{this.pageTitle.showErrorToast(p.error.message)}}):this.form_participants.markAllAsTouched()}check(e){return this.inscriptions.some(i=>i.id==e)}isPresent(e){return this.particip=this.participants.find(i=>i.idInscription.idEtudiant.idEtudiant==e),this.participants.some(i=>i.idInscription.idEtudiant.idEtudiant)}onSelect(e){let i=e.target.value;this.is_Show_addParticipant=!0}exit(){this.is_Show_addParticipant=!1,this.form_participants.reset(),this.load_participant_form()}filteredInscription(){return this.searchTerm?this.filteredItem=this.inscriptions.filter(e=>e.idEtudiant.prenom.toLowerCase().includes(this.searchTerm.toLowerCase())||e.idEtudiant.nom.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredItem=this.inscriptions}static{this.\u0275fac=function(i){return new(i||o)(m(U),m(Pe),m(q),m(oe),m(J),m(ve),m(O),m(G))}}static{this.\u0275cmp=M({type:o,selectors:[["app-add-group-student"]],decls:48,vars:14,consts:[["noResults",""],[1,"back-button",3,"click"],[3,"icon"],[1,"input-count"],[3,"ngSubmit","formGroup"],[1,"left"],[1,"form-group"],["formControlName","idStudentGroup",1,"form-select",3,"change"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"button-cash"],["type","submit",4,"ngIf"],[3,"click",4,"ngIf"],[1,"create"],["class","views",4,"ngIf"],[1,"input-search"],["type","text","placeholder","Recherche...",1,"search-input",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table"],[1,"select-al","input"],["type","checkbox",1,"custom-checked",3,"change","checked"],[4,"ngIf","ngIfElse"],["class","overlay",4,"ngIf"],[3,"value"],["type","submit"],[3,"click"],[1,"views"],[1,"form",3,"ngSubmit","formGroup"],["type","text","formControlName","nom","placeholder","Nom du groupe...",1,"form-control"],[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],[4,"ngFor","ngForOf"],[3,"ngClass"],["type","checkbox",3,"change","checked","ngClass","disabled"],[1,"class-name",3,"title"],["colspan","9",1,"text-center"],[1,"overlay"]],template:function(i,t){if(i&1){let s=y();r(0,"main")(1,"div",1),_("click",function(){return v(s),b(t.goBack())}),u(2,"fa-icon",2),n(),r(3,"div",3)(4,"form",4),_("ngSubmit",function(){return v(s),b(t.create_participant(t.list_checked))}),r(5,"div")(6,"div",5)(7,"div",6)(8,"label"),l(9,"Groupe :"),n(),r(10,"select",7),_("change",function(f){return v(s),b(t.onSelect(f))}),r(11,"option",8),l(12,"Choisir Le groupe"),n(),g(13,fi,2,2,"option",9),n()(),r(14,"div",10),g(15,vi,2,0,"button",11)(16,bi,2,0,"a",12),r(17,"div",13),g(18,xi,2,0,"button",12)(19,yi,15,5,"div",14),n()()()()(),r(20,"div",15)(21,"input",16),ne("ngModelChange",function(f){return v(s),ie(t.searchTerm,f)||(t.searchTerm=f),b(f)}),n()()(),r(22,"div",17)(23,"table",18)(24,"thead")(25,"tr")(26,"th")(27,"div",19)(28,"input",20),_("change",function(f){return v(s),b(t.selectAll(f))}),n(),r(29,"span"),l(30," Tout"),n()()(),r(31,"th"),l(32,"Nom"),n(),r(33,"th"),l(34,"Prenom"),n(),r(35,"th"),l(36,"Classe"),n(),r(37,"th"),l(38,"Filiere"),n(),r(39,"th"),l(40,"Telephone"),n(),r(41,"th"),l(42,"Groupe"),n()()(),r(43,"tbody"),g(44,Mi,2,1,"ng-container",21)(45,Pi,3,0,"ng-template",null,0,ge),n()()(),g(47,Oi,1,0,"div",22),n()}if(i&2){let s=ue(46);a(2),c("icon",t.icons.back),a(2),c("formGroup",t.form_participants),a(6),P("is-invalid",t.form_participants.get("idStudentGroup").invalid&&t.form_participants.get("idStudentGroup").touched),a(3),c("ngForOf",t.groupes),a(2),c("ngIf",t.is_Show_addParticipant),a(),c("ngIf",t.is_Show_addParticipant),a(2),c("ngIf",!t.is_Show_addParticipant),a(),c("ngIf",t.is_Show_addGroup),a(2),te("ngModel",t.searchTerm),a(7),c("checked",t.areAllChecked()),a(16),c("ngIf",t.participants.length)("ngIfElse",s),a(3),c("ngIf",t.is_Show_addGroup)}},dependencies:[Le,V,I,he,R,$,W,T,ae,D,L,re,B,z,F],styles:["main[_ngcontent-%COMP%]{width:100%;padding-top:20px}a[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:30px}td[_ngcontent-%COMP%]{border:none}th[_ngcontent-%COMP%]{background-color:#fff}tr[_ngcontent-%COMP%]{border-left:1px solid var(--tertiary);border-right:1px solid var(--tertiary);cursor:pointer}tr[_ngcontent-%COMP%]:hover{background-color:#e6e4e4}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-container[_ngcontent-%COMP%]{height:400px;position:relative;overflow-y:auto}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;text-overflow:ellipsis}.input-count[_ngcontent-%COMP%]{padding:10px;display:flex;justify-content:space-between;align-items:flex-end}.left[_ngcontent-%COMP%]{display:flex;gap:10px}.form[_ngcontent-%COMP%]{padding:10px}.red-border[_ngcontent-%COMP%]{background-color:#f33b3b41}.custom-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover{background-color:var(--primary);color:var(--secondary)}.custom-checked[_ngcontent-%COMP%]{accent-color:var(--primary)}label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:5px}.button-cash[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:20px;align-items:flex-end;margin-top:20px}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;height:35px;gap:8px;padding:5px 20px;border-radius:5px;background-color:var(--primary);color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.views[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;background-color:var(--primary);color:var(--secondary);border-top-left-radius:4px;border-top-right-radius:4px;padding:10px;margin:0;text-align:center}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;background-color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--primary);color:var(--secondary)}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:999;background:transparent}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px var(--primary)}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}.views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;border-radius:4px;left:1;margin-top:10px;z-index:10001;box-shadow:0 4px 8px #00000026}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border:1px solid var(--primary);box-shadow:0 0 5px var(--primary)}"]})}}return o})();function wi(o,d){o&1&&(r(0,"div",9)(1,"span",10),l(2,"La note ne pas etre supperieure a 20"),n()())}var ht=(()=>{class o{constructor(e,i,t){this.fb=e,this.studentService=i,this.pageTitle=t,this.closeModal=new Se}ngOnInit(){this.load_form()}load_form(){this.addNote=this.fb.group({idDoc:[this.doc.id],note:["",[S.required,S.min(0),S.max(20)]]})}submit(){let e=this.addNote.value;console.log(e,"formdata"),this.studentService.addSoutenanceNote(this.doc.id,e.note).subscribe({next:i=>{this.pageTitle.showSuccessToast(i.message),this.addNote.reset(),this.closeModal.emit()},error:i=>{this.pageTitle.showErrorToast(i.error.message),console.log("error",i)}})}close(){this.closeModal.emit(null)}static{this.\u0275fac=function(i){return new(i||o)(m(q),m(U),m(G))}}static{this.\u0275cmp=M({type:o,selectors:[["app-soutenance-note"]],inputs:{doc:"doc"},outputs:{closeModal:"closeModal"},decls:12,vars:4,consts:[[1,"views"],[1,"span"],[1,"container-views"],[3,"ngSubmit","formGroup"],["type","number","formControlName","note","placeholder","Saisir le note",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"button-cash"],[3,"click"],["type","submit"],[1,"invalid-feedback"],[1,"label-error"]],template:function(i,t){if(i&1&&(r(0,"div",0)(1,"h3",1),l(2,"Confirmation"),n(),r(3,"div",2)(4,"form",3),_("ngSubmit",function(){return t.submit()}),u(5,"input",4),g(6,wi,3,0,"div",5),r(7,"div",6)(8,"a",7),_("click",function(){return t.close()}),l(9,"Annuler"),n(),r(10,"button",8),l(11,"Ajouter"),n()()()()()),i&2){let s;a(4),c("formGroup",t.addNote),a(),P("is-invalid",t.addNote.get("note").invalid&&t.addNote.get("note").touched),a(),c("ngIf",((s=t.addNote.get("note").errors)==null?null:s.min)||((s=t.addNote.get("note").errors)==null?null:s.max))}},dependencies:[I,R,T,fe,D,L,B,z],styles:[".container-views[_ngcontent-%COMP%]{padding:10px}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}label[_ngcontent-%COMP%]{margin-bottom:5px}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);background-color:var(--primary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;border:1px solid #ddd;left:40%;top:20%;right:30%;border-radius:4px;z-index:1000;box-shadow:0 4px 8px #00000026}.span[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary);font-size:14px;padding:10px;width:100%;text-align:center;border-top-left-radius:4px;border-top-right-radius:4px}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border:1px solid var(--primary);box-shadow:0 0 5px var(--primary)}"]})}}return o})();function ki(o,d){if(o&1&&(r(0,"option",18),l(1),n()),o&2){let e=d.$implicit;c("value",e.id),a(),C("Promotion ",e.ans,"")}}function Ti(o,d){if(o&1&&(l(0),u(1,"br")),o&2){let e=d.$implicit;C(" ",e.idEtudiant.nom," ")}}function Di(o,d){if(o&1&&(l(0),u(1,"br")),o&2){let e=d.$implicit;C(" ",e.idEtudiant.prenom," ")}}function Fi(o,d){if(o&1&&(l(0),u(1,"br")),o&2){let e=d.$implicit;C(" ",e.idEtudiant.telephone," ")}}function Ni(o,d){if(o&1&&(l(0),u(1,"br")),o&2){let e=d.$implicit,i=h(3);C(" ",i.getFullYear(e.idClasse.idAnneeScolaire==null?null:e.idClasse.idAnneeScolaire.debutAnnee)," ")}}function Ai(o,d){if(o&1){let e=y();N(0),r(1,"div",23)(2,"p",24),_("click",function(){v(e);let t=h().$implicit,s=h(2);return b(s.show_cofirm(t.idDocument.id))}),u(3,"fa-icon",25),l(4," Annuler"),n(),r(5,"p",24),_("click",function(){v(e);let t=h().$implicit,s=h(2);return b(s.show_note(t.idDocument))}),u(6,"fa-icon",26),l(7," Noter"),n()(),A()}if(o&2){let e=h(3);a(3),c("icon",e.icons.circle_xmark),a(3),c("icon",e.icons.edit)}}function Vi(o,d){if(o&1){let e=y();N(0),r(1,"span",24),_("click",function(){v(e);let t=h().$implicit,s=h(2);return b(s.programer(t.id))}),l(2,"Programmer"),n(),A()}}function ji(o,d){if(o&1&&(r(0,"tr")(1,"td",20),l(2),n(),r(3,"td"),l(4),n(),r(5,"td"),l(6),n(),r(7,"td"),pe(8,Ti,2,1,"br",null,de),n(),r(10,"td"),pe(11,Di,2,1,"br",null,de),n(),r(13,"td"),pe(14,Fi,2,1,"br",null,de),n(),r(16,"td",21),l(17),n(),r(18,"td",21),l(19),n(),r(20,"td"),pe(21,Ni,2,1,"br",null,de),n(),r(23,"td"),g(24,Ai,8,2,"ng-container",22)(25,Vi,3,0,"ng-container",22),n()()),o&2){let e=d.$implicit,i=d.index,t=h(2);a(2),x(i+1),a(2),x(e.idDocument.date),a(2),x(e.idDocument.docType),a(2),me(e.idInscription),a(3),me(e.idInscription),a(3),me(e.idInscription),a(2),w("title",e.niveau),a(),x(e.niveau),a(),w("title",e.filiere),a(),x(t.abrevigateFiliereName(e.filiere)),a(2),me(e.idInscription),a(3),c("ngIf",e.idDocument.programmer),a(),c("ngIf",!e.idDocument.programmer)}}function Gi(o,d){if(o&1&&(N(0),g(1,ji,26,9,"tr",19),A()),o&2){let e=h();a(),c("ngForOf",e.filterDocs())}}function Li(o,d){o&1&&(r(0,"tr")(1,"td",27),l(2,"Aucun document trouv\xE9"),n()())}function Ri(o,d){if(o&1){let e=y();r(0,"div",28)(1,"app-soutenance-note",29),_("closeModal",function(){v(e);let t=h();return b(t.close_note())}),n()()}if(o&2){let e=h();a(),c("doc",e.doc)}}function Bi(o,d){if(o&1){let e=y();r(0,"div",30)(1,"h3",31),l(2,"Confirmation"),n(),r(3,"div",32)(4,"p"),l(5,"\xCAtes-vous s\xFBr de vouloir annuler cette programmation "),n(),r(6,"div",33)(7,"a",34),_("click",function(){v(e);let t=h();return b(t.exitconfirm())}),l(8,"Non"),n(),r(9,"button",34),_("click",function(){v(e);let t=h();return b(t.confirm(t.idDocSelect))}),l(10,"Oui"),n()()()()}}function zi(o,d){if(o&1){let e=y();r(0,"button",24),_("click",function(){let t=v(e).$implicit,s=h(2);return b(s.setPage(t))}),l(1),n()}if(o&2){let e=d.$implicit,i=h(2);P("active",e===i.page),a(),C(" ",e+1," ")}}function qi(o,d){if(o&1){let e=y();r(0,"div",35)(1,"div",36)(2,"div",37)(3,"button",38),_("click",function(){v(e);let t=h();return b(t.previousPage())}),u(4,"fa-icon",4),n(),g(5,zi,2,3,"button",39),r(6,"button",38),_("click",function(){v(e);let t=h();return b(t.nextPage())}),u(7,"fa-icon",4),n()()(),r(8,"p"),l(9),n()()}if(o&2){let e=h();a(3),c("disabled",e.page===0),a(),c("icon",e.icons.previous),a(),c("ngForOf",e.getVisiblePages()),a(),c("disabled",e.page===e.docPage.totalPages-1),a(),c("icon",e.icons.nexte),a(2),j("page : ",e.page+1,"/",e.docPage.totalPages,"")}}function Ui(o,d){o&1&&u(0,"div",40)}var lo=(()=>{class o{constructor(e,i,t,s,p,f){this.router=e,this.icons=i,this.pageTitle=t,this.infoSchool=s,this.sideBarService=p,this.studentService=f,this.searchTerm="",this.show_add_note=!1,this.overlay=!1,this.isConfirm=!1,this.annees=[],this.docs=[],this.filteredItem=[],this.inscriptions=[],this.page=0,this.size=20,this.pages=[]}ngOnInit(){this.getDocsOfYear(),this.get_annees(),this.currentYear=new Date().getFullYear(),this.sideBarService.currentSearchTerm.subscribe(e=>{this.searchTerm=e,this.filterDocs()})}toggle_form_add(){this.router.navigate(["/der/add-doc"])}toggle_toView(){this.router.navigate(["/der/programme-view"])}onDocsReceived(e){this.docs=e,console.log("Documents received:",e)}getDocsOfYear(){this.studentService.getCurrentYearDoc(this.page,this.size).subscribe(e=>{this.docPage=e,e.content.forEach(i=>{this.inscriptions=i.idInscription,this.docs.some(t=>t.idDocument.id==i.idDocument.id)||this.docs.push(i)}),console.log(this.docs,"docs"),this.pages=Array.from({length:e.totalPages},(i,t)=>t)})}get_annees(){this.infoSchool.getAll_annee().subscribe(e=>{this.annees=e,this.annees.forEach(i=>{let s=new Date(i.debutAnnee).getFullYear();i.ans=s})})}onChange(e){let i=e.target.value;console.log(i,"idAnnee"),this.studentService.getAnneeByIdClasseAndAnnee(this.page,this.size,i).subscribe(t=>{this.docs=[],console.log(t,"result"),this.docPage=t,t.content.forEach(s=>{this.inscriptions=s.idInscription,this.docs.some(p=>p.idDocument.id==s.idDocument.id)||this.docs.push(s)}),this.pages=Array.from({length:t.totalPages},(s,p)=>p)})}filterDocs(){return this.searchTerm?this.filteredItem=this.docs.filter(e=>e.idInscription.some(i=>i.idEtudiant.nom.toLowerCase().includes(this.searchTerm.toLowerCase()))||e.idInscription.some(i=>i.idEtudiant.prenom.toLowerCase().includes(this.searchTerm.toLowerCase()))||this.abrevigateFiliereName(e.filiere).toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredItem=this.docs}setPage(e){e>=0&&e<this.docPage.totalPages&&(this.page=e,this.getDocsOfYear())}nextPage(){this.page<this.docPage.totalPages-1&&this.setPage(this.page+1)}previousPage(){this.page>0&&this.setPage(this.page-1)}getVisiblePages(){let e=[],i=this.docPage.totalPages,t=Math.max(0,this.page-1),s=Math.min(i-1,this.page+1);for(let p=t;p<=s;p++)e.push(p);return e}programer(e){let i={queryParams:{id:e}};this.router.navigate(["/der/programmer"],i)}confirm(e){console.log(e,"idDoc"),this.studentService.annulerProgramme(e).subscribe(i=>{i?(this.pageTitle.showSuccessToast("Succes!!!"),this.isConfirm=!1,this.overlay=!1,this.getDocsOfYear()):this.pageTitle.showErrorToast("Erreur!!!")})}show_cofirm(e){this.idDocSelect=e,this.overlay=!0,this.isConfirm=!0,console.log("show")}exitconfirm(){this.overlay=!1,this.isConfirm=!1}show_note(e){this.doc=e,this.show_add_note=!0,this.overlay=!0}close_note(){this.show_add_note=!1,this.overlay=!1}abrevigateFiliereName(e){return e.split(" ").filter(t=>t.length>3).map(t=>t[0].toUpperCase()).join("")}getFullYear(e){return new Date(e).getFullYear()}static{this.\u0275fac=function(i){return new(i||o)(m(_e),m(O),m(G),m(Ee),m(J),m(U))}}static{this.\u0275cmp=M({type:o,selectors:[["app-der-doc"]],decls:48,vars:11,consts:[["noResults",""],[1,"col-12"],[1,"btn-cont"],[1,"btn",3,"click"],[3,"icon"],[1,"form-group"],[3,"change"],["id","default","selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"input-search"],["type","text","placeholder","Recherche...",1,"search-input",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table","table-hover"],[4,"ngIf","ngIfElse"],["class","app",4,"ngIf"],["class","views",4,"ngIf"],["class","footer",4,"ngIf"],["class","overlay",4,"ngIf"],[3,"value"],[4,"ngFor","ngForOf"],[1,"numerotation-clumn"],[1,"class-name",3,"title"],[4,"ngIf"],[1,"isProgram"],[3,"click"],[1,"x-mark","fa-icon",3,"icon"],[1,"fa-icon",3,"icon"],["colspan","9",1,"text-center"],[1,"app"],[3,"closeModal","doc"],[1,"views"],[1,"span"],[1,"container-views"],[1,"button-cash"],["type","button",3,"click"],[1,"footer"],[1,"button-navigation"],[1,"pagination"],[3,"click","disabled"],[3,"active","click",4,"ngFor","ngForOf"],[1,"overlay"]],template:function(i,t){if(i&1){let s=y();r(0,"main")(1,"div",1)(2,"div",2)(3,"button",3),_("click",function(){return v(s),b(t.toggle_form_add())}),l(4,"D\xE9pot "),u(5,"fa-icon",4),n(),r(6,"button",3),_("click",function(){return v(s),b(t.toggle_toView())}),l(7,"Programme "),u(8,"fa-icon",4),n(),r(9,"div",5)(10,"select",6),_("change",function(f){return v(s),b(t.onChange(f))}),r(11,"option",7),l(12),n(),g(13,ki,2,2,"option",8),n()()(),r(14,"div",9)(15,"input",10),ne("ngModelChange",function(f){return v(s),ie(t.searchTerm,f)||(t.searchTerm=f),b(f)}),n()()(),r(16,"div",11)(17,"table",12)(18,"thead")(19,"tr")(20,"th"),l(21,"N\xB0"),n(),r(22,"th"),l(23,"Dates"),n(),r(24,"th"),l(25,"Document"),n(),r(26,"th"),l(27,"Nom"),n(),r(28,"th"),l(29,"Prenom"),n(),r(30,"th"),l(31,"Telephone"),n(),r(32,"th"),l(33,"Niveau"),n(),r(34,"th"),l(35,"Filiere"),n(),r(36,"th"),l(37,"Promotion"),n(),r(38,"th"),l(39,"Action"),n()()(),r(40,"tbody"),g(41,Gi,2,1,"ng-container",13)(42,Li,3,0,"ng-template",null,0,ge),n()()(),g(44,Ri,2,1,"div",14)(45,Bi,11,0,"div",15)(46,qi,10,7,"div",16)(47,Ui,1,0,"div",17),n()}if(i&2){let s=ue(43);a(5),c("icon",t.icons.had_point_down),a(3),c("icon",t.icons.had_point_down),a(4),C("Promotion ",t.currentYear,""),a(),c("ngForOf",t.annees),a(2),te("ngModel",t.searchTerm),a(26),c("ngIf",t.filterDocs().length)("ngIfElse",s),a(3),c("ngIf",t.show_add_note),a(),c("ngIf",t.isConfirm),a(),c("ngIf",t.docs.length!==0),a(),c("ngIf",t.overlay)}},dependencies:[V,I,$,W,T,D,re,F,ht],styles:["main[_ngcontent-%COMP%]{padding:10px;height:80vh;width:100%}.col-12[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px;margin-bottom:10px;align-items:center}.btn-cont[_ngcontent-%COMP%]{display:flex;gap:10px}button[_ngcontent-%COMP%]{color:var(--secondary);font-size:14px;margin-right:10px;background-color:var(--primary);border:none}button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}select[_ngcontent-%COMP%]{height:35px;width:150px;margin-right:10px;background-color:var(--primary);color:var(--secondary);border-radius:8px;padding:0 5px;outline:none;border:none}.table-container[_ngcontent-%COMP%]{height:83%;position:relative;overflow-y:auto}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff;border-radius:10px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--tertiary);border-radius:10px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--primary)}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;text-overflow:ellipsis}td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--primary);background-color:var(--secondary);padding:5px;border-radius:4px;cursor:pointer}td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:var(--primary);color:var(--secondary)}.tablecontent[_ngcontent-%COMP%]{display:flex;margin:10px;justify-content:space-between}.raportitem[_ngcontent-%COMP%], .memoireitem[_ngcontent-%COMP%]{width:48%;cursor:pointer}h4[_ngcontent-%COMP%]{margin:0;font-size:16px;padding:10px;font-weight:600;width:100%;color:var(--primary);text-align:center}h4[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary)}#default[_ngcontent-%COMP%]{text-align:end}select[_ngcontent-%COMP%]{border:none}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;padding-bottom:10px}.button-navigation[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:flex-end}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--primary);margin-right:10px}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:10px}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px;font-size:12px;background-color:transparent;color:var(--secondary);cursor:pointer;border:1px solid var(--secondary);border-radius:50%}.pagination[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#ccc;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.disabled):not(.active){background-color:var(--secondary);color:var(--primary)}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;background-color:transparent;width:100%;height:100%;z-index:999}.isProgram[_ngcontent-%COMP%]{display:flex;gap:20px}.fa-icon[_ngcontent-%COMP%]{font-size:16px}.fa-icon[_ngcontent-%COMP%]:hover{color:var(--primary)}.x-mark[_ngcontent-%COMP%]{color:red}.isProgram[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;margin:0;font-size:12px}.container-views[_ngcontent-%COMP%]{padding:10px}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}label[_ngcontent-%COMP%]{margin-bottom:5px}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);background-color:var(--primary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.views[_ngcontent-%COMP%]{background-color:#fff;position:fixed;border:1px solid #ddd;left:50%;top:20%;right:30%;border-radius:4px;z-index:1000;box-shadow:0 4px 8px #00000026}.span[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary);font-size:14px;padding:10px;width:100%;text-align:center;border-top-left-radius:4px;border-top-right-radius:4px}"]})}}return o})();var Ve=function(o){return o.RAPPORT="rapport",o.MEMOIRE="memoire",o}(Ve||{});function $i(o,d){if(o&1&&(r(0,"option",20),l(1),n()),o&2){let e=d.$implicit;w("value",e.value),a(),x(e.key)}}function Wi(o,d){if(o&1&&(r(0,"option",20),l(1),n()),o&2){let e=d.$implicit,i=h(2);w("value",e.id),a(),ke("",e.idFiliere==null||e.idFiliere.idNiveau==null?null:e.idFiliere.idNiveau.nom," ",i.abbreviateFiliereName(e.idFiliere==null||e.idFiliere.idFiliere==null?null:e.idFiliere.idFiliere.nomFiliere)," ",e.idAnneeScolaire==null?null:e.idAnneeScolaire.ans," ")}}function Hi(o,d){if(o&1){let e=y();r(0,"div",5)(1,"select",21),_("change",function(t){v(e);let s=h();return b(s.changeClasse(t))}),r(2,"option",7),l(3,"Choisir la classe"),n(),g(4,Wi,2,4,"option",8),n()()}if(o&2){let e=h();a(),P("is-invalid",e.doc_form.get("idClasse").invalid&&e.doc_form.get("idClasse").touched),a(3),c("ngForOf",e.classRoom)}}function Ji(o,d){if(o&1&&(r(0,"button",22),l(1,"Valider "),u(2,"fa-icon",2),n()),o&2){let e=h();a(2),c("icon",e.icons.circle_check)}}function Yi(o,d){o&1&&u(0,"input",23)}function Qi(o,d){if(o&1){let e=y();r(0,"p",25),_("click",function(){v(e);let t=h(2);return b(t.teacherSelect(t.teacherFiltered))}),l(1),n()}if(o&2){let e=h(2);a(),ke("",e.teacherFiltered.nom," ",e.teacherFiltered.prenom," : ",e.teacherFiltered.telephone,"")}}function Xi(o,d){o&1&&(r(0,"p"),l(1,"Aucun encadrant trouv\xE9"),n())}function Ki(o,d){if(o&1&&(r(0,"div",24),g(1,Qi,2,3,"p")(2,Xi,2,0,"p"),n()),o&2){let e=h();a(),xe(e.teacherFiltered!=null?1:2)}}function Zi(o,d){if(o&1){let e=y();r(0,"div",32)(1,"h3",33),l(2,"Confirmation"),n(),r(3,"div",34)(4,"p"),l(5,"\xCAtes-vous s\xFBr de vouloir annuler le "),u(6,"br"),l(7," depot de ce document "),n(),r(8,"div",35)(9,"a",36),_("click",function(){v(e);let t=h(4);return b(t.exitconfirm())}),l(10,"Non"),n(),r(11,"button",36),_("click",function(){v(e);let t=h(2).$implicit,s=h(2);return b(s.confirm(t.id))}),l(12,"Oui"),n()()()()}}function en(o,d){if(o&1){let e=y();r(0,"a",30),_("click",function(){v(e);let t=h().index,s=h(2);return b(s.annuler(t))}),l(1,"Annuler"),n(),g(2,Zi,13,0,"div",31)}if(o&2){let e=h().index,i=h(2);a(2),c("ngIf",i.isConfirm&&e===i.indexSelect)}}function tn(o,d){o&1&&(r(0,"p"),l(1,"---"),n())}function nn(o,d){if(o&1){let e=y();r(0,"tr")(1,"td",27)(2,"input",28),_("change",function(t){let s=v(e).$implicit,p=h(2);return b(p.student_check(s.id,t))}),n()(),r(3,"td"),l(4),n(),r(5,"td"),l(6),n(),r(7,"td",29),l(8),n(),r(9,"td",29),l(10),n(),r(11,"td"),l(12),n(),r(13,"td"),g(14,en,3,1)(15,tn,2,0,"p"),n()()}if(o&2){let e=d.$implicit,i=h(2);a(2),c("checked",i.isChecked(e.id))("disabled",i.disabledStudentIds.includes(e.id)),a(2),x(e.idEtudiant.nom),a(2),x(e.idEtudiant.prenom),a(),w("title",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idFiliere==null?null:e.idClasse.idFiliere.idFiliere.nomFiliere),a(),C(" ",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idNiveau==null?null:e.idClasse.idFiliere.idNiveau.nom,""),a(),w("title",e.idClasse.idFiliere==null||e.idClasse.idFiliere.idFiliere==null?null:e.idClasse.idFiliere.idFiliere.nomFiliere),a(),C(" ",i.abbreviateFiliereName(e.idClasse.idFiliere==null||e.idClasse.idFiliere.idFiliere==null?null:e.idClasse.idFiliere.idFiliere.nomFiliere),""),a(2),x(e.idEtudiant.telephone),a(2),xe(i.disabledStudentIds.includes(e.id)?14:15)}}function on(o,d){if(o&1&&(N(0),g(1,nn,16,10,"tr",26),A()),o&2){let e=h();a(),c("ngForOf",e.filteredInscriptions())}}function rn(o,d){o&1&&(r(0,"tr")(1,"td",37),l(2,"Aucun document trouv\xE9"),n()())}var _o=(()=>{class o{constructor(e,i,t,s,p,f,E,ee,we){this.fb=e,this.studentService=i,this.inscriptionService=t,this.icons=s,this.toastr=p,this.sidebarService=f,this.pageTitle=E,this.teacherService=ee,this.classService=we,this.searchTerm="",this.inscriptions=[],this.filteredItem=[],this.classRoom=[],this.disabledStudentIds=[],this.numberStuden=[1,2],this.student_checked=[],this.classeDocs=[],this.isShow_add_student=!1,this.isConfirm=!1,this.show_classe=!1,this.teach=!1,this.docTypes=[]}ngOnInit(){this.load_form(),this.getTypesOptions(),this.doc_form.get("teacher")?.valueChanges.pipe(Ie(1e3)).subscribe(e=>{console.log(e,"value forr"),this.teacherService.getFilteredTeachers(+e).subscribe(i=>{this.teacherFiltered=i,this.teach=!0,console.log(this.teacherFiltered,"teacher filtered")})}),this.admin=Q()?.der,this.sidebarService.currentSearchTerm.subscribe(e=>{this.searchTerm=e,this.filteredInscriptions()})}load_form(){this.doc_form=this.fb.group({idClasse:["",S.required],docType:["",S.required],idEncadrant:["",S.required],teacher:["",S.required]})}load_students(e,i){console.log(i,"idClasse"),this.inscriptionService.getInscriptionsIdClasse(e,i).subscribe(t=>{this.inscriptions=t,console.log(this.inscriptions,"students"),this.getAllDocsByClass(i,this.inscriptions)})}teacherSelect(e){this.doc_form.get("idEncadrant")?.setValue(e.idEnseignant),this.teach=!1}changeDocType(e){e.target.value==Ve.RAPPORT.toString()?this.classService.getListClassByTypeDoc(1).subscribe(s=>{this.classRoom=s,this.classRoom.forEach(p=>{let f=new Date(p.idAnneeScolaire?.finAnnee);p.idAnneeScolaire.ans=f.getFullYear(),console.log(p.idAnneeScolaire?.ans,"pro")}),this.show_classe=!0}):this.classService.getListClassByTypeDoc(2).subscribe(s=>{this.classRoom=s,this.classRoom.forEach(p=>{let f=new Date(p.idAnneeScolaire?.finAnnee);p.idAnneeScolaire.ans=f.getFullYear(),console.log(p.idAnneeScolaire?.ans,"pro")}),this.show_classe=!0,console.log(this.classRoom,"-------classroom")})}changeClasse(e){this.isShow_add_student=!0;let i=e.target.value;this.classe=this.classRoom.find(t=>t.id==i),this.load_students(this.classe?.idAnneeScolaire?.id,this.classe?.id)}submit(){if(this.student_checked.length===0){console.log(this.student_checked,"cheked"),this.toastr.warning("Veillez choisir au moins un \xE9tudiant","Avertissement");return}let e=[],i=this.doc_form.value;e=this.inscriptions.filter(p=>this.student_checked.includes(p));let s={idDocument:{docType:i.docType,idEncadrant:this.teacherFiltered},idAdmin:this.admin,idInscription:e};console.log(s,"doc"),this.doc_form.valid?this.studentService.addDoc(s).subscribe({next:p=>{this.pageTitle.showSuccessToast(p.message),this.student_checked=[],this.getAllDocsByClass(this.classe.id,e)},error:p=>{this.pageTitle.showErrorToast(p.error.message)}}):(this.student_checked=[],this.doc_form.markAllAsTouched())}annuler(e){this.indexSelect=e,this.isConfirm=!0}exitconfirm(){this.isConfirm=!1}confirm(e){this.inscriptionService.annulerDepot(e).subscribe({next:i=>{this.pageTitle.showSuccessToast(i.message),this.getAllDocsByClass(this.classe.id,this.inscriptions)},error:i=>{this.pageTitle.showErrorToast(i.error.message)}})}getAllDocsByClass(e,i){this.studentService.getAllDocByClasse(e).subscribe(t=>{this.classeDocs=t,console.log(t,"all docs by class"),this.disableCheckbox(this.classeDocs,i)})}disableCheckbox(e,i){return e.forEach(t=>{console.log(t.idInscription,"les etudiant"),t.idInscription.forEach(s=>{let p=i.find(f=>f.id==s.id);p&&t.idDocument.deleted===!1&&(this.disabledStudentIds.push(p.id),console.log(this.disabledStudentIds,"id cores"))})}),this.disabledStudentIds}student_check(e,i){let t=this.inscriptions.find(p=>p.id==e);i.target.checked?this.student_checked.length<2?this.student_checked.some(p=>p.id==e)||(this.student_checked.push(t),console.log(this.student_checked,"id checked")):(this.student_checked=[],this.student_checked.push(t)):this.student_checked=[]}isChecked(e){return this.student_checked.some(i=>i.id==e)}getTypesOptions(){Object.keys(Ve).map(i=>({key:i,value:Ve[i]})).forEach(i=>{this.docTypes.push(i)})}goBack(){window.history.back()}abbreviateFiliereName(e){return e.split(" ").filter(s=>s.length>3).map(s=>s[0].toUpperCase()).join("")}filteredInscriptions(){return this.searchTerm?this.filteredItem=this.inscriptions.filter(e=>e.idEtudiant.nom.toLowerCase().includes(this.searchTerm)||e.idEtudiant.telephone.toString().toLowerCase().includes(this.searchTerm.toLowerCase())||e.idEtudiant.prenom.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredItem=this.inscriptions}static{this.\u0275fac=function(i){return new(i||o)(m(q),m(U),m(Pe),m(O),m(at),m(J),m(G),m(Y),m(Me))}}static{this.\u0275cmp=M({type:o,selectors:[["app-add-doc"]],decls:40,vars:14,consts:[["noResults",""],[1,"back-button",3,"click"],[3,"icon"],[1,"form-input"],[3,"ngSubmit","formGroup"],[1,"form","form-group"],["formControlName","docType",3,"change"],["disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["class","form form-group",4,"ngIf"],["type","submit",4,"ngIf"],[1,"form-group"],["type","number","formControlName","idEncadrant",4,"ngIf"],["type","text","formControlName","teacher","placeholder","Veillez saisir le N\xB0...",1,"form-control"],["class","views",4,"ngIf"],[1,"input-search"],["type","text","placeholder","Recherche...",1,"search-input",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"table","table-hover"],[4,"ngIf","ngIfElse"],[3,"value"],["id","classe","formControlName","idClasse",3,"change"],["type","submit"],["type","number","formControlName","idEncadrant"],[1,"views"],[3,"click"],[4,"ngFor","ngForOf"],[1,"numerotation-clumn"],["type","checkbox",3,"change","checked","disabled"],[3,"title"],["id","annuler",3,"click"],["class","views-confirmed",4,"ngIf"],[1,"views-confirmed"],[1,"span"],[1,"container-views"],[1,"button-cash"],["type","button",3,"click"],["colspan","9",1,"text-center"]],template:function(i,t){if(i&1){let s=y();r(0,"main")(1,"div",1),_("click",function(){return v(s),b(t.goBack())}),u(2,"fa-icon",2),n(),r(3,"div",3)(4,"form",4),_("ngSubmit",function(){return v(s),b(t.submit())}),r(5,"div",5)(6,"select",6),_("change",function(f){return v(s),b(t.changeDocType(f))}),r(7,"option",7),l(8,"Doccument"),n(),g(9,$i,2,2,"option",8),n()(),g(10,Hi,5,3,"div",9)(11,Ji,3,1,"button",10),r(12,"div",11),g(13,Yi,1,0,"input",12),u(14,"input",13),g(15,Ki,3,1,"div",14),n()(),r(16,"div",15)(17,"input",16),ne("ngModelChange",function(f){return v(s),ie(t.searchTerm,f)||(t.searchTerm=f),b(f)}),n()()(),r(18,"div",17)(19,"table",18)(20,"thead")(21,"tr")(22,"th"),l(23,"Selection"),n(),r(24,"th"),l(25,"Nom"),n(),r(26,"th"),l(27,"Prenom"),n(),r(28,"th"),l(29,"Niveau"),n(),r(30,"th"),l(31,"Filiere"),n(),r(32,"th"),l(33,"Telephone"),n(),r(34,"th"),l(35,"Doccument"),n()()(),r(36,"tbody"),g(37,on,2,1,"ng-container",19)(38,rn,3,0,"ng-template",null,0,ge),n()()()()}if(i&2){let s,p=ue(39);a(2),c("icon",t.icons.back),a(2),c("formGroup",t.doc_form),a(2),P("is-invalid",t.doc_form.get("docType").invalid&&t.doc_form.get("docType").touched),a(3),c("ngForOf",t.docTypes),a(),c("ngIf",t.show_classe),a(),c("ngIf",t.isShow_add_student&&t.inscriptions.length),a(2),c("ngIf",!1),a(),P("is-invalid",((s=t.doc_form.get("teacher"))==null?null:s.invalid)&&((s=t.doc_form.get("teacher"))==null?null:s.touched)),a(),c("ngIf",t.teach),a(2),te("ngModel",t.searchTerm),a(20),c("ngIf",t.filteredInscriptions().length)("ngIfElse",p)}},dependencies:[V,I,R,$,W,T,fe,ae,D,L,re,B,z,F],styles:["main[_ngcontent-%COMP%]{margin-top:10px;width:100%;height:80vh}.form-input[_ngcontent-%COMP%]{padding:0 10px;width:100%;display:flex;justify-content:space-between;margin-bottom:10px}form[_ngcontent-%COMP%]{display:flex;gap:10px}select[_ngcontent-%COMP%]{height:35px;width:120px;margin-right:10px;background-color:var(--primary);color:var(--secondary);border-radius:8px;padding:0 5px;outline:none;border:none}#classe[_ngcontent-%COMP%]{height:35px;width:180px;margin-right:10px;background-color:var(--primary);color:var(--secondary);border-radius:8px;padding:0 5px;outline:none;border:none}.is-invalid[_ngcontent-%COMP%]{border:1px solid red}.col-12[_ngcontent-%COMP%]{gap:10px;padding:0 10px}.student-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.table-container[_ngcontent-%COMP%]{height:70%;position:relative;overflow-y:auto}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#fff;position:sticky;top:0;z-index:1}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff;border-radius:10px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--tertiary);border-radius:10px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--primary)}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;text-overflow:ellipsis}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;box-shadow:0 4px 8px #0000001a;border-radius:5px;background-color:var(--secondary);width:90px;color:var(--primary);cursor:pointer;opacity:.3}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary);transition:background-color .3s ease;opacity:1}td[_ngcontent-%COMP%]   #annuler[_ngcontent-%COMP%]{text-decoration:none;padding:5px 10px;font-size:14px;width:120px;cursor:pointer;border-radius:5px;color:var(--primary);border:1px solid var(--primary)}td[_ngcontent-%COMP%]   #annuler[_ngcontent-%COMP%]:hover{transition:color .3s ease-in-out;background-color:var(--primary);color:var(--secondary)}.views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;border-radius:4px;left:50%;padding:15px;z-index:1000;box-shadow:0 4px 8px #00000026}p[_ngcontent-%COMP%]{margin:0}.views[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;cursor:pointer}.views[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:var(--primary)}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border:1px solid var(--primary);box-shadow:0 0 5px var(--primary)}.container-views[_ngcontent-%COMP%]{padding:10px}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);background-color:var(--primary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.views-confirmed[_ngcontent-%COMP%]{background-color:#fff;position:absolute;left:53%;right:22%;border-radius:4px;z-index:1000;box-shadow:0 4px 8px #00000026}.span[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary);font-size:14px;padding:10px;width:100%;text-align:center;border-top-left-radius:4px;border-top-right-radius:4px}"]})}}return o})();var $e=()=>({color:"red"});function an(o,d){o&1&&u(0,"input",21)}function ln(o,d){o&1&&(r(0,"span",22),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,$e))}function sn(o,d){o&1&&(r(0,"span",22),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,$e))}function cn(o,d){o&1&&u(0,"input",28)}function dn(o,d){if(o&1){let e=y();r(0,"p",32),_("click",function(){let t=v(e).$implicit,s=h(3);return b(s.selectTeacher(t))}),l(1),n()}if(o&2){let e=d.$implicit;a(),j("",e.nom," ",e.prenom,"")}}function pn(o,d){o&1&&(r(0,"p"),l(1,"Aucun enseignant trouv\xE9."),n())}function mn(o,d){if(o&1&&(r(0,"div",29),g(1,dn,2,2,"p",30)(2,pn,2,0,"p",31),n()),o&2){let e=h(2);a(),c("ngForOf",e.teachers),a(),c("ngIf",e.teachers.length===0)}}function un(o,d){o&1&&(r(0,"span",22),l(1," Champ obligatoire* "),n()),o&2&&c("ngStyle",k(1,$e))}function gn(o,d){if(o&1){let e=y();r(0,"div")(1,"div",23),g(2,cn,1,0,"input",24),r(3,"input",25),_("focus",function(){let t=v(e).index,s=h();return b(s.setSelectedJuryIndex(t))}),n(),g(4,mn,3,2,"div",26)(5,un,2,2,"span",10),u(6,"input",27),n()()}if(o&2){let e=d.$implicit,i=d.index,t=h();a(),c("formGroupName",i),a(),c("ngIf",!1),a(2),c("ngIf",t.selectedJuryIndex===i&&t.teachers.length>0),a(),c("ngIf",e.get("nomJury").invalid&&e.get("nomJury").touched)}}var Mo=(()=>{class o{constructor(e,i,t,s,p,f,E,ee){this.fb=e,this.teacherService=i,this.datePipe=t,this.pageTitle=s,this.studentService=p,this.root=f,this.icons=E,this.salleService=ee,this.closeModal=new Se,this.teachers=[],this.numberJury=[1,2,3],this.jury=[],this.selectedJuryIndex=null,this.isSalle=!1,this.isTeacher=!1,this.usedTeachers=new Set,this.juryRole=[]}ngOnInit(){this.loa_form(),this.getAllTeacher(),this.getAllSalles(),this.admin=Q()?.der}loa_form(){this.root.queryParams.subscribe(e=>{this.idDoc=e.id}),this.prog_form=this.fb.group({idDoc:[this.idDoc],date:["",S.required],heureDebut:["",S.required],heureFin:["",S.required],salle:["",S.required],jurys:this.fb.array([this.createJuryGroup("PRESIDENT"),this.createJuryGroup("RAPPORTEUR"),this.createJuryGroup("RAPPORTEUR")])})}createJuryGroup(e){return this.fb.group({nomJury:["",S.required],idTeacher:[""],role:[e]})}juryControls(){return this.prog_form.get("jurys")}submit(){this.jury=[];let e=this.prog_form.value,i=e.jurys;console.log(e,"farmData"),i.forEach(s=>{let p={role:s.role,idTeacher:s.idTeacher};this.jury.push(p)}),this.soutenance={date:e.date,heureDebut:e.heureDebut,heureFin:e.heureFin,idDoc:e.idDoc,idSalle:this.salle,idAdmin:this.admin.idAdministra};let t={jurys:this.jury,soutenance:this.soutenance};console.log(t,"souuuuuuuuuuuuuuuuu"),this.prog_form.valid?this.studentService.createSoutenance(t).subscribe({next:s=>{this.pageTitle.showSuccessToast(s.message),this.prog_form.reset(),this.loa_form()},error:s=>{this.pageTitle.showErrorToast(s.error.message)}}):(this.prog_form.markAllAsTouched(),console.log(this.prog_form.value,"inavlid"))}getAllTeacher(){this.prog_form.get("jurys").controls.forEach((i,t)=>{this.subscribeToControl(i.get("nomJury"),t)})}subscribeToControl(e,i){this.teachers=[],e?.valueChanges.pipe(Ie(1e3),He(),Ye(t=>console.log("Valeur avant switchMap:",t)),Je(t=>this.teacherService.getListFilteredTeachers(t))).subscribe(t=>{console.log(t,"resultat"),t&&t!=null&&(this.teachers=t)})}getAllSalles(){this.prog_form.get("salle")?.valueChanges.pipe(Ie(1e3)).subscribe(e=>{console.log(e,"value");var i=document.getElementById("salle-nom");i.style.display="none",this.salleService.getSalleByNom(e).subscribe(t=>{this.salle=t,i.style.display="block",console.log(this.salle,"les sales")})})}setSelectedJuryIndex(e){this.selectedJuryIndex=e}selectTeacher(e){if(this.selectedJuryIndex!==null){let i=this.juryControls().at(this.selectedJuryIndex);i.get("idTeacher")?.setValue(e.idEnseignant),i.get("nomJury")?.setValue(`${e.nom} ${e.prenom}`)}}goBack(){window.history.back()}calculateHours(){let e=new Date(this.prog_form.get("heureDebut")?.value),i=new Date(e);return i.setMinutes(e.getMinutes()+45),(i.getTime()-e.getTime())/(1e3*60*60)}heureChange(e){let i=e.target.value,t=new Date,[s,p]=i.split(":").map(Number);t.setHours(s),t.setMinutes(p),t.setSeconds(0),t.setMilliseconds(0);let f=new Date(t);f.setMinutes(f.getMinutes()+45);let E=this.datePipe.transform(f,"HH:mm");console.log(E,"hours"),this.prog_form.get("heureFin")?.setValue(E)}static{this.\u0275fac=function(i){return new(i||o)(m(q),m(Y),m(Qe),m(G),m(U),m(oe),m(O),m(X))}}static{this.\u0275cmp=M({type:o,selectors:[["app-program-soutenance"]],inputs:{idDoc:"idDoc"},outputs:{closeModal:"closeModal"},decls:35,vars:9,consts:[[1,"one-column",3,"ngSubmit","formGroup"],[1,"back-button",3,"click"],[3,"icon"],["type","number","formControlName","idDoc",4,"ngIf"],[1,"first-inputs"],[1,"form"],["for","password"],["type","date","formControlName","date","placeholder","La date",1,"form-control"],["id","salle-nom"],["type","text","formControlName","salle","placeholder","Saisir le nom de la salle",1,"form-control"],[3,"ngStyle",4,"ngIf"],[1,"form-group-heure"],["type","time","formControlName","heureDebut",1,"form-control",3,"change"],[1,"form","form-group"],["type","time","id","heureFin","formControlName","heureFin","placeholder","Heure de fin","readonly","",1,"form-control"],[1,"jury-content"],["for",""],["formArrayName","jurys"],[4,"ngFor","ngForOf"],[1,"submit-button"],["type","submit"],["type","number","formControlName","idDoc"],[3,"ngStyle"],[1,"jury-item",3,"formGroupName"],["type","number","formControlName","idTeacher",4,"ngIf"],["type","text","formControlName","nomJury","placeholder","Saisir le nom du jury",1,"form-control","nom-jury",3,"focus"],["class","views",4,"ngIf"],["type","text","formControlName","role","readonly","",1,"chose-role","form-control-plaintext"],["type","number","formControlName","idTeacher"],[1,"views"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click"]],template:function(i,t){i&1&&(r(0,"main")(1,"form",0),_("ngSubmit",function(){return t.submit()}),r(2,"div",1),_("click",function(){return t.goBack()}),u(3,"fa-icon",2),n(),g(4,an,1,0,"input",3),r(5,"div",4)(6,"div",5)(7,"label",6),l(8,"Date :"),n(),u(9,"input",7),n(),r(10,"div",5)(11,"label"),l(12,"Salles : "),r(13,"span",8),l(14),n()(),u(15,"input",9),g(16,ln,2,2,"span",10),n()(),r(17,"div",11)(18,"div",5)(19,"label"),l(20,"Heure du d\xE9but :"),n(),r(21,"input",12),_("change",function(p){return t.heureChange(p)}),n(),g(22,sn,2,2,"span",10),n(),r(23,"div",13)(24,"label",6),l(25,"Heure de fin :"),n(),u(26,"input",14),n()(),r(27,"div",15)(28,"label",16),l(29,"Membres du jury"),n(),r(30,"div",17),g(31,gn,7,4,"div",18),n()(),r(32,"div",19)(33,"button",20),l(34,"Enregistrer"),n()()()()),i&2&&(a(),c("formGroup",t.prog_form),a(2),c("icon",t.icons.back),a(),c("ngIf",!1),a(10),x(t.salle?t.salle.nom:"Acunne salle trouver"),a(2),c("ngIf",t.prog_form.controls.salle.invalid&&t.prog_form.controls.salle.touched),a(5),P("is-invalid",t.prog_form.get("heureDebut").invalid&&t.prog_form.get("heureDebut").touched),a(),c("ngIf",t.prog_form.controls.heureDebut.invalid&&t.prog_form.controls.heureDebut.touched),a(9),c("ngForOf",t.juryControls().controls))},dependencies:[V,I,he,R,T,fe,D,L,B,z,it,nt,F],styles:["main[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;height:80vh}.one-column[_ngcontent-%COMP%]{margin-top:10px;width:80%;height:100%}.first-inputs[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}.form[_ngcontent-%COMP%]{width:100%}.submit-button[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between}p[_ngcontent-%COMP%]{text-align:left;font-size:18px}.input-cont[_ngcontent-%COMP%]{display:flex;justify-content:space-between}span[_ngcontent-%COMP%]{font-size:12px}.btn-con[_ngcontent-%COMP%]{margin-top:40px}button[_ngcontent-%COMP%]{border:none;cursor:pointer;padding:5px 15px;border-radius:5px;background-color:var(--primary);color:var(--secondary)}button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.btn-contenair[_ngcontent-%COMP%]{margin-top:20px;padding-right:10px;display:flex;justify-content:end}.select-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px transparent}.form-group-heure[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}.jury-content[_ngcontent-%COMP%]{margin-top:10px;width:100%;border:1px solid var(--tertiary);border-radius:5px;padding:10px}.jury-item[_ngcontent-%COMP%]{border-radius:5px;margin-top:10px;border:1px solid var(--primary);display:flex}.select-input[_ngcontent-%COMP%]{border:none}.chose-role[_ngcontent-%COMP%]{border-bottom-right-radius:5px;border-top-right-radius:5px;color:var(--secondary);background-color:var(--primary);width:150px;text-align:center}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border:1px solid var(--primary);box-shadow:0 0 5px var(--primary)}.nom-jury[_ngcontent-%COMP%]:focus{border:none;outline:none;box-shadow:none}.nom-jury[_ngcontent-%COMP%]{border:none}.jury-item[_ngcontent-%COMP%]{display:flex}label[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:5px}#salle-nom[_ngcontent-%COMP%]{display:none;color:var(--primary)}.views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;border-radius:4px;width:300px;margin-top:45px;border:1px solid var(--tertiary);padding:15px;z-index:1000;box-shadow:0 4px 8px #00000026}.views[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;cursor:pointer}.views[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:var(--primary)}"]})}}return o})();var _t=ft(vt());function hn(o,d){if(o&1&&(l(0),u(1,"br")),o&2){let e=d.$implicit;j(" ",e.idEtudiant.nom," ",e.idEtudiant.prenom," ")}}function _n(o,d){if(o&1&&(N(0),r(1,"tr")(2,"td"),l(3),n(),r(4,"td"),pe(5,hn,2,2,"br",null,de),n(),r(7,"td"),l(8),n(),r(9,"td"),l(10),n(),r(11,"td"),l(12),n(),r(13,"td"),l(14),n()(),A()),o&2){let e=d.$implicit;a(3),x(e.id),a(2),me(e.inscriptions),a(3),x(e.filiere),a(2),x(e.niveaux),a(2),j("",e.idTeacher.nom," ",e.idTeacher.prenom,""),a(2),j("",e.heureDebut," - ",e.heureFin,"")}}function fn(o,d){if(o&1&&(N(0),g(1,_n,15,7,"ng-container",18),A()),o&2){let e=h();a(),c("ngForOf",e.soutenance)}}function vn(o,d){o&1&&(r(0,"tr")(1,"td",19),l(2,"Aucun r\xE9sultat trouv\xE9"),n()())}function bn(o,d){if(o&1&&(r(0,"p"),l(1),n()),o&2){let e=d.$implicit;a(),ke("M. ",e.teachers.nom," ",e.teachers.prenom," : ",e.role.toUpperCase(),"")}}var Io=(()=>{class o{constructor(e,i,t){this.icons=e,this.studentService=i,this.schoolService=t,this.soutenance=[],this.jurys=[]}ngOnInit(){this.load_soutenanceActif(),this.load_school(),this.admin=Q()?.der}load_soutenanceActif(){this.studentService.getAllSoutenanceActif().subscribe(e=>{e.forEach(i=>{this.salle=i.idSalle,this.date=i.date,i.heureDebut=i.heureDebut.slice(0,5).toString(),i.heureFin=i.heureFin.slice(0,5),i.idJury?.forEach(t=>{this.jurys.some(s=>s.id==t.id)||this.jurys.push(t)})}),this.soutenance=e,console.log(this.soutenance,"soutenance")})}load_school(){this.schoolService.getSchools().subscribe(e=>{this.school=e})}goBack(){window.history.back()}getCurrentDate(){let e=new Date,i={day:"numeric",month:"long",year:"numeric"};return new Intl.DateTimeFormat("fr-FR",i).format(e)}imprimer(){let e=document.getElementById("button"),i=document.getElementById("idTable");if(e&&i){e.style.display="none";let t=i.style.padding,s=i.style.height,p=i.style.overflow;i.style.padding="50px",i.style.height="auto",i.style.overflow="visible",(0,_t.default)(i,{scale:2}).then(f=>{let E=297,ee=f.height*E/f.width,we=f.toDataURL("image/png"),je=new st("l","mm","a4");je.addImage(we,"PNG",0,0,E,ee),je.save("programme-de-soutenace.pdf"),e.style.display="block",e.style.justifyContent="end",i.style.padding=t,i.style.height=s,i.style.overflow=p})}}static{this.\u0275fac=function(i){return new(i||o)(m(O),m(U),m(Ee))}}static{this.\u0275cmp=M({type:o,selectors:[["app-view-soutenance"]],decls:64,vars:8,consts:[["notFund",""],[1,"back-button",3,"click"],[3,"icon"],["id","idTable",1,"content"],[1,"conten-head"],[1,"head-left"],[1,"head-right"],[1,"head"],[1,"img-content"],["src","assets/logounivsegou.png","alt","alt"],[1,"table","table-bordered"],[4,"ngIf","ngIfElse"],[1,"tab-footer"],[1,"footer"],[1,"footer-right"],[1,"italic"],["id","button",1,"btn-container"],[3,"click"],[4,"ngFor","ngForOf"],["colspan","9",1,"text-center"]],template:function(i,t){if(i&1){let s=y();r(0,"main")(1,"div",1),_("click",function(){return v(s),b(t.goBack())}),u(2,"fa-icon",2),n(),r(3,"div",3)(4,"div",4)(5,"div",5)(6,"p"),l(7,"MINISTERE DE L'ENSEIGNEMENT SUPERIEUR "),u(8,"br"),l(9," ET DE LA RECHERCHE SCIENTIFIQUE"),n(),r(10,"span"),l(11,"-----------------------------"),n()(),r(12,"div",6)(13,"p"),l(14,"REPUBLIQUE DU MALI "),u(15,"br"),l(16," UN PEUPLE-UN BUT-UNE FOI"),n()()(),r(17,"div",7)(18,"div",8),u(19,"img",9),n(),r(20,"p"),l(21,"Institut Universitaire de Formation professionel (IUFP)"),n(),r(22,"span"),l(23),n()(),r(24,"table",10)(25,"thead")(26,"tr")(27,"th"),l(28,"N\xB0"),n(),r(29,"th"),l(30,"Etudiants"),n(),r(31,"th"),l(32,"Fili\xE8re"),n(),r(33,"th"),l(34,"Niveau"),n(),r(35,"th"),l(36,"Encadrant"),n(),r(37,"th"),l(38,"Heure"),n()()(),r(39,"tbody"),g(40,fn,2,1,"ng-container",11)(41,vn,3,0,"ng-template",null,0,ge),n()(),r(43,"span"),l(44),n(),r(45,"div",12)(46,"div",13)(47,"strong"),l(48,"Membres du jury"),n(),pe(49,bn,2,3,"p",null,de),n(),r(51,"div",14)(52,"p"),l(53),u(54,"br"),l(55," Le ch\xE9f de D\xE9partement "),n(),r(56,"p"),l(57),u(58,"br"),r(59,"span",15),l(60," Ma\xEEtre assistant"),n()()()(),r(61,"div",16)(62,"button",17),_("click",function(){return v(s),b(t.imprimer())}),l(63,"Imprimer"),n()()()()}if(i&2){let s=ue(42);a(2),c("icon",t.icons.back),a(21),C(" Soutenance : ",t.date," "),a(17),c("ngIf",t.soutenance)("ngIfElse",s),a(4),C("Salle: ",t.salle==null?null:t.salle.nom,""),a(5),me(t.jurys),a(4),C("S\xE9gou le, ",t.getCurrentDate(),""),a(4),j("Dr ",t.admin.nom.charAt(0).toLocaleUpperCase()," ",t.admin.prenom.toLocaleUpperCase(),"")}},dependencies:[V,I,F],styles:["main[_ngcontent-%COMP%]{height:80vh;width:100%}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}.content[_ngcontent-%COMP%]{padding:10px;overflow:hidden;overflow-y:auto;height:89%}.content[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff;border-radius:10px}.content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--tertiary);border-radius:10px}.content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--primary)}.conten-head[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;align-items:center}.img-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:auto}p[_ngcontent-%COMP%]{font-weight:500;margin:0}.head[_ngcontent-%COMP%]{width:100%;margin-bottom:10px;display:flex;justify-content:center;align-items:center;flex-direction:column}.tab-footer[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:20%}.tab-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:400}.footer-right[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;gap:50px}.italic[_ngcontent-%COMP%]{font-style:italic}.btn-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:end}button[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary);margin-top:10px;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary);border:none}"]})}}return o})();function xn(o,d){if(o&1&&(r(0,"option",10),l(1),n()),o&2){let e=d.$implicit;c("value",e.id),a(),x(e.nom)}}function Cn(o,d){if(o&1&&(r(0,"tr")(1,"td"),l(2),n(),r(3,"td"),l(4),n(),r(5,"td"),l(6),n(),r(7,"td"),l(8),n(),r(9,"td"),l(10),n(),r(11,"td"),l(12,"----"),n()()),o&2){let e=d.$implicit,i=d.index,t=h(2);a(2),x(i+1),a(2),x(e.idEtudiant.matricule),a(2),x(e.idEtudiant.nom),a(2),x(e.idEtudiant.prenom),a(2),C(" ",t.group.nom," ")}}function Sn(o,d){if(o&1&&g(0,Cn,13,5,"tr",11),o&2){let e=h();c("ngForOf",e.filteredInscription())}}function yn(o,d){o&1&&(r(0,"tr")(1,"td",12),l(2,"Aucune inscription pour ce groupe."),n()())}var To=(()=>{class o{constructor(e,i,t,s,p){this.studentService=e,this.sidebareSevice=i,this.inscriptionService=t,this.root=s,this.icons=p,this.searchTerm="",this.inscriptions=[],this.filteredItem=[],this.groupes=[]}ngOnInit(){this.loadStudentGroup(),this.sidebareSevice.currentSearchTerm.subscribe(e=>{this.searchTerm=e,this.filteredInscription()})}loadStudentGroup(){this.root.queryParams.subscribe(e=>{let i=e.id;this.studentService.getListGroupByIdEmploi(i).subscribe(t=>{this.groupes=t,console.log(this.groupes,"groupes")})})}changeGroup(e){let i=+e.target.value;this.load_students_by_group(+e.target.value),this.group=this.groupes.find(t=>t.id===i)}load_students_by_group(e){this.inscriptionService.getListInscriptionByIdGroup(e).subscribe(i=>{this.inscriptions=i})}goBack(){window.history.back()}filteredInscription(){return this.searchTerm?this.filteredItem=this.inscriptions.filter(e=>e.idEtudiant.nom.toLowerCase().includes(this.searchTerm.toLowerCase())||e.idEtudiant.prenom.toLowerCase().includes(this.searchTerm.toLowerCase())):this.filteredItem=this.inscriptions}static{this.\u0275fac=function(i){return new(i||o)(m(U),m(J),m(Pe),m(oe),m(O))}}static{this.\u0275cmp=M({type:o,selectors:[["app-student-group-list"]],decls:31,vars:4,consts:[[1,"back-button",3,"click"],[3,"icon"],[1,"head"],[1,"left"],[3,"change"],["disabled","","selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"input-search"],["type","text","placeholder","Recherche...",1,"search-input",3,"ngModelChange","ngModel"],[1,"table","table-hover"],[3,"value"],[4,"ngFor","ngForOf"],["colspan","9",1,"text-center"]],template:function(i,t){i&1&&(r(0,"main")(1,"div",0),_("click",function(){return t.goBack()}),u(2,"fa-icon",1),n(),r(3,"div",2)(4,"div",3)(5,"select",4),_("change",function(p){return t.changeGroup(p)}),r(6,"option",5),l(7,"Groupe"),n(),g(8,xn,2,2,"option",6),n(),r(9,"button"),l(10,"Imprimer"),n()(),r(11,"div",7)(12,"input",8),ne("ngModelChange",function(p){return ie(t.searchTerm,p)||(t.searchTerm=p),p}),n()()(),r(13,"table",9)(14,"thead")(15,"tr")(16,"th"),l(17,"N\xB0"),n(),r(18,"th"),l(19,"Matricule"),n(),r(20,"th"),l(21,"Nom"),n(),r(22,"th"),l(23,"Pr\xE9nom"),n(),r(24,"th"),l(25,"Groupe"),n(),r(26,"th"),l(27,"Emargement"),n()()(),r(28,"tbody"),g(29,Sn,1,1,"tr")(30,yn,3,0,"tr"),n()()()),i&2&&(a(2),c("icon",t.icons.back),a(6),c("ngForOf",t.groupes),a(4),te("ngModel",t.searchTerm),a(17),xe(t.filteredInscription().length?29:30))},dependencies:[V,$,W,T,D,re,F],styles:["table[_ngcontent-%COMP%]{margin-top:10px}main[_ngcontent-%COMP%]{width:100%;height:80vh;padding:10px}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}select[_ngcontent-%COMP%]{border:none}select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}select[_ngcontent-%COMP%]{height:35px;width:100px;background-color:var(--primary);color:var(--secondary);border-radius:8px;padding:0 5px;outline:none;border:none}button[_ngcontent-%COMP%]{width:100px;height:35px;margin-left:10px;border:none;background-color:var(--primary);color:var(--secondary);padding:0 5px;border-radius:8px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.head[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}"]})}}return o})();export{kn as a,Dn as b,Gn as c,Un as d,Jn as e,Qn as f,eo as g,lo as h,_o as i,Mo as j,Io as k,To as l};
