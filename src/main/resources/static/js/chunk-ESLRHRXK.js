import{a as F}from"./chunk-63PPI6N3.js";import{A as c,Bb as Q,C as a,Cb as W,D as u,Db as X,Fa as k,Ga as p,Ha as q,I as o,Ia as D,J as i,K as g,Na as V,O as b,Pa as j,Q as P,Qa as A,Ta as R,U as r,Ua as L,V as w,Va as z,Wa as B,X as O,Xa as G,Ya as U,Za as H,ba as d,cb as Y,g as C,k as _,m as y,ma as I,na as x,o as E,oa as M,pb as $,qb as J,sa as T,t as N,vb as Z,x as l,y as S,zb as K}from"./chunk-Q3UIBATL.js";var ee=(()=>{class t{constructor(n,s){this.http=n,this.loadingService=s,this.baseUrl=`${Y.apiUrl}api-student/add`}singIn(n,s){this.loadingService.loading();let e=new FormData;return e.append("inscription",JSON.stringify(n)),e.append("file",s),this.http.post(this.baseUrl,e).pipe(C(()=>{this.loadingService.stopLoading()}))}static{this.\u0275fac=function(s){return new(s||t)(y(T),y($))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var oe=()=>({cursor:"pointer",right:"10px",top:"50%",transform:"translateY(-50%)"}),f=()=>({color:"red"});function re(t,m){t&1&&(o(0,"span",35),r(1," Champ obligatoire* "),i()),t&2&&a("ngStyle",d(1,f))}function ae(t,m){t&1&&(o(0,"span",35),r(1," Champ obligatoire* "),i()),t&2&&a("ngStyle",d(1,f))}function le(t,m){t&1&&(o(0,"span",35),r(1," Champ bligatoire* "),i()),t&2&&a("ngStyle",d(1,f))}function se(t,m){t&1&&(o(0,"span",35),r(1," Maximum 12 caract\xE8res (lettres et chiffres) autoris\xE9s* "),i()),t&2&&a("ngStyle",d(1,f))}function me(t,m){t&1&&(o(0,"span",35),r(1," Champ bligatoire* "),i()),t&2&&a("ngStyle",d(1,f))}function de(t,m){t&1&&(o(0,"span",35),r(1," Champ obligatoire* "),i()),t&2&&a("ngStyle",d(1,f))}function pe(t,m){t&1&&(o(0,"span",35),r(1," Ce champ obligatoire* "),i()),t&2&&a("ngStyle",d(1,f))}function ce(t,m){t&1&&(o(0,"span",35),r(1," Ce champ obligatoire* "),i()),t&2&&a("ngStyle",d(1,f))}function ue(t,m){t&1&&(o(0,"span",35),r(1," Champ obligatoire* "),i()),t&2&&a("ngStyle",d(1,f))}function fe(t,m){t&1&&(o(0,"span",35),r(1," Maximum 8 chiffres autoris\xE9s* "),i()),t&2&&a("ngStyle",d(1,f))}function ge(t,m){t&1&&(o(0,"span",35),r(1," Champ obligatoire* "),i()),t&2&&a("ngStyle",d(1,f))}function he(t,m){if(t&1&&(o(0,"option",36),r(1),i()),t&2){let n=m.$implicit;a("value",n.value),l(),w(n.key)}}function ve(t,m){if(t&1&&(o(0,"option",36),r(1),i()),t&2){let n=m.$implicit;a("value",n.id),l(),O("",n.idFiliere==null||n.idFiliere.idNiveau==null?null:n.idFiliere.idNiveau.nom," ",n.idFiliere==null||n.idFiliere.idFiliere==null?null:n.idFiliere.idFiliere.nomFiliere,"")}}function Se(t,m){t&1&&(o(0,"span",35),r(1," Champ obligatoire* "),i()),t&2&&a("ngStyle",d(1,f))}var Ve=(()=>{class t{constructor(n,s,e,h,v,te){this.formBuilder=n,this.pageTitle=s,this.service=e,this.icons=h,this.infoSchool=v,this.classeService=te,this.studentStatusOptions=[],this.titleEvent=new N,this.classRoom=[],this.anneeScolaire=[],this.passwordVisible=!1}ngOnInit(){this.studentStatusOptions=this.getStatusOptions(),this.studentForm=this.formBuilder.group({nom:["",p.required],prenom:["",p.required],sexe:["",p.required],email:["",[p.required,p.email]],telephone:["",p.required],password:["",p.required],urlPhoto:["",p.required],matricule:["",p.required],status:["",p.required],idClasse:["",p.required],lieuNaissance:["",p.required],dateNaissance:["",p.required]}),this.classeService.getAllCurrentClassOfYear().subscribe(n=>{this.classRoom=n,console.log(this.classRoom)}),this.load_all_annee()}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}load_all_annee(){this.infoSchool.getAll_annee().subscribe(n=>{this.anneeScolaire=n,this.anneeScolaire.forEach(s=>{let h=new Date(s.debutAnnee).getFullYear();s.ans=h})})}onFileSelected(n){this.fileName=n.target.files[0]}getStatusOptions(){return Object.keys(F).map(n=>({key:n,value:F[n]}))}singin(){let n=this.studentForm.value;console.log("fom",n),this.admin=W()?.scolarite;let s=this.classRoom.find(v=>v.id===+n.idClasse),h={idEtudiant:{nom:n.nom,prenom:n.prenom,sexe:n.sexe,email:n.email,status:n.status,telephone:n.telephone,password:n.password,matricule:n.matricule,lieuNaissance:n.lieuNaissance,dateNaissance:n.dateNaissance},idClasse:s,idAdmin:this.admin};console.log(h,"student"),this.studentForm.valid?this.service.singIn(h,this.fileName).subscribe({next:v=>{this.pageTitle.showSuccessToast(v.message),this.studentForm.reset()},error:v=>{this.pageTitle.showErrorToast(v.error.message)}}):(this.studentForm.markAllAsTouched(),console.log("Veuillez remplir tous les champs correctement!"))}goBack(){window.history.back()}static{this.\u0275fac=function(s){return new(s||t)(S(H),S(X),S(ee),S(J),S(K),S(Q))}}static{this.\u0275cmp=E({type:t,selectors:[["app-singin"]],outputs:{titleEvent:"titleEvent"},decls:85,vars:41,consts:[["enctype","multipart/form-data",3,"ngSubmit","formGroup"],[1,"contenaires"],[1,"chil"],[1,"input"],["for","validationDefault01",1,"label","form-label"],["type","text","formControlName","nom","id","nom","placeholder","Nom de l'etudiant....",1,"input-with","form-control"],[3,"ngStyle",4,"ngIf"],["for","validationDefault02",1,"label","form-label"],["type","text","formControlName","prenom","id","prenom","placeholder","Prenom de l'etudiant....",1,"input-with","form-control"],["type","text","formControlName","matricule","pattern","[a-zA-Z0-9]{1,12}","placeholder","Numero matricule....",1,"input-with","form-control"],[1,"label","form-label"],["type","email","formControlName","email","placeholder","Email...",1,"input-with","form-control"],[1,"radio-button"],[1,"form-check","form-check-inline"],["type","radio","formControlName","sexe","id","inlineRadio1","value","Homme","required","",1,"form-check-input"],["for","inlineRadio1",1,"form-check-label"],["type","radio","formControlName","sexe","id","inlineRadio2","value","Femme","required","",1,"form-check-input"],["for","inlineRadio2",1,"form-check-label"],[1,"pass-chec","position-relative"],["formControlName","password","id","password","placeholder","Mot de passe....",1,"form-control",3,"type"],["id","togglePassword",1,"toggle-password","position-absolute",3,"click","icon","ngStyle"],["for","validationDefault03",1,"label","form-label"],["type","date","formControlName","dateNaissance","placeholder","Date de naissance....",1,"input-with","form-control"],["for","validationDefault0",1,"label","form-label"],["type","text","formControlName","lieuNaissance","placeholder","Lieu de naissance....",1,"form-control"],["for","telephone",1,"label","form-label"],["type","text","formControlName","telephone","pattern","[0-9]{1,8}","placeholder","Numero de telephone....",1,"form-control"],["for","validationDefault05",1,"label","form-label"],["type","file","formControlName","urlPhoto","accept","image/*","id","inputPhoto","required","",1,"input-with","form-control",3,"change"],["formControlName","status",1,"form-select"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","idClasse","placeholder","Choisir une classe....","id","select-modules-multiple",1,"form-select"],[1,"col-12"],["type","submit",1,"btn"],[3,"ngStyle"],[3,"value"]],template:function(s,e){s&1&&(o(0,"main")(1,"form",0),b("ngSubmit",function(){return e.singin()}),o(2,"div",1)(3,"div",2)(4,"div",3)(5,"label",4),r(6,"Nom :"),i(),g(7,"input",5),c(8,re,2,2,"span",6),i(),o(9,"div",3)(10,"label",7),r(11,"Prenom :"),i(),g(12,"input",8),c(13,ae,2,2,"span",6),i(),o(14,"div",3)(15,"label",7),r(16,"Matricule :"),i(),g(17,"input",9),c(18,le,2,2,"span",6)(19,se,2,2,"span",6),i(),o(20,"div",3)(21,"label",10),r(22,"Email :"),i(),g(23,"input",11),c(24,me,2,2,"span",6),i(),o(25,"div",3)(26,"label",10),r(27,"Sexe :"),i(),o(28,"div",12)(29,"div",13),g(30,"input",14),o(31,"label",15),r(32,"Homme"),i()(),o(33,"div",13),g(34,"input",16),o(35,"label",17),r(36,"Femme"),i()()()()(),o(37,"div",2)(38,"div",3)(39,"label",7),r(40,"Mot de Passe :"),i(),o(41,"div",18),g(42,"input",19),c(43,de,2,2,"span",6),o(44,"fa-icon",20),b("click",function(){return e.togglePasswordVisibility()}),i()()(),o(45,"div",3)(46,"label",21),r(47,"Date de Naissance :"),i(),g(48,"input",22),c(49,pe,2,2,"span",6),i(),o(50,"div",3)(51,"label",23),r(52,"Lieu de Naissance :"),i(),g(53,"input",24),c(54,ce,2,2,"span",6),i(),o(55,"div",3)(56,"label",25),r(57,"T\xE9l\xE9phone :"),i(),g(58,"input",26),c(59,ue,2,2,"span",6)(60,fe,2,2,"span",6),i()(),o(61,"div",2)(62,"div",3)(63,"label",27),r(64,"Photo :"),i(),o(65,"input",28),b("change",function(v){return e.onFileSelected(v)}),i(),c(66,ge,2,2,"span",6),i(),o(67,"div",3)(68,"label"),r(69,"Status : "),i(),o(70,"select",29)(71,"option",30),r(72,"Choisir Le status"),i(),c(73,he,2,2,"option",31),i()(),o(74,"div",3)(75,"label",21),r(76,"Classe :"),i(),o(77,"select",32)(78,"option",30),r(79,"Choisir La classe"),i(),c(80,ve,2,3,"option",31),i(),c(81,Se,2,2,"span",6),i()()(),o(82,"div",33)(83,"button",34),r(84,"Enregistrer"),i()()()()),s&2&&(l(),a("formGroup",e.studentForm),l(6),u("is-invalid",e.studentForm.get("nom").invalid&&e.studentForm.get("nom").touched),l(),a("ngIf",e.studentForm.controls.nom.invalid&&e.studentForm.controls.nom.touched),l(4),u("is-invalid",e.studentForm.get("prenom").invalid&&e.studentForm.get("prenom").touched),l(),a("ngIf",e.studentForm.controls.prenom.invalid&&e.studentForm.controls.prenom.touched),l(4),u("is-invalid",e.studentForm.get("matricule").invalid&&e.studentForm.get("matricule").touched),l(),a("ngIf",e.studentForm.controls.matricule.invalid&&e.studentForm.controls.matricule.touched),l(),a("ngIf",e.studentForm.controls.matricule.hasError("pattern")&&!e.studentForm.controls.matricule.hasError("required")),l(4),u("is-invalid",e.studentForm.get("email").invalid&&e.studentForm.get("email").touched),l(),a("ngIf",e.studentForm.controls.email.invalid&&e.studentForm.controls.email.touched),l(18),u("is-invalid",e.studentForm.get("password").invalid&&e.studentForm.get("password").touched),P("type",e.passwordVisible?"text":"password"),l(),a("ngIf",e.studentForm.controls.password.invalid&&e.studentForm.controls.password.touched),l(),a("icon",e.passwordVisible?e.icons.eyeSlash:e.icons.eye)("ngStyle",d(40,oe)),l(4),u("is-invalid",e.studentForm.get("dateNaissance").invalid&&e.studentForm.get("dateNaissance").touched),l(),a("ngIf",e.studentForm.controls.dateNaissance.invalid&&e.studentForm.controls.dateNaissance.touched),l(4),u("is-invalid",e.studentForm.get("lieuNaissance").invalid&&e.studentForm.get("lieuNaissance").touched),l(),a("ngIf",e.studentForm.controls.lieuNaissance.invalid&&e.studentForm.controls.lieuNaissance.touched),l(4),u("is-invalid",e.studentForm.get("telephone").invalid&&e.studentForm.get("telephone").touched),l(),a("ngIf",e.studentForm.controls.telephone.hasError("required")&&e.studentForm.controls.telephone.touched),l(),a("ngIf",e.studentForm.controls.telephone.hasError("pattern")&&!e.studentForm.controls.telephone.hasError("required")),l(5),u("is-invalid",e.studentForm.get("urlPhoto").invalid&&e.studentForm.get("urlPhoto").touched),l(),a("ngIf",e.studentForm.controls.urlPhoto.invalid&&e.studentForm.controls.urlPhoto.touched),l(4),u("is-invalid",e.studentForm.get("status").invalid&&e.studentForm.get("status").touched),l(3),a("ngForOf",e.studentStatusOptions),l(4),u("is-invalid",e.studentForm.get("idClasse").invalid&&e.studentForm.get("idClasse").touched),l(3),a("ngForOf",e.classRoom),l(),a("ngIf",e.studentForm.controls.idClasse.invalid&&e.studentForm.controls.idClasse.touched))},dependencies:[I,x,M,V,z,B,k,L,j,q,D,G,U,A,R,Z],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:column}button[_ngcontent-%COMP%]{color:var(--secondary);margin-top:20px;background-color:var(--primary);border:none}button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}form[_ngcontent-%COMP%]{width:100%;padding:10px;justify-content:center;border-radius:8px}.input[_ngcontent-%COMP%]{margin-top:10px}.label[_ngcontent-%COMP%]{font-weight:700;margin-right:30px}.chil[_ngcontent-%COMP%]{width:30%}.position-relative[_ngcontent-%COMP%]{position:relative}.position-absolute[_ngcontent-%COMP%]{position:absolute}.radio-button[_ngcontent-%COMP%]{display:flex}a[_ngcontent-%COMP%]{color:#6565fd}#btn-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:20%;margin-top:10px}.contenaires[_ngcontent-%COMP%]{display:flex;justify-content:space-between}label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:var(--tertiary);font-weight:300}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px var(--primary)}"]})}}return t})();export{Ve as a};
