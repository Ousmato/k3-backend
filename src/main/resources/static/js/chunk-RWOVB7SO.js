import{a as j}from"./chunk-YPOCFZ2S.js";import{A as _,Ba as _e,Bb as re,C as s,Cb as ge,D as S,Db as V,Fa as z,Ga as h,Ha as F,I as i,Ia as T,J as o,K as u,L as b,M as w,N as C,Na as I,O as p,Oa as $,P as m,Q as pe,Qa as A,Ta as k,U as a,Ua as J,V as W,Va as U,W as E,Wa as G,X as D,Ya as ue,Za as N,ba as Y,ma as L,na as M,o as y,oa as oe,qb as P,r as g,s as f,t as q,vb as O,w as me,x as l,y as v,zb as R}from"./chunk-Q3UIBATL.js";import{d as de}from"./chunk-OXVY4BEJ.js";var ae=function(n){return n.L1="LICENCE 1",n.L2="LICENCE 2",n.L3="LICENCE 3",n.M1="MASTER 1",n.M2="MASRER 2",n}(ae||{});function be(n,d){if(n&1&&(i(0,"option",19),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),W(e.nom)}}function we(n,d){n&1&&u(0,"input",20)}function Ee(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"Le nom de l'UE est requis."),o()())}function ye(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"Le nom de l'UE ne doit pas d\xE9passer 40 caract\xE8res."),o()())}function Me(n,d){if(n&1&&(i(0,"div",21),_(1,Ee,3,0,"div",0)(2,ye,3,0,"div",0),o()),n&2){let e,r,t=m(2);l(),s("ngIf",(e=t.formUpdate.get("nom").errors)==null?null:e.required),l(),s("ngIf",(r=t.formUpdate.get("nom").errors)==null?null:r.maxlength)}}function Pe(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Modifier Niveau"),o(),i(4,"form",8),p("ngSubmit",function(){g(e);let t=m();return f(t.update_niveau())}),i(5,"div",9)(6,"select",10),p("change",function(t){g(e);let c=m();return f(c.onChange(t))}),i(7,"option",11),a(8,"Choisir Le Niveau"),o(),_(9,be,2,2,"option",12),o(),_(10,we,1,0,"input",13),u(11,"input",14),_(12,Me,3,2,"div",15),i(13,"div",16)(14,"a",17),p("click",function(){g(e);let t=m();return f(t.exitUpdate())}),i(15,"span"),a(16,"Annuler"),o()(),i(17,"button",18)(18,"span"),a(19,"Suivant"),o(),u(20,"fa-icon",4),o()()()()(),w()}if(n&2){let e=m();l(4),s("formGroup",e.formUpdate),l(5),s("ngForOf",e.niveaux),l(),s("ngIf",!1),l(2),s("ngIf",e.formUpdate.get("nom").invalid&&e.formUpdate.get("nom").touched),l(8),s("icon",e.icons.nexte_circle)}}function Oe(n,d){if(n&1&&(i(0,"option",19),a(1),o()),n&2){let e=d.$implicit;s("value",e.value),l(),W(e.key)}}function Fe(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"Le nom est requis."),o()())}function Te(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"Le nom ne doit pas d\xE9passer 40 caract\xE8res."),o()())}function Ie(n,d){if(n&1&&(i(0,"div",21),_(1,Fe,3,0,"div",0)(2,Te,3,0,"div",0),o()),n&2){let e,r,t=m(2);l(),s("ngIf",(e=t.formAdd.get("nom").errors)==null?null:e.required),l(),s("ngIf",(r=t.formAdd.get("nom").errors)==null?null:r.maxlength)}}function Ae(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"form",8),p("ngSubmit",function(){g(e);let t=m();return f(t.add_niveau())}),i(3,"h3",7),a(4,"AJouter Niveau"),o(),i(5,"div",9)(6,"div",23)(7,"label",24),a(8,"Nom :"),o(),i(9,"select",25)(10,"option",26),a(11,"Saisir le nom du niveau"),o(),_(12,Oe,2,2,"option",12),o(),_(13,Ie,3,2,"div",15),o(),i(14,"div",16)(15,"a",17),p("click",function(){g(e);let t=m();return f(t.exitAdd())}),i(16,"span"),a(17,"Annuler"),o()(),i(18,"button",18)(19,"span"),a(20,"Enregistrer"),o(),u(21,"fa-icon",4),o()()()()(),w()}if(n&2){let e=m();l(2),s("formGroup",e.formAdd),l(10),s("ngForOf",e.niveaux_type),l(),s("ngIf",e.formAdd.get("nom").invalid&&e.formAdd.get("nom").touched),l(8),s("icon",e.icons.nexte_circle)}}function ke(n,d){if(n&1&&(i(0,"option",19),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),W(e.nom)}}function Ne(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Supprimer niveau"),o(),i(4,"div",9)(5,"select",27),p("change",function(t){g(e);let c=m();return f(c.onDelete(t))}),i(6,"option",11),a(7,"Choisir Le Niveau"),o(),_(8,ke,2,2,"option",12),o(),i(9,"div",16)(10,"a",17),p("click",function(){g(e);let t=m();return f(t.annuler())}),i(11,"span"),a(12,"Annuler"),o()(),i(13,"button",3),p("click",function(){g(e);let t=m();return f(t.nextToConfirm())}),i(14,"span"),a(15,"Suivant"),o(),u(16,"fa-icon",4),o()()()(),w()}if(n&2){let e=m();l(8),s("ngForOf",e.niveaux),l(8),s("icon",e.icons.nexte_circle)}}function Ve(n,d){if(n&1){let e=C();i(0,"div",6)(1,"h3",7),a(2,"Confirmation"),o(),i(3,"div",9)(4,"p"),a(5),o(),i(6,"div",16)(7,"a",28),p("click",function(){g(e);let t=m();return f(t.exitDelete())}),a(8,"Annuler"),o(),i(9,"button",28),p("click",function(){g(e);let t=m();return f(t.delete_niveau(t.niveauForDeleted.id))}),a(10,"Supprimer"),o()()()()}if(n&2){let e=m();l(5),E("\xCAtes-vous s\xFBr de vouloir supprimer le niveau : ",e.niveauForDeleted.nom,"?")}}var fe=(()=>{class n{constructor(e,r,t,c){this.setingService=e,this.icons=r,this.fb=t,this.pageTitle=c,this.show_deleted=!1,this.show_add=!1,this.ishow_update=!1,this.isConfirm=!1,this.closeModal=new q,this.niveaux=[],this.niveaux_type=[]}ngOnInit(){this.load_niveau(),this.load_formAdd(),this.load_formUpdate(),this.niveaux_type=this.getNiveauType()}load_niveau(){this.setingService.getAll().subscribe(e=>{this.niveaux=e})}show_delete(){this.show_deleted=!this.show_deleted,this.closeModal.emit()}onChange(e){let r=e.target.value,t=this.niveaux.find(c=>c.id==r);this.formUpdate.get("nom")?.setValue(t?.nom),this.formUpdate.get("id")?.setValue(t?.id)}onDelete(e){let r=e.target.value;this.niveauForDeleted=this.niveaux.find(t=>t.id==r),this.show_deleted=!1,this.isConfirm=!0}show_updated(){this.ishow_update=!this.ishow_update,this.closeModal.emit()}show_added(){this.show_add=!this.show_add,this.closeModal.emit()}exitUpdate(){this.ishow_update=!1,this.closeModal.emit(),this.load_formUpdate()}exitAdd(){this.show_add=!1,this.closeModal.emit(),this.load_formAdd()}exitDelete(){this.isConfirm=!1,this.closeModal.emit()}exit(){this.ishow_update=!1}nextToConfirm(){this.isConfirm=!0,this.closeModal.emit()}annuler(){this.show_deleted=!1,this.closeModal.emit()}load_formAdd(){this.formAdd=this.fb.group({nom:["",[h.required,h.maxLength(40)]]})}add_niveau(){let e=this.formAdd.value,r={nom:e.nom};console.log(r,"nnivvv"),this.formAdd.valid&&this.setingService.addNiveau(e).subscribe({next:t=>{this.pageTitle.showSuccessToast(t.message),this.load_niveau(),this.formAdd.reset(),this.load_formAdd(),this.show_add=!1,this.closeModal.emit()},error:t=>{this.pageTitle.showErrorToast(t.error.message)}})}load_formUpdate(){this.formUpdate=this.fb.group({id:["",h.required],nom:["",[h.required,h.maxLength(40)]]})}update_niveau(){let e=this.formUpdate.value,r={id:e.id,nom:e.nom};console.log(r,"nnivvv"),this.formUpdate.valid&&this.setingService.updateNiveau(r).subscribe({next:t=>{this.pageTitle.showSuccessToast(t.message),this.load_niveau(),this.formUpdate.reset(),this.load_formUpdate(),this.ishow_update=!1,this.closeModal.emit()},error:t=>{this.pageTitle.showErrorToast(t.error.message)}})}delete_niveau(e){this.setingService.deleteNiveau(e).subscribe({next:r=>{this.pageTitle.showSuccessToast(r.message),this.load_niveau(),this.show_deleted=!1,this.isConfirm=!1,this.closeModal.emit()},error:r=>{this.pageTitle.showErrorToast(r.error.message)}})}getNiveauType(){return Object.keys(ae).map(e=>({key:e,value:ae[e]}))}static{this.\u0275fac=function(r){return new(r||n)(v(j),v(P),v(N),v(V))}}static{this.\u0275cmp=y({type:n,selectors:[["app-niveau-widget"]],outputs:{closeModal:"closeModal"},decls:18,vars:7,consts:[[4,"ngIf"],["class","views",4,"ngIf"],[1,"second-child"],[3,"click"],[3,"icon"],[1,"delete",3,"icon"],[1,"views"],[1,"span"],[3,"ngSubmit","formGroup"],[1,"container-views"],["formControlName","id","placeholder","Choisir la clase",1,"form-select",3,"change"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","id",4,"ngIf"],["type","text","formControlName","nom","placeholder","Nom du niveau...",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"button-cash"],[1,"submit",3,"click"],["type","submit",1,"submit"],[3,"value"],["type","number","formControlName","id"],[1,"invalid-feedback"],[1,"label-error"],[1,"form","form-group"],["for","email"],["formControlName","nom",1,"form-select"],["disabled","","selected","","value",""],["placeholder","Choisir la clase",1,"form-select",3,"change"],["type","button",3,"click"]],template:function(r,t){r&1&&(i(0,"main"),_(1,Pe,21,5,"ng-container",0)(2,Ae,22,4,"ng-container",0)(3,Ne,17,2,"ng-container",0)(4,Ve,11,1,"div",1),i(5,"div",2)(6,"a",3),p("click",function(){return t.show_added()}),u(7,"fa-icon",4),i(8,"span"),a(9,"Ajouter"),o()(),i(10,"a",3),p("click",function(){return t.show_updated()}),u(11,"fa-icon",4),i(12,"span"),a(13,"Modifier"),o()(),i(14,"a",3),p("click",function(){return t.show_delete()}),u(15,"fa-icon",5),i(16,"span"),a(17,"Supprimer"),o()()()()),r&2&&(l(),s("ngIf",t.ishow_update),l(),s("ngIf",t.show_add),l(),s("ngIf",t.show_deleted),l(),s("ngIf",t.isConfirm),l(3),s("icon",t.icons.squarePlus),l(4),s("icon",t.icons.edit),l(4),s("icon",t.icons.delete))},dependencies:[L,M,I,U,G,z,$,J,F,T,A,k,O],styles:[".views-delete[_ngcontent-%COMP%]{overflow:hidden;position:fixed;outline:none;background-color:#fff;overflow:scroll;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10001;box-shadow:0 1px 3px #0000001a}.views-delete[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.template-vide[_ngcontent-%COMP%]{padding:10px;width:250px}.views-delete[_ngcontent-%COMP%]   .button-cash[_ngcontent-%COMP%]{padding:10px}main[_ngcontent-%COMP%]{position:relative}.label-error[_ngcontent-%COMP%]{color:red;font-weight:400}.views[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px;background-color:var(--primary);padding:8px;color:var(--secondary)}.span[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary);font-size:14px;padding:10px;width:100%;text-align:center;border-top-left-radius:4px;border-top-right-radius:4px}.second-child[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--primary);font-size:14px;font-weight:700;cursor:pointer}.second-child[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:var(--secondary)}fa-icon[_ngcontent-%COMP%]{cursor:pointer}fa-icon[_ngcontent-%COMP%]:hover{color:var(--secondary)}.container-views[_ngcontent-%COMP%]{padding:10px}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}label[_ngcontent-%COMP%]{margin-bottom:5px}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);background-color:var(--primary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.delete[_ngcontent-%COMP%]{color:red}.views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;border:1px solid #ddd;top:-236%;border-radius:4px;z-index:10001;box-shadow:0 4px 8px #00000026}.second-child[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:space-between;align-items:flex-end}select[_ngcontent-%COMP%]{margin-bottom:10px}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px #0003}"]})}}return n})();function De(n,d){n&1&&(i(0,"div")(1,"span",18),a(2,"Le nom de la fili\xE8re est requise."),o()())}function je(n,d){n&1&&(i(0,"div")(1,"span",18),a(2,"Le nom de la fili\xE8re ne doit pas d\xE9passer 40 caract\xE8res."),o()())}function qe(n,d){if(n&1&&(i(0,"div",17),_(1,De,3,0,"div",0)(2,je,3,0,"div",0),o()),n&2){let e,r,t=m(2);l(),s("ngIf",(e=t.addFiliere.get("nomFiliere").errors)==null?null:e.required),l(),s("ngIf",(r=t.addFiliere.get("nomFiliere").errors)==null?null:r.maxlength)}}function Le(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Ajouter Fili\xE8re"),o(),i(4,"form",8),p("ngSubmit",function(){g(e);let t=m();return f(t.send())}),i(5,"div",9)(6,"div",10)(7,"label",11),a(8,"Nom"),o(),u(9,"input",12),_(10,qe,3,2,"div",13),o(),i(11,"div",14)(12,"a",15),p("click",function(){g(e);let t=m();return f(t.close_add())}),i(13,"span"),a(14,"Annuler"),o()(),i(15,"button",16)(16,"span"),a(17,"Enregistre"),o(),u(18,"fa-icon",4),o()()()()(),w()}if(n&2){let e=m();l(4),s("formGroup",e.addFiliere),l(5),S("is-invalid",e.addFiliere.get("nomFiliere").invalid&&e.addFiliere.get("nomFiliere").touched),l(),s("ngIf",e.addFiliere.get("nomFiliere").invalid&&e.addFiliere.get("nomFiliere").touched),l(8),s("icon",e.icons.nexte_circle)}}function ze(n,d){if(n&1&&(i(0,"option",24),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),W(e.nomFiliere)}}function Ue(n,d){n&1&&u(0,"input",25)}function Ge(n,d){n&1&&(i(0,"div")(1,"span",18),a(2,"La fili\xE8re est requise."),o()())}function Re(n,d){n&1&&(i(0,"div")(1,"span",18),a(2,"Le nom de la fili\xE8re ne doit pas d\xE9passer 50 caract\xE8res."),o()())}function Be(n,d){if(n&1&&(i(0,"div",17),_(1,Ge,3,0,"div",0)(2,Re,3,0,"div",0),o()),n&2){let e,r,t=m(2);l(),s("ngIf",(e=t.update_filiere_form.get("nomFiliere").errors)==null?null:e.required),l(),s("ngIf",(r=t.update_filiere_form.get("nomFiliere").errors)==null?null:r.maxlength)}}function $e(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Modifier Fili\xE8re"),o(),i(4,"form",8),p("ngSubmit",function(){g(e);let t=m();return f(t.update_filiere())}),i(5,"div",9)(6,"div",10)(7,"select",19),p("change",function(t){g(e);let c=m();return f(c.onFiliereChange(t))}),i(8,"option",20),a(9,"Choisir La fili\xE8re..."),o(),_(10,ze,2,2,"option",21),o()(),_(11,Ue,1,0,"input",22),i(12,"div",10),u(13,"input",23),_(14,Be,3,2,"div",13),o(),i(15,"div",14)(16,"a",15),p("click",function(){g(e);let t=m();return f(t.close_update())}),i(17,"span"),a(18,"Annuler"),o()(),i(19,"button",16)(20,"span"),a(21,"Suivant"),o(),u(22,"fa-icon",4),o()()()()(),w()}if(n&2){let e=m();l(4),s("formGroup",e.update_filiere_form),l(6),s("ngForOf",e.filieres),l(),s("ngIf",!1),l(2),S("is-invalid",e.update_filiere_form.get("nomFiliere").invalid&&e.update_filiere_form.get("nomFiliere").touched),l(),s("ngIf",e.update_filiere_form.get("nomFiliere").invalid&&e.update_filiere_form.get("nomFiliere").touched),l(8),s("icon",e.icons.nexte_circle)}}function Ye(n,d){if(n&1&&(i(0,"option",24),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),W(e.nomFiliere)}}function Je(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Supprimer fili\xE8re"),o(),i(4,"div",9)(5,"select",26),p("change",function(t){g(e);let c=m();return f(c.onDelete(t))}),i(6,"option",20),a(7,"Choisir La fili\xE8re"),o(),_(8,Ye,2,2,"option",21),o(),i(9,"div",14)(10,"a",15),p("click",function(){g(e);let t=m();return f(t.annuler())}),i(11,"span"),a(12,"Annuler"),o()(),i(13,"button",3),p("click",function(){g(e);let t=m();return f(t.nextToConfirm())}),i(14,"span"),a(15,"Suivant"),o(),u(16,"fa-icon",4),o()()()(),w()}if(n&2){let e=m();l(8),s("ngForOf",e.filieres),l(8),s("icon",e.icons.nexte_circle)}}function Xe(n,d){if(n&1){let e=C();i(0,"div",6)(1,"h3",7),a(2,"Confirmation"),o(),i(3,"div",9)(4,"p"),a(5),o(),i(6,"div",14)(7,"a",27),p("click",function(){g(e);let t=m();return f(t.exitDelete())}),a(8,"Annuler"),o(),i(9,"button",27),p("click",function(){g(e);let t=m();return f(t.delete_niveau(t.filiereFordelete==null?null:t.filiereFordelete.id))}),a(10,"Supprimer"),o()()()()}if(n&2){let e=m();l(5),E("\xCAtes-vous s\xFBr de vouloir supprimer la fili\xE8re : ",e.filiereFordelete==null?null:e.filiereFordelete.nomFiliere,"?")}}var he=(()=>{class n{constructor(e,r,t,c,x){this.icons=e,this.setingService=r,this.setService=t,this.fb=c,this.pageTitle=x,this.closeModal=new q,this.ishow_update=!1,this.ishow_add=!1,this.show_deleted=!1,this.isConfirm=!1,this.objectNivFil=[],this.filieres=[]}ngOnInit(){this.load_filiere_form(),this.load_addForm()}load_addForm(){this.addFiliere=this.fb.group({nomFiliere:["",[h.required,h.maxLength(40)]]})}send(){let r={nomFiliere:this.addFiliere.value.nomFiliere};this.addFiliere.valid?this.setingService.createFiliere(r).subscribe({next:t=>{this.pageTitle.showSuccessToast(t.message),this.addFiliere.reset(),this.load_addForm(),this.ishow_add=!1,this.loa_filiere(),this.closeModal.emit()},error:t=>{this.pageTitle.showErrorToast(t.error.message)}}):(this.addFiliere.markAllAsTouched(),console.log(this.addFiliere.value,"invalid"))}load_filiere_form(){this.update_filiere_form=this.fb.group({id:[""],nomFiliere:["",[h.required,h.maxLength(50)]]})}loa_filiere(){this.setService.getAll_filiere().subscribe(e=>{this.filieres=e,console.log(this.filieres,"filiere")})}update_filiere(){let e=this.update_filiere_form.value,r={id:e.id,nomFiliere:e.nomFiliere};this.update_filiere_form.valid?this.setService.updateFiliere(r).subscribe({next:t=>{this.pageTitle.showSuccessToast(t.message),this.update_filiere_form.reset(),this.loa_filiere(),this.ishow_add=!1,this.load_filiere_form(),this.closeModal.emit()},error:t=>{this.pageTitle.showErrorToast(t.error.message)}}):(this.update_filiere_form.markAllAsTouched(),console.log("invalid",this.update_filiere_form.value))}onFiliereChange(e){let r=e.target.value,t=this.filieres?.find(c=>c.id==r);console.log(t,"filier selected id"),this.update_filiere_form.get("nomFiliere")?.setValue(t?.nomFiliere),this.update_filiere_form.get("id")?.setValue(t?.id)}close_add(){this.ishow_add=!1,this.closeModal.emit()}close_update(){this.loa_filiere(),this.ishow_update=!1,this.closeModal.emit()}onDelete(e){this.isConfirm=!0,this.filiereFordelete=this.filieres?.find(r=>r.id==e.target.value),this.show_deleted=!1}annuler(){this.show_deleted=!1,this.closeModal.emit()}exitDelete(){this.isConfirm=!1,this.closeModal.emit()}delete_niveau(e){this.setService.deleteFiliere(e).subscribe({next:r=>{this.pageTitle.showSuccessToast(r.message),this.loa_filiere(),this.isConfirm=!1,this.closeModal.emit()},error:r=>{this.pageTitle.showErrorToast(r.error.message)}})}show_added(){this.ishow_add=!0,this.closeModal.emit()}show_updated(){this.loa_filiere(),this.ishow_update=!0,this.closeModal.emit()}show_delete(){this.show_deleted=!0,this.closeModal.emit()}nextToConfirm(){this.isConfirm=!0,this.closeModal.emit()}static{this.\u0275fac=function(r){return new(r||n)(v(P),v(j),v(j),v(N),v(V))}}static{this.\u0275cmp=y({type:n,selectors:[["app-filiere-widget"]],outputs:{closeModal:"closeModal"},decls:18,vars:7,consts:[[4,"ngIf"],["class","views",4,"ngIf"],[1,"second-child"],[3,"click"],[3,"icon"],[1,"delete",3,"icon"],[1,"views"],[1,"span"],[3,"ngSubmit","formGroup"],[1,"container-views"],[1,"form","form-group"],["for","email"],["type","text","formControlName","nomFiliere","id","nom","placeholder","nom de la filiere",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"button-cash"],[1,"submit",3,"click"],["type","submit",1,"submit"],[1,"invalid-feedback"],[1,"label-error"],[1,"form-select",3,"change"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","id",4,"ngIf"],["type","text","formControlName","nomFiliere","placeholder","Nom du fili\xE8re..",1,"form-control"],[3,"value"],["type","number","formControlName","id"],["placeholder","Choisir la clase",1,"form-select",3,"change"],["type","button",3,"click"]],template:function(r,t){r&1&&(i(0,"main"),_(1,Le,19,5,"ng-container",0)(2,$e,23,7,"ng-container",0)(3,Je,17,2,"ng-container",0)(4,Xe,11,1,"div",1),i(5,"div",2)(6,"a",3),p("click",function(){return t.show_added()}),u(7,"fa-icon",4),i(8,"span"),a(9,"Ajouter"),o()(),i(10,"a",3),p("click",function(){return t.show_updated()}),u(11,"fa-icon",4),i(12,"span"),a(13,"Modifier"),o()(),i(14,"a",3),p("click",function(){return t.show_delete()}),u(15,"fa-icon",5),i(16,"span"),a(17,"Supprimer"),o()()()()),r&2&&(l(),s("ngIf",t.ishow_add),l(),s("ngIf",t.ishow_update),l(),s("ngIf",t.show_deleted),l(),s("ngIf",t.isConfirm),l(3),s("icon",t.icons.squarePlus),l(4),s("icon",t.icons.edit),l(4),s("icon",t.icons.delete))},dependencies:[L,M,I,U,G,z,$,F,T,A,k,O],styles:[".views-delete[_ngcontent-%COMP%]{overflow:hidden;position:fixed;outline:none;background-color:#fff;overflow:scroll;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10001;box-shadow:0 1px 3px #0000001a}.views-delete[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.template-vide[_ngcontent-%COMP%]{padding:10px;width:250px}.views-delete[_ngcontent-%COMP%]   .button-cash[_ngcontent-%COMP%]{padding:10px}main[_ngcontent-%COMP%]{position:relative}.label-error[_ngcontent-%COMP%]{color:red;font-weight:400}.views[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px;background-color:var(--primary);padding:8px;color:var(--secondary)}.span[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary);font-size:14px;padding:10px;width:100%;text-align:center;border-top-left-radius:4px;border-top-right-radius:4px}.second-child[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--primary);font-size:14px;font-weight:700;cursor:pointer}.second-child[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:var(--secondary)}fa-icon[_ngcontent-%COMP%]{cursor:pointer}fa-icon[_ngcontent-%COMP%]:hover{color:var(--secondary)}.container-views[_ngcontent-%COMP%]{padding:10px}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}label[_ngcontent-%COMP%]{margin-bottom:5px}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);background-color:var(--primary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.delete[_ngcontent-%COMP%]{color:red}.views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;border:1px solid #ddd;top:-169%;border-radius:4px;z-index:10001;box-shadow:0 4px 8px #00000026}.second-child[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:space-between;align-items:flex-end}select[_ngcontent-%COMP%]{margin-bottom:10px}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px #0003}"]})}}return n})();function Qe(n,d){n&1&&(i(0,"div")(1,"span",24),a(2,"La scolarite est requise."),o()())}function Ze(n,d){n&1&&(i(0,"div")(1,"span",24),a(2,"La scolarite doit \xEAtre egale ou supperieure a 100000 FCFA"),o()())}function et(n,d){if(n&1&&(i(0,"div",23),_(1,Qe,3,0,"div",0)(2,Ze,3,0,"div",0),o()),n&2){let e,r,t=m(2);l(),s("ngIf",(e=t.addClass.get("scolarite").errors)==null?null:e.required),l(),s("ngIf",((r=t.addClass.get("scolarite").errors)==null?null:r.min)||((r=t.addClass.get("scolarite").errors)==null?null:r.max))}}function tt(n,d){if(n&1&&(i(0,"option",25),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),E("",e.nomFiliere," ")}}function it(n,d){n&1&&(i(0,"div")(1,"span",24),a(2,"La filiere est requise."),o()())}function nt(n,d){if(n&1&&(i(0,"div",23),_(1,it,3,0,"div",0),o()),n&2){let e,r=m(2);l(),s("ngIf",(e=r.addClass.get("idFiliere").errors)==null?null:e.required)}}function ot(n,d){if(n&1&&(i(0,"option",25),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),E("",e.nom," ")}}function rt(n,d){n&1&&(i(0,"div")(1,"span",24),a(2,"Le Niveau est requis."),o()())}function at(n,d){if(n&1&&(i(0,"div",23),_(1,rt,3,0,"div",0),o()),n&2){let e,r=m(2);l(),s("ngIf",(e=r.addClass.get("idNiveau").errors)==null?null:e.required)}}function lt(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Ajouter Classe"),o(),i(4,"form",8),p("ngSubmit",function(){g(e);let t=m();return f(t.createClassroom())}),i(5,"div",9)(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),a(10,"Scolarit\xE9 :"),o(),u(11,"input",13),_(12,et,3,2,"div",14),o(),i(13,"div",12)(14,"label",15),a(15,"Filiere :"),o(),i(16,"select",16)(17,"option",17),a(18,"Choisir la filiere"),o(),_(19,tt,2,2,"option",18),o(),_(20,nt,2,1,"div",14),o()(),i(21,"div",11)(22,"div",12)(23,"label",15),a(24,"Niveau :"),o(),i(25,"select",19)(26,"option",17),a(27,"Choisir le niveau"),o(),_(28,ot,2,2,"option",18),o(),_(29,at,2,1,"div",14),o()()(),i(30,"div",20)(31,"a",21),p("click",function(){g(e);let t=m();return f(t.close_add())}),i(32,"span"),a(33,"Annuler"),o()(),i(34,"button",22)(35,"span"),a(36,"Enregistrer"),o(),u(37,"fa-icon",4),o()()()()(),w()}if(n&2){let e=m();l(4),s("formGroup",e.addClass),l(7),S("is-invalid",e.addClass.get("scolarite").invalid&&e.addClass.get("scolarite").touched),l(),s("ngIf",e.addClass.get("scolarite").invalid&&e.addClass.get("scolarite").touched),l(4),S("is-invalid",e.addClass.get("idFiliere").invalid&&e.addClass.get("idFiliere").touched),l(3),s("ngForOf",e.filieres),l(),s("ngIf",e.addClass.get("idFiliere").invalid&&e.addClass.get("idFiliere").touched),l(5),S("is-invalid",e.addClass.get("idNiveau").invalid&&e.addClass.get("idNiveau").touched),l(3),s("ngForOf",e.niveaux),l(),s("ngIf",e.addClass.get("idNiveau").invalid&&e.addClass.get("idNiveau").touched),l(8),s("icon",e.icons.nexte_circle)}}function st(n,d){if(n&1&&(i(0,"option",25),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),D("",e.idNiveau.nom," ",e.idFiliere.nomFiliere,"")}}function dt(n,d){n&1&&u(0,"input",31)}function ct(n,d){n&1&&(i(0,"div")(1,"span",24),a(2,"La scolarite est requise."),o()())}function mt(n,d){n&1&&(i(0,"div")(1,"span",24),a(2,"La scolarite doit \xEAtre egale ou supperieure a 100000 FCFA"),o()())}function pt(n,d){if(n&1&&(i(0,"div",23),_(1,ct,3,0,"div",0)(2,mt,3,0,"div",0),o()),n&2){let e,r,t=m(2);l(),s("ngIf",(e=t.update_classe_form.get("scolarite").errors)==null?null:e.required),l(),s("ngIf",((r=t.update_classe_form.get("scolarite").errors)==null?null:r.min)||((r=t.update_classe_form.get("scolarite").errors)==null?null:r.max))}}function _t(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Modifier Classe"),o(),i(4,"form",8),p("ngSubmit",function(){g(e);let t=m();return f(t.update_classe())}),i(5,"div",9)(6,"div",26)(7,"label",27),a(8,"La classe :"),o(),i(9,"select",28),p("change",function(t){g(e);let c=m();return f(c.onClasseChange(t))}),i(10,"option",17),a(11,"Choisir La classe"),o(),_(12,st,2,3,"option",18),o()(),_(13,dt,1,0,"input",29),i(14,"div",26)(15,"label",27),a(16,"Scolarite :"),o(),u(17,"input",30),_(18,pt,3,2,"div",14),o(),i(19,"div",20)(20,"a",21),p("click",function(){g(e);let t=m();return f(t.close_update())}),i(21,"span"),a(22,"Annuler"),o()(),i(23,"button",22)(24,"span"),a(25,"Suivant"),o(),u(26,"fa-icon",4),o()()()()(),w()}if(n&2){let e=m();l(4),s("formGroup",e.update_classe_form),l(8),s("ngForOf",e.nivFilieres),l(),s("ngIf",!1),l(4),S("is-invalid",e.update_classe_form.get("scolarite").invalid&&e.update_classe_form.get("scolarite").touched),l(),s("ngIf",e.update_classe_form.get("scolarite").invalid&&e.update_classe_form.get("scolarite").touched),l(8),s("icon",e.icons.nexte_circle)}}function ut(n,d){if(n&1&&(i(0,"option",25),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),D("",e.idFiliere==null||e.idFiliere.idNiveau==null?null:e.idFiliere.idNiveau.nom," ",e.idFiliere==null||e.idFiliere.idFiliere==null?null:e.idFiliere.idFiliere.nomFiliere,"")}}function gt(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Supprimer classe"),o(),i(4,"div",9)(5,"select",32),p("change",function(t){g(e);let c=m();return f(c.onDelete(t))}),i(6,"option",17),a(7,"Choisir La fili\xE8re"),o(),_(8,ut,2,3,"option",18),o(),i(9,"div",20)(10,"a",21),p("click",function(){g(e);let t=m();return f(t.close_delete())}),i(11,"span"),a(12,"Annuler"),o()(),i(13,"button",3),p("click",function(){g(e);let t=m();return f(t.nextToConfirm())}),i(14,"span"),a(15,"Suivant"),o(),u(16,"fa-icon",4),o()()()(),w()}if(n&2){let e=m();l(8),s("ngForOf",e.classes),l(8),s("icon",e.icons.nexte_circle)}}function ft(n,d){if(n&1){let e=C();i(0,"div",6)(1,"h3",7),a(2,"Confirmation"),o(),i(3,"div",9)(4,"p"),a(5),o(),i(6,"div",20)(7,"a",33),p("click",function(){g(e);let t=m();return f(t.exitDelete())}),a(8,"Annuler"),o(),i(9,"button",33),p("click",function(){g(e);let t=m();return f(t.delete_classe(t.classFordelete.id))}),a(10,"Supprimer"),o()()()()}if(n&2){let e=m();l(5),D("\xCAtes-vous s\xFBr de vouloir supprimer la classe : ",e.classFordelete.idFiliere==null||e.classFordelete.idFiliere.idNiveau==null?null:e.classFordelete.idFiliere.idNiveau.nom," ",e.classFordelete.idFiliere==null||e.classFordelete.idFiliere.idFiliere==null?null:e.classFordelete.idFiliere.idFiliere.nomFiliere,"")}}var ve=(()=>{class n{constructor(e,r,t,c,x,X){this.classService=e,this.icons=r,this.infoSchool=t,this.pageTitle=c,this.fb=x,this.setService=X,this.show_update=!1,this.show_add=!1,this.show_deleted=!1,this.isConfirm=!1,this.closeModal=new q,this.classes=[],this.annees=[],this.filieres=[],this.nivFilieres=[],this.niveaux=[]}ngOnInit(){this.load_all_classe(),this.load_form_update(),this.load_fillere(),this.load_form_add(),this.get_annees()}onClasseChange(e){let r=e.target.value,t=this.nivFilieres.find(c=>c.id==r);this.update_classe_form.get("scolarite")?.setValue(t?.scolarite),this.update_classe_form.get("id")?.setValue(t?.id)}onDelete(e){let r=e.target.value;this.classFordelete=this.classes.find(t=>t.id==r)}delete_classe(e){}load_all_classe(){this.classService.getAllCurrentClassOfYear().subscribe(e=>{this.classes=e})}get_nivFiliere(){this.classService.getAllNivFil().subscribe(e=>{this.nivFilieres=e})}load_form_update(){this.update_classe_form=this.fb.group({id:[""],idFiliere:[""],scolarite:["",[h.required,h.min(1e5),h.max(3e6)]]})}load_fillere(){this.setService.getAllNiveau().subscribe(e=>{this.niveaux=e}),this.setService.getAll_filiere().subscribe(e=>{this.filieres=e})}get_annees(){this.infoSchool.getAll_annee().subscribe(e=>{this.annees=e,this.annees.forEach(r=>{let c=new Date(r.debutAnnee).getFullYear();r.ans=c})})}load_form_add(){this.addClass=this.fb.group({idNiveau:["",h.required],idFiliere:["",h.required],scolarite:["",[h.required,h.min(1e5),h.max(3e6)]]})}createClassroom(){let e=this.addClass.value,r=this.niveaux.find(x=>x.id==e.idNiveau),t=this.filieres.find(x=>x.id==e.idFiliere),c={idNiveau:r,idFiliere:t,scolarite:e.scolarite};this.addClass.valid?this.setService.addNiveauFiliere(c).subscribe({next:x=>{this.pageTitle.showSuccessToast(x.message),this.addClass.reset(),this.load_fillere(),this.load_form_add(),this.show_add=!1,this.closeModal.emit()},error:x=>{this.pageTitle.showErrorToast(x.error.message)}}):(this.addClass.markAllAsTouched(),console.log(this.addClass.value))}update_classe(){let e=this.update_classe_form.value;this.update_classe_form.valid?this.setService.updateNiveauFiliere(e).subscribe({next:r=>{this.pageTitle.showSuccessToast(r.message),this.update_classe_form.reset(),this.get_nivFiliere(),this.show_update=!1,this.closeModal.emit()},error:r=>{this.pageTitle.showErrorToast(r.error.message)}}):this.update_classe_form.markAllAsTouched()}close_update(){this.show_update=!1,this.closeModal.emit()}close_add(){this.show_add=!1,this.closeModal.emit()}show_added(){this.show_add=!this.show_add,this.closeModal.emit()}show_updated(){this.get_nivFiliere(),this.show_update=!0,this.closeModal.emit()}show_delete(){this.show_deleted=!0,this.closeModal.emit()}exitDelete(){this.isConfirm=!1}close_delete(){this.show_deleted=!1,this.closeModal.emit()}nextToConfirm(){this.isConfirm=!0,this.show_deleted=!1,this.closeModal.emit()}static{this.\u0275fac=function(r){return new(r||n)(v(re),v(P),v(R),v(V),v(N),v(j))}}static{this.\u0275cmp=y({type:n,selectors:[["app-classeroom-widget"]],outputs:{closeModal:"closeModal"},decls:18,vars:7,consts:[[4,"ngIf"],["class","views",4,"ngIf"],[1,"second-child"],[3,"click"],[3,"icon"],[1,"delete",3,"icon"],[1,"views"],[1,"span"],[3,"ngSubmit","formGroup"],[1,"container-views"],[1,"form-content"],[1,"content-input"],[1,"form","form-group"],["type","text","formControlName","scolarite","id","nom","placeholder","La scolarite...",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","select-modules-multiple",1,"label","form-label"],["formControlName","idFiliere","placeholder","Nom du classe...",1,"form-select"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","idNiveau",1,"form-select"],[1,"button-cash"],[1,"submit",3,"click"],["type","submit",1,"submit"],[1,"invalid-feedback"],[1,"label-error"],[3,"value"],[1,"form-group"],["for",""],["formControlName","id","placeholder","Choisir la clase",1,"form-select",3,"change"],["type","number","formControlName","id",4,"ngIf"],["type","text","formControlName","scolarite","placeholder","La scolarit\xE9...",1,"form-control"],["type","number","formControlName","id"],["placeholder","Choisir la clase",1,"form-select",3,"change"],["type","button",3,"click"]],template:function(r,t){r&1&&(i(0,"main"),_(1,lt,38,13,"ng-container",0)(2,_t,27,7,"ng-container",0)(3,gt,17,2,"ng-container",0)(4,ft,11,2,"div",1),i(5,"div",2)(6,"a",3),p("click",function(){return t.show_added()}),u(7,"fa-icon",4),i(8,"span"),a(9,"Ajouter"),o()(),i(10,"a",3),p("click",function(){return t.show_updated()}),u(11,"fa-icon",4),i(12,"span"),a(13,"Modifier"),o()(),i(14,"a",3),p("click",function(){return t.show_delete()}),u(15,"fa-icon",5),i(16,"span"),a(17,"Supprimer"),o()()()()),r&2&&(l(),s("ngIf",t.show_add),l(),s("ngIf",t.show_update),l(),s("ngIf",t.show_deleted),l(),s("ngIf",t.isConfirm),l(3),s("icon",t.icons.squarePlus),l(4),s("icon",t.icons.edit),l(4),s("icon",t.icons.delete))},dependencies:[L,M,I,U,G,z,$,J,F,T,A,k,O],styles:[".views-delete[_ngcontent-%COMP%]{overflow:hidden;position:fixed;outline:none;background-color:#fff;overflow:scroll;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10001;box-shadow:0 1px 3px #0000001a}.views-delete[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.template-vide[_ngcontent-%COMP%]{padding:10px;width:250px}.views-delete[_ngcontent-%COMP%]   .button-cash[_ngcontent-%COMP%]{padding:10px}main[_ngcontent-%COMP%]{position:relative}.label-error[_ngcontent-%COMP%]{color:red;font-weight:400}.views[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px;background-color:var(--primary);padding:8px;color:var(--secondary)}.span[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary);font-size:14px;padding:10px;width:100%;text-align:center;border-top-left-radius:4px;border-top-right-radius:4px}.second-child[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--primary);font-size:14px;font-weight:700;cursor:pointer}.second-child[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:var(--secondary)}fa-icon[_ngcontent-%COMP%]{cursor:pointer}fa-icon[_ngcontent-%COMP%]:hover{color:var(--secondary)}.container-views[_ngcontent-%COMP%]{padding:10px}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}label[_ngcontent-%COMP%]{margin-bottom:5px}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);background-color:var(--primary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.delete[_ngcontent-%COMP%]{color:red}.views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;border:1px solid #ddd;top:-236%;width:250px;border-radius:4px;z-index:1000;box-shadow:0 4px 8px #00000026}.second-child[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:space-between;align-items:flex-end}select[_ngcontent-%COMP%]{margin-bottom:10px}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px #0003}"]})}}return n})();var le=()=>({color:"red"});function vt(n,d){n&1&&(i(0,"span",18),a(1," Champ obligatoire* "),o()),n&2&&s("ngStyle",Y(1,le))}function xt(n,d){n&1&&(i(0,"span",18),a(1," Champ obligatoire* "),o()),n&2&&s("ngStyle",Y(1,le))}function Ct(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Ajouter promotion"),o(),i(4,"form",8),p("ngSubmit",function(){g(e);let t=m();return f(t.submit())}),i(5,"div",9)(6,"div",10)(7,"label",11),a(8,"D\xE9but d'ann\xE9e :"),o(),u(9,"input",12),_(10,vt,2,2,"span",13),o(),i(11,"div",10)(12,"label",11),a(13,"Fin d'ann\xE9e :"),o(),u(14,"input",14),_(15,xt,2,2,"span",13),o(),i(16,"div",15)(17,"a",16),p("click",function(){g(e);let t=m();return f(t.close_add())}),i(18,"span"),a(19,"Annuler"),o()(),i(20,"button",17)(21,"span"),a(22,"Enregistre"),o()()()()()(),w()}if(n&2){let e=m();l(4),s("formGroup",e.form_annee),l(5),S("is-invalid",e.form_annee.get("debutAnnee").invalid&&e.form_annee.get("debutAnnee").touched),l(),s("ngIf",e.form_annee.controls.debutAnnee.hasError("required")&&e.form_annee.controls.debutAnnee.touched),l(4),S("is-invalid",e.form_annee.get("finAnnee").invalid&&e.form_annee.get("finAnnee").touched),l(),s("ngIf",e.form_annee.controls.finAnnee.hasError("required")&&e.form_annee.controls.finAnnee.touched)}}function St(n,d){if(n&1&&(i(0,"option",23),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),E("Promotion ",e.ans,"")}}function bt(n,d){n&1&&u(0,"input",24)}function wt(n,d){n&1&&(i(0,"span",18),a(1," Champ obligatoire* "),o()),n&2&&s("ngStyle",Y(1,le))}function Et(n,d){n&1&&(i(0,"span",18),a(1," Champ obligatoire* "),o()),n&2&&s("ngStyle",Y(1,le))}function yt(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Modifier promotion"),o(),i(4,"form",8),p("ngSubmit",function(){g(e);let t=m();return f(t.update_promotion())}),i(5,"div",9)(6,"div",10)(7,"label",11),a(8,"Promotion :"),o(),i(9,"select",19),p("change",function(t){g(e);let c=m();return f(c.onChange(t))}),i(10,"option",20),a(11,"Choisir La promotion"),o(),_(12,St,2,2,"option",21),o()(),i(13,"div",10)(14,"label",11),a(15,"D\xE9but d'ann\xE9e :"),o(),_(16,bt,1,0,"input",22),u(17,"input",12),_(18,wt,2,2,"span",13),o(),i(19,"div",10)(20,"label"),a(21,"Fin d'ann\xE9e :"),o(),u(22,"input",14),_(23,Et,2,2,"span",13),o(),i(24,"div",15)(25,"a",16),p("click",function(){g(e);let t=m();return f(t.close_update())}),i(26,"span"),a(27,"Annuler"),o()(),i(28,"button",17)(29,"span"),a(30,"Enregistre"),o()()()()()(),w()}if(n&2){let e=m();l(4),s("formGroup",e.form_edit),l(8),s("ngForOf",e.annees),l(4),s("ngIf",!1),l(),S("is-invalid",e.form_edit.get("debutAnnee").invalid&&e.form_edit.get("debutAnnee").touched),l(),s("ngIf",e.form_edit.controls.debutAnnee.hasError("required")&&e.form_edit.controls.debutAnnee.touched),l(4),S("is-invalid",e.form_edit.get("finAnnee").invalid&&e.form_edit.get("finAnnee").touched),l(),s("ngIf",e.form_edit.controls.finAnnee.hasError("required")&&e.form_edit.controls.finAnnee.touched)}}function Mt(n,d){if(n&1&&(i(0,"option",23),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),E("Promotion ",e.ans,"")}}function Pt(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Supprimer promotion"),o(),i(4,"div",9)(5,"select",25),p("change",function(t){g(e);let c=m();return f(c.onDelete(t))}),i(6,"option",20),a(7,"Choisir La fili\xE8re"),o(),_(8,Mt,2,2,"option",21),o(),i(9,"div",15)(10,"a",16),p("click",function(){g(e);let t=m();return f(t.annuler())}),i(11,"span"),a(12,"Annuler"),o()(),i(13,"button",3),p("click",function(){g(e);let t=m();return f(t.nextToConfirm())}),i(14,"span"),a(15,"Suivant"),o(),u(16,"fa-icon",4),o()()()(),w()}if(n&2){let e=m();l(8),s("ngForOf",e.annees),l(8),s("icon",e.icons.nexte_circle)}}function Ot(n,d){if(n&1){let e=C();i(0,"div",6)(1,"h3",7),a(2,"Confirmation"),o(),i(3,"div",9)(4,"p"),a(5),o(),i(6,"div",15)(7,"a",26),p("click",function(){g(e);let t=m();return f(t.exitDelete())}),a(8,"Annuler"),o(),i(9,"button",26),p("click",function(){g(e);let t=m();return f(t.delete_classe(t.anneForDelete.id))}),a(10,"Supprimer"),o()()()()}if(n&2){let e=m();l(5),E("\xCAtes-vous s\xFBr de vouloir supprimer la promotion : ",e.anneForDelete.ans,"")}}var xe=(()=>{class n{constructor(e,r,t,c){this.fb=e,this.icons=r,this.infoSchool=t,this.pageTile=c,this.closeModal=new q,this.annees=[],this.is_show=!1,this.ishow_update=!1,this.ishow_add=!1,this.isConfirm=!1,this.ishow_delete=!1,this.isDelete=!1}ngOnInit(){this.load_form(),this.get_annees(),this.load_edit_form(),this.admin=ge()?.dga}load_form(){this.form_annee=this.fb.group({debutAnnee:["",h.required],finAnnee:["",h.required]})}load_edit_form(){this.form_edit=this.fb.group({id:[""],debutAnnee:["",h.required],finAnnee:["",h.required]})}submit(){let e=this.form_annee.value,r={debutAnnee:e.debutAnnee,finAnnee:e.finAnnee,idAdmin:this.admin};console.log(r,"promotion"),this.form_annee.valid&&this.infoSchool.addAnnee(r).subscribe({next:t=>{this.pageTile.showSuccessToast(t.message),this.form_annee.reset(),this.load_form(),this.get_annees(),this.ishow_add=!1,this.closeModal.emit()},error:t=>{this.pageTile.showErrorToast(t.error.message)}})}get_annees(){this.infoSchool.getAll_annee().subscribe(e=>{this.annees=e,this.annees.forEach(r=>{let c=new Date(r.debutAnnee).getFullYear();r.ans=c})})}update_promotion(){let e=this.form_edit.value,r={id:e.id,debutAnnee:e.debutAnnee,finAnnee:e.finAnnee};this.form_edit.valid&&this.infoSchool.updateAnnee(r).subscribe({next:t=>{this.pageTile.showSuccessToast(t.message),this.form_edit.reset(),this.load_edit_form(),this.get_annees(),this.ishow_update=!1,this.closeModal.emit()},error:t=>{this.pageTile.showErrorToast(t.error.message)}})}close_update(){this.ishow_update=!1,this.closeModal.emit()}close_add(){this.ishow_add=!1,this.closeModal.emit()}exitDelete(){this.isConfirm=!1,this.closeModal.emit()}annuler(){this.ishow_delete=!1,this.closeModal.emit()}delete_classe(e){this.infoSchool.deleteAnnee(e).subscribe({next:r=>{this.pageTile.showSuccessToast(r.message),this.get_annees(),this.isConfirm=!1,this.closeModal.emit()},error:r=>{this.pageTile.showErrorToast(r.error.message),this.ngOnInit()}})}onChange(e){let r=e.target.value,t=this.annees.find(c=>c.id==r);this.form_edit.get("debutAnnee")?.setValue(t?.debutAnnee),this.form_edit.get("finAnnee")?.setValue(t?.finAnnee),this.form_edit.get("id")?.setValue(t?.id)}onDelete(e){let r=e.target.value;this.anneForDelete=this.annees.find(t=>t.id==r)}show_added(){this.ishow_add=!0,this.closeModal.emit()}show_updated(){this.ishow_update=!0,this.closeModal.emit()}show_delete(){this.ishow_delete=!0,this.closeModal.emit()}nextToConfirm(){this.ishow_delete=!1,this.isConfirm=!0}static{this.\u0275fac=function(r){return new(r||n)(v(N),v(P),v(R),v(V))}}static{this.\u0275cmp=y({type:n,selectors:[["app-promotion-widget"]],outputs:{closeModal:"closeModal"},decls:18,vars:7,consts:[[4,"ngIf"],["class","views",4,"ngIf"],[1,"second-child"],[3,"click"],[3,"icon"],[1,"delete",3,"icon"],[1,"views"],[1,"span"],[3,"ngSubmit","formGroup"],[1,"container-views"],[1,"form-group"],["for",""],["type","date","formControlName","debutAnnee",1,"form-control"],[3,"ngStyle",4,"ngIf"],["type","date","formControlName","finAnnee",1,"form-control"],[1,"button-cash"],[1,"submit",3,"click"],["type","submit",1,"submit"],[3,"ngStyle"],[1,"form-select",3,"change"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","id",4,"ngIf"],[3,"value"],["type","number","formControlName","id"],["placeholder","Choisir la clase",1,"form-select",3,"change"],["type","button",3,"click"]],template:function(r,t){r&1&&(i(0,"main"),_(1,Ct,23,7,"ng-container",0)(2,yt,31,9,"ng-container",0)(3,Pt,17,2,"ng-container",0)(4,Ot,11,1,"div",1),i(5,"div",2)(6,"a",3),p("click",function(){return t.show_added()}),u(7,"fa-icon",4),i(8,"span"),a(9,"Ajouter"),o()(),i(10,"a",3),p("click",function(){return t.show_updated()}),u(11,"fa-icon",4),i(12,"span"),a(13,"Modifier"),o()(),i(14,"a",3),p("click",function(){return t.show_delete()}),u(15,"fa-icon",5),i(16,"span"),a(17,"Supprimer"),o()()()()),r&2&&(l(),s("ngIf",t.ishow_add),l(),s("ngIf",t.ishow_update),l(),s("ngIf",t.ishow_delete),l(),s("ngIf",t.isConfirm),l(3),s("icon",t.icons.squarePlus),l(4),s("icon",t.icons.edit),l(4),s("icon",t.icons.delete))},dependencies:[L,M,oe,I,U,G,z,$,F,T,A,k,O],styles:[".views-delete[_ngcontent-%COMP%]{overflow:hidden;position:fixed;outline:none;background-color:#fff;overflow:scroll;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2;box-shadow:0 1px 3px #0000001a}.views-delete[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.template-vide[_ngcontent-%COMP%]{padding:10px;width:250px}.views-delete[_ngcontent-%COMP%]   .button-cash[_ngcontent-%COMP%]{padding:10px}main[_ngcontent-%COMP%]{position:relative}.label-error[_ngcontent-%COMP%]{color:red;font-weight:400}.views[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px;background-color:var(--primary);padding:8px;color:var(--secondary)}.span[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary);font-size:14px;padding:10px;width:100%;text-align:center;border-top-left-radius:4px;border-top-right-radius:4px}.second-child[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--primary);font-size:14px;font-weight:700;cursor:pointer}.second-child[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:var(--secondary)}fa-icon[_ngcontent-%COMP%]{cursor:pointer}fa-icon[_ngcontent-%COMP%]:hover{color:var(--secondary)}.container-views[_ngcontent-%COMP%]{padding:10px}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}label[_ngcontent-%COMP%]{margin-bottom:5px}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);background-color:var(--primary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.delete[_ngcontent-%COMP%]{color:red}.views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;border:1px solid #ddd;top:-430%;border-radius:4px;z-index:2;box-shadow:0 4px 8px #00000026}.second-child[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:space-between;align-items:flex-end}select[_ngcontent-%COMP%]{margin-bottom:10px}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px #0003}"]})}}return n})();var se=function(n){return n.S1="SEMESTRE 1",n.S2="SEMESTRE 2",n.S3="SEMESTRE 3",n.S4="SEMESTRE 4",n.S5="SEMESTRE 5",n}(se||{});function Tt(n,d){if(n&1&&(i(0,"option",21),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),E(" Poromotion ",e.ans,"")}}function It(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"Champ obligatoire."),o()())}function At(n,d){if(n&1&&(i(0,"option",21),a(1),o()),n&2){let e=d.$implicit;s("value",e.key),l(),W(e.value)}}function kt(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"Champ obligatoire."),o()())}function Nt(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"Champ obligatoire."),o()())}function Vt(n,d){if(n&1&&(i(0,"div",23),_(1,Nt,3,0,"div",0),o()),n&2){let e,r=m(2);l(),s("ngIf",(e=r.add_semestre.get("dateDebut").errors)==null?null:e.required)}}function Wt(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"Champ obligatoire."),o()())}function Dt(n,d){if(n&1&&(i(0,"div",23),_(1,Wt,3,0,"div",0),o()),n&2){let e,r=m(2);l(),s("ngIf",(e=r.add_semestre.get("datFin").errors)==null?null:e.required)}}function jt(n,d){if(n&1){let e=C();b(0),i(1,"div",5)(2,"h3",6),a(3,"Ajouter semestre"),o(),i(4,"form",7),p("ngSubmit",function(){g(e);let t=m();return f(t.submit())}),i(5,"div",8)(6,"div",9)(7,"label",10),a(8,"Promotion :"),o(),i(9,"select",11)(10,"option",12),a(11,"Choisir la promotion..."),o(),_(12,Tt,2,2,"option",13)(13,It,3,0,"div",0),o()(),i(14,"div",9)(15,"label",10),a(16,"Nom du semestre :"),o(),i(17,"select",14)(18,"option",12),a(19,"Choisir nom semestre..."),o(),_(20,At,2,2,"option",13)(21,kt,3,0,"div",0),o()(),i(22,"div",9)(23,"label",10),a(24,"Date de d\xE9but :"),o(),u(25,"input",15),_(26,Vt,2,1,"div",16),o(),i(27,"div",9)(28,"label",10),a(29," Date de fin :"),o(),u(30,"input",17),_(31,Dt,2,1,"div",16),o(),i(32,"div",18)(33,"a",19),p("click",function(){g(e);let t=m();return f(t.close_add())}),i(34,"span"),a(35,"Annuler"),o()(),i(36,"button",20)(37,"span"),a(38,"Suivant"),o(),u(39,"fa-icon",4),o()()()()(),w()}if(n&2){let e,r,t,c,x=m();l(4),s("formGroup",x.add_semestre),l(5),S("is-invalid",x.add_semestre.get("idAnneeScolaire").invalid&&x.add_semestre.get("idAnneeScolaire").touched),l(3),s("ngForOf",x.annees),l(),s("ngIf",(e=x.add_semestre.get("idAnneeScolaire").errors)==null?null:e.required),l(4),S("is-invalid",x.add_semestre.get("nomSemetre").invalid&&x.add_semestre.get("nomSemetre").touched),l(3),s("ngForOf",x.semestreNames),l(),s("ngIf",(r=x.add_semestre.get("nomSemetre").errors)==null?null:r.required),l(4),S("is-invalid",x.add_semestre.get("dateDebut").invalid&&x.add_semestre.get("dateDebut").touched),l(),s("ngIf",((t=x.add_semestre.get("dateDebut"))==null?null:t.invalid)&&((t=x.add_semestre.get("dateDebut"))==null?null:t.touched)),l(4),S("is-invalid",x.add_semestre.get("datFin").invalid&&x.add_semestre.get("datFin").touched),l(),s("ngIf",((c=x.add_semestre.get("datFin"))==null?null:c.invalid)&&((c=x.add_semestre.get("datFin"))==null?null:c.touched)),l(8),s("icon",x.icons.nexte_circle)}}function qt(n,d){n&1&&u(0,"input",27)}function Lt(n,d){if(n&1&&(i(0,"option",21),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),D("",e.nomSemetre," Pro ",e.idAnneeScolaire.ans,"")}}function zt(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"Champ obligatoire."),o()())}function Ut(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"Le nom de la fili\xE8re ne doit pas d\xE9passer 40 caract\xE8res."),o()())}function Gt(n,d){if(n&1&&(i(0,"div",23),_(1,zt,3,0,"div",0)(2,Ut,3,0,"div",0),o()),n&2){let e,r,t=m(2);l(),s("ngIf",(e=t.update_semestre_form.get("nomSemetre").errors)==null?null:e.required),l(),s("ngIf",(r=t.update_semestre_form.get("nomSemetre").errors)==null?null:r.maxlength)}}function Rt(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"Champ obligatoire."),o()())}function Bt(n,d){if(n&1&&(i(0,"div",23),_(1,Rt,3,0,"div",0),o()),n&2){let e,r=m(2);l(),s("ngIf",(e=r.update_semestre_form.get("dateDebut").errors)==null?null:e.required)}}function $t(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"Champ obligatoire."),o()())}function Yt(n,d){if(n&1&&(i(0,"div",23),_(1,$t,3,0,"div",0),o()),n&2){let e,r=m(2);l(),s("ngIf",(e=r.update_semestre_form.get("datFin").errors)==null?null:e.required)}}function Jt(n,d){if(n&1){let e=C();b(0),i(1,"div",5)(2,"h3",6),a(3,"Modifier semestre"),o(),i(4,"form",7),p("ngSubmit",function(){g(e);let t=m();return f(t.update())}),i(5,"div",8),_(6,qt,1,0,"input",24),i(7,"select",25),p("change",function(t){g(e);let c=m();return f(c.onSemestreChange(t))}),i(8,"option",12),a(9,"Choisir Le Semestre..."),o(),_(10,Lt,2,3,"option",13),o(),i(11,"div",9)(12,"label",10),a(13,"Nom du semestre :"),o(),u(14,"input",26),_(15,Gt,3,2,"div",16),o(),i(16,"div",9)(17,"label",10),a(18,"Date de d\xE9but :"),o(),u(19,"input",15),_(20,Bt,2,1,"div",16),o(),i(21,"div",9)(22,"label",10),a(23," Date de fin :"),o(),u(24,"input",17),_(25,Yt,2,1,"div",16),o(),i(26,"div",18)(27,"a",19),p("click",function(){g(e);let t=m();return f(t.close_update())}),i(28,"span"),a(29,"Annuler"),o()(),i(30,"button",20)(31,"span"),a(32,"Suivant"),o(),u(33,"fa-icon",4),o()()()()(),w()}if(n&2){let e,r,t,c=m();l(4),s("formGroup",c.update_semestre_form),l(2),s("ngIf",!1),l(4),s("ngForOf",c.semestres),l(5),s("ngIf",((e=c.update_semestre_form.get("nomSemetre"))==null?null:e.invalid)&&((e=c.update_semestre_form.get("nomSemetre"))==null?null:e.touched)),l(4),S("is-invalid",c.update_semestre_form.get("dateDebut").invalid&&c.update_semestre_form.get("dateDebut").touched),l(),s("ngIf",((r=c.update_semestre_form.get("dateDebut"))==null?null:r.invalid)&&((r=c.update_semestre_form.get("dateDebut"))==null?null:r.touched)),l(4),S("is-invalid",c.update_semestre_form.get("datFin").invalid&&c.update_semestre_form.get("datFin").touched),l(),s("ngIf",((t=c.update_semestre_form.get("datFin"))==null?null:t.invalid)&&((t=c.update_semestre_form.get("datFin"))==null?null:t.touched)),l(8),s("icon",c.icons.nexte_circle)}}function Xt(n,d){if(n&1&&(i(0,"option",21),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),D("",e.nomSemetre," Pro ",e.idAnneeScolaire.ans,"")}}function Ht(n,d){if(n&1){let e=C();b(0),i(1,"div",5)(2,"h3",6),a(3,"Supprimer le semestre"),o(),i(4,"div",8)(5,"select",28),p("change",function(t){g(e);let c=m();return f(c.onDelete(t))}),i(6,"option",12),a(7,"Choisir le semestre"),o(),_(8,Xt,2,3,"option",13),o(),i(9,"div",18)(10,"a",19),p("click",function(){g(e);let t=m();return f(t.annuler())}),i(11,"span"),a(12,"Annuler"),o()(),i(13,"button",3),p("click",function(){g(e);let t=m();return f(t.nextToConfirm())}),i(14,"span"),a(15,"Suivant"),o(),u(16,"fa-icon",4),o()()()(),w()}if(n&2){let e=m();l(8),s("ngForOf",e.semestres),l(8),s("icon",e.icons.nexte_circle)}}function Kt(n,d){if(n&1){let e=C();i(0,"div",5)(1,"h3",6),a(2,"Confirmation"),o(),i(3,"div",8)(4,"p"),a(5),o(),i(6,"div",18)(7,"a",29),p("click",function(){g(e);let t=m();return f(t.exitDelete())}),a(8,"Annuler"),o(),i(9,"button",29),p("click",function(){g(e);let t=m();return f(t.delete_semestre(t.semestreFordelete.id))}),a(10,"Supprimer"),o()()()()}if(n&2){let e=m();l(5),D("\xCAtes-vous s\xFBr de vouloir supprimer le semestre : ",e.semestreFordelete.nomSemetre," Pro ",e.semestreFordelete.idAnneeScolaire.ans,"")}}var Ce=(()=>{class n{constructor(e,r,t,c,x){this.icons=e,this.infoSchool=r,this.pageTitle=t,this.fb=c,this.setService=x,this.closeModal=new q,this.semestres=[],this.show_update=!1,this.show_add=!1,this.show_deleted=!1,this.isConfirm=!1,this.annees=[],this.semestreNames=[]}ngOnInit(){this.load_formAdd(),this.get_annees(),this.load_semestre_form(),this.getSemestreName()}load_formAdd(){this.add_semestre=this.fb.group({nomSemetre:["",[h.required,h.maxLength(40)]],dateDebut:["",h.required],datFin:["",h.required],idAnneeScolaire:["",h.required]})}submit(){let e=this.add_semestre.value,X=this.annees.find(B=>B.id==e.idAnneeScolaire),{ans:t}=X,c=de(X,["ans"]),x={nomSemetre:e.nomSemetre,dateDebut:e.dateDebut,datFin:e.datFin,idAnneeScolaire:c};this.add_semestre.valid?this.setService.createSemestre(x).subscribe({next:B=>{this.pageTitle.showSuccessToast(B.message),this.add_semestre.reset(),this.load_formAdd(),this.get_semestres(),this.show_add=!1,this.closeModal.emit()},error:B=>{this.pageTitle.showErrorToast(B.error.message)}}):(this.add_semestre.markAllAsTouched(),console.log("invalid",this.add_semestre.value))}get_semestres(){this.setService.getSemestres().subscribe(e=>{e.forEach(r=>{let t=new Date(r.idAnneeScolaire.finAnnee);r.idAnneeScolaire.ans=t.getFullYear()}),this.semestres=e,console.log(e,"semestres")})}load_semestre_form(){this.update_semestre_form=this.fb.group({id:[""],nomSemetre:["",h.required],dateDebut:["",h.required],datFin:["",h.required],idAnneeScolaire:["",h.required]})}update(){let e=this.update_semestre_form.value,X=this.annees.find(B=>B.id==e.idAnneeScolaire),{ans:t}=X,c=de(X,["ans"]),x={id:+e.id,nomSemetre:e.nomSemetre,dateDebut:e.dateDebut,datFin:e.datFin,idAnneeScolaire:c};this.setService.updateSemestre(x).subscribe({next:B=>{this.pageTitle.showSuccessToast(B.message),this.update_semestre_form.reset(),this.load_semestre_form(),this.get_semestres(),this.show_update=!1,this.closeModal.emit()},error:B=>{this.pageTitle.showErrorToast(B.error.message)}})}get_annees(){this.infoSchool.getAll_annee().subscribe(e=>{this.annees=e,this.annees.forEach(r=>{let c=new Date(r.debutAnnee).getFullYear();r.ans=c})})}onSemestreChange(e){let r=e.target.value,t=this.semestres.find(c=>c.id==r);this.update_semestre_form.get("id")?.setValue(t?.id),this.update_semestre_form.get("nomSemetre")?.setValue(t?.nomSemetre),this.update_semestre_form.get("dateDebut")?.setValue(t?.dateDebut),this.update_semestre_form.get("datFin")?.setValue(t?.datFin),this.update_semestre_form.get("idAnneeScolaire")?.setValue(t?.idAnneeScolaire.id)}onDelete(e){let r=e.target.value;this.semestreFordelete=this.semestres.find(t=>t.id===+r),console.log(this.semestreFordelete," is select")}delete_semestre(e){}close_add(){this.show_add=!1,this.closeModal.emit()}close_update(){this.show_update=!1,this.closeModal.emit()}show_updated(){this.get_semestres(),this.show_update=!0,this.closeModal.emit()}show_delete(){this.get_semestres(),this.show_deleted=!0,this.closeModal.emit()}show_added(){this.show_add=!0,this.closeModal.emit()}annuler(){this.show_deleted=!1,this.closeModal.emit()}exitDelete(){this.isConfirm=!1,this.closeModal.emit()}nextToConfirm(){this.show_deleted=!1,this.isConfirm=!0}getSemestreName(){Object.keys(se).map(r=>({key:r,value:se[r]})).forEach(r=>{this.semestreNames.push(r)})}static{this.\u0275fac=function(r){return new(r||n)(v(P),v(R),v(V),v(N),v(j))}}static{this.\u0275cmp=y({type:n,selectors:[["app-semestre-widget"]],outputs:{closeModal:"closeModal"},decls:14,vars:6,consts:[[4,"ngIf"],["class","views",4,"ngIf"],[1,"second-child"],[3,"click"],[3,"icon"],[1,"views"],[1,"span"],[3,"ngSubmit","formGroup"],[1,"container-views"],[1,"form-group"],["for",""],["formControlName","idAnneeScolaire",1,"form-select"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","nomSemetre",1,"form-select"],["type","date","formControlName","dateDebut",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","date","formControlName","datFin",1,"form-control"],[1,"button-cash"],[1,"submit",3,"click"],["type","submit",1,"submit"],[3,"value"],[1,"label-error"],[1,"invalid-feedback"],["type","number","formControlName","idAnneeScolaire",4,"ngIf"],["formControlName","id","placeholder","Choisir la clase",1,"form-select",3,"change"],["type","text","formControlName","nomSemetre","placeholder","Le nom du semestre...","readonly","",1,"form-control"],["type","number","formControlName","idAnneeScolaire"],["placeholder","Choisir la clase",1,"form-select",3,"change"],["type","button",3,"click"]],template:function(r,t){r&1&&(i(0,"main"),_(1,jt,40,16,"ng-container",0)(2,Jt,34,11,"ng-container",0)(3,Ht,17,2,"ng-container",0)(4,Kt,11,2,"div",1),i(5,"div",2)(6,"a",3),p("click",function(){return t.show_added()}),u(7,"fa-icon",4),i(8,"span"),a(9,"Ajouter"),o()(),i(10,"a",3),p("click",function(){return t.show_updated()}),u(11,"fa-icon",4),i(12,"span"),a(13,"Modifier"),o()()()()),r&2&&(l(),s("ngIf",t.show_add),l(),s("ngIf",t.show_update),l(),s("ngIf",t.show_deleted),l(),s("ngIf",t.isConfirm),l(3),s("icon",t.icons.squarePlus),l(4),s("icon",t.icons.edit))},dependencies:[L,M,I,U,G,z,$,J,F,T,A,k,O],styles:[".views-delete[_ngcontent-%COMP%]{overflow:hidden;position:fixed;outline:none;background-color:#fff;overflow:scroll;top:50%;left:50%;transform:translate(-50%,-50%);z-index:100;box-shadow:0 1px 3px #0000001a}.views-delete[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.template-vide[_ngcontent-%COMP%]{padding:10px;width:250px}.views-delete[_ngcontent-%COMP%]   .button-cash[_ngcontent-%COMP%]{padding:10px}main[_ngcontent-%COMP%]{position:relative}.label-error[_ngcontent-%COMP%]{color:red;font-weight:400}.views[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px;background-color:var(--primary);padding:8px;color:var(--secondary)}.span[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary);font-size:14px;padding:10px;width:100%;text-align:center;border-top-left-radius:4px;border-top-right-radius:4px}.second-child[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--primary);font-size:14px;font-weight:700;cursor:pointer}.second-child[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:var(--secondary)}fa-icon[_ngcontent-%COMP%]{cursor:pointer}fa-icon[_ngcontent-%COMP%]:hover{color:var(--secondary)}.container-views[_ngcontent-%COMP%]{padding:10px}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}label[_ngcontent-%COMP%]{margin-bottom:5px}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);background-color:var(--primary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.delete[_ngcontent-%COMP%]{color:red}.views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;border:1px solid #ddd;top:-236%;border-radius:4px;left:-100px;width:250px;z-index:5;box-shadow:0 4px 8px #00000026}.second-child[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:space-between;align-items:flex-end}select[_ngcontent-%COMP%]{margin-bottom:10px}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px #0003}"]})}}return n})();function Zt(n,d){if(n&1&&(i(0,"option",20),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),E("Promotion ",e.ans,"")}}function ei(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"La promotion est requise."),o()())}function ti(n,d){if(n&1&&(i(0,"div",21),_(1,ei,3,0,"div",0),o()),n&2){let e,r=m(2);l(),s("ngIf",(e=r.formAdd.get("idAnnee").errors)==null?null:e.required)}}function ii(n,d){if(n&1&&(i(0,"option",20),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),D("",e.idNiveau.nom," ",e.idFiliere.nomFiliere," ")}}function ni(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"La filiere est requise."),o()())}function oi(n,d){if(n&1&&(i(0,"div",21),_(1,ni,3,0,"div",0),o()),n&2){let e,r=m(2);l(),s("ngIf",(e=r.formAdd.get("idFiliere").errors)==null?null:e.required)}}function ri(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Ajouter Promotion de Classe"),o(),i(4,"form",8),p("ngSubmit",function(){g(e);let t=m();return f(t.addProClasse())}),i(5,"div",9)(6,"div",10)(7,"label",11),a(8,"Promotion :"),o(),i(9,"select",12)(10,"option",13),a(11,"Choisir Promotion"),o(),_(12,Zt,2,2,"option",14),o(),_(13,ti,2,1,"div",15),o(),i(14,"div",10)(15,"label",11),a(16,"Mentions :"),o(),i(17,"select",16)(18,"option",13),a(19,"Choisir la mention"),o(),_(20,ii,2,3,"option",14),o(),_(21,oi,2,1,"div",15),o(),i(22,"div",17)(23,"a",18),p("click",function(){g(e);let t=m();return f(t.close_add())}),i(24,"span"),a(25,"Annuler"),o()(),i(26,"button",19)(27,"span"),a(28,"Enregistrer"),o(),u(29,"fa-icon",4),o()()()()(),w()}if(n&2){let e=m();l(4),s("formGroup",e.formAdd),l(5),S("is-invalid",e.formAdd.get("idAnnee").invalid&&e.formAdd.get("idAnnee").touched),l(3),s("ngForOf",e.annees),l(),s("ngIf",e.formAdd.get("idAnnee").invalid&&e.formAdd.get("idAnnee").touched),l(4),S("is-invalid",e.formAdd.get("idFiliere").invalid&&e.formAdd.get("idFiliere").touched),l(3),s("ngForOf",e.filieres),l(),s("ngIf",e.formAdd.get("idFiliere").invalid&&e.formAdd.get("idFiliere").touched),l(8),s("icon",e.icons.nexte_circle)}}function ai(n,d){if(n&1&&(i(0,"option",20),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),D("",e.idFiliere==null||e.idFiliere.idNiveau==null?null:e.idFiliere.idNiveau.nom," ",e.idFiliere==null||e.idFiliere.idFiliere==null?null:e.idFiliere.idFiliere.nomFiliere," ")}}function li(n,d){if(n&1&&(i(0,"option",20),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),E("Promotion ",e.ans,"")}}function si(n,d){n&1&&(i(0,"div")(1,"span",22),a(2,"La promotion est requise."),o()())}function di(n,d){if(n&1&&(i(0,"div",21),_(1,si,3,0,"div",0),o()),n&2){let e,r=m(2);l(),s("ngIf",(e=r.formUpdate.get("idAnneeScolaire").errors)==null?null:e.required)}}function ci(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Modifier Promotion de Classe"),o(),i(4,"form",8),p("ngSubmit",function(){g(e);let t=m();return f(t.update())}),i(5,"div",9)(6,"div",10)(7,"label",11),a(8,"Choisir la mentions :"),o(),i(9,"select",23),p("change",function(t){g(e);let c=m();return f(c.onChage(t))}),i(10,"option",13),a(11,"Choisir la mention"),o(),_(12,ai,2,3,"option",14),o()(),i(13,"div",10)(14,"label",11),a(15,"Promotion :"),o(),i(16,"select",24)(17,"option",13),a(18),o(),_(19,li,2,2,"option",14),o(),_(20,di,2,1,"div",15),o(),i(21,"div",17)(22,"a",18),p("click",function(){g(e);let t=m();return f(t.close_add())}),i(23,"span"),a(24,"Annuler"),o()(),i(25,"button",19)(26,"span"),a(27,"Enregistrer"),o(),u(28,"fa-icon",4),o()()()()(),w()}if(n&2){let e=m();l(4),s("formGroup",e.formUpdate),l(8),s("ngForOf",e.classes),l(4),S("is-invalid",e.formUpdate.get("idAnneeScolaire").invalid&&e.formUpdate.get("idAnneeScolaire").touched),l(2),E(" Promotion ",e.classSect==null||e.classSect.idAnneeScolaire==null?null:e.classSect.idAnneeScolaire.ans,""),l(),s("ngForOf",e.annees),l(),s("ngIf",e.formUpdate.get("idAnneeScolaire").invalid&&e.formUpdate.get("idAnneeScolaire").touched),l(8),s("icon",e.icons.nexte_circle)}}function mi(n,d){if(n&1&&(i(0,"option",20),a(1),o()),n&2){let e=d.$implicit;s("value",e.id),l(),D("",e.idFiliere==null||e.idFiliere.idNiveau==null?null:e.idFiliere.idNiveau.nom," ",e.idFiliere==null||e.idFiliere.idFiliere==null?null:e.idFiliere.idFiliere.nomFiliere,"")}}function pi(n,d){if(n&1){let e=C();b(0),i(1,"div",6)(2,"h3",7),a(3,"Supprimer mention"),o(),i(4,"div",9)(5,"select",25),p("change",function(t){g(e);let c=m();return f(c.onDelete(t))}),i(6,"option",13),a(7,"Choisir La mention"),o(),_(8,mi,2,3,"option",14),o(),i(9,"div",17)(10,"a",18),p("click",function(){g(e);let t=m();return f(t.close_delete())}),i(11,"span"),a(12,"Annuler"),o()(),i(13,"button",3),p("click",function(){g(e);let t=m();return f(t.nextToConfirm())}),i(14,"span"),a(15,"Suivant"),o(),u(16,"fa-icon",4),o()()()(),w()}if(n&2){let e=m();l(8),s("ngForOf",e.classes),l(8),s("icon",e.icons.nexte_circle)}}function _i(n,d){if(n&1){let e=C();i(0,"div",6)(1,"h3",7),a(2,"Confirmation"),o(),i(3,"div",9)(4,"p"),a(5),o(),i(6,"div",17)(7,"a",26),p("click",function(){g(e);let t=m();return f(t.exitDelete())}),a(8,"Annuler"),o(),i(9,"button",26),p("click",function(){g(e);let t=m();return f(t.delete_classe(t.classFordelete.id))}),a(10,"Supprimer"),o()()()()}if(n&2){let e=m();l(5),D("\xCAtes-vous s\xFBr de vouloir supprimer la mention : ",e.classFordelete.idFiliere==null||e.classFordelete.idFiliere.idNiveau==null?null:e.classFordelete.idFiliere.idNiveau.nom," ",e.classFordelete.idFiliere==null||e.classFordelete.idFiliere.idFiliere==null?null:e.classFordelete.idFiliere.idFiliere.nomFiliere,"")}}var Se=(()=>{class n{constructor(e,r,t,c,x){this.fb=e,this.classService=r,this.icons=t,this.infoSchool=c,this.pageTitle=x,this.closeModale=new q,this.isShow_add=!1,this.isConfirm=!1,this.show_deleted=!1,this.isShow_update=!1,this.annees=[],this.filieres=[],this.classes=[]}ngOnInit(){this.load_form()}load_form(){this.formAdd=this.fb.group({idFiliere:["",h.required],idAnnee:["",h.required]}),this.formUpdate=this.fb.group({idAnneeScolaire:["",h.required]})}addProClasse(){let e=this.formAdd.value;this.formAdd.valid?this.classService.addProClasse(e.idFiliere,e.idAnnee).subscribe({next:r=>{this.pageTitle.showSuccessToast(r.message),this.formAdd.reset(),this.load_form(),this.get_filieres(),this.isShow_add=!1,this.closeModale.emit()},error:r=>{this.pageTitle.showErrorToast(r.error.message)}}):this.formAdd.markAllAsTouched()}get_annees(){this.infoSchool.getAll_annee().subscribe(e=>{this.annees=e,this.annees.forEach(r=>{let c=new Date(r.debutAnnee).getFullYear();r.ans=c})})}get_filieres(){this.classService.getAllNivFil().subscribe(e=>{this.filieres=e})}getClasses(){this.classService.getAllCurrentClassOfYear().subscribe(e=>{this.classes=e})}show_added(){this.get_annees(),this.get_filieres(),this.isShow_add=!0,this.closeModale.emit()}close_add(){this.isShow_update=!1,this.isShow_add=!1,this.closeModale.emit()}show_updated(){this.get_annees(),this.getClasses(),this.isShow_update=!0,this.closeModale.emit()}show_delete(){this.getClasses(),this.show_deleted=!0,this.closeModale.emit()}exitDelete(){this.isConfirm=!1}close_delete(){this.show_deleted=!1,this.closeModale.emit()}nextToConfirm(){this.isConfirm=!0,this.show_deleted=!1}onDelete(e){let r=e.target.value;this.classFordelete=this.classes.find(t=>t.id==r)}onChage(e){let r=e.target.value;this.classSect=this.classes.find(c=>c.id==r);let t=new Date(this.classSect.idAnneeScolaire?.finAnnee);this.classSect.idAnneeScolaire.ans=t.getFullYear()}delete_classe(e){this.classService.deleteProClasse(e).subscribe({next:r=>{this.pageTitle.showSuccessToast(r.message),this.getClasses(),this.isConfirm=!1,this.closeModale.emit()},error:r=>{this.pageTitle.showErrorToast(r.error.message)}})}update(){let e=this.formUpdate.value,r=this.annees.find(t=>t.id==e.idAnneeScolaire);console.log(r,"annees"),this.classService.updateProClasse(this.classSect?.id,e.idAnneeScolaire).subscribe({next:t=>{this.pageTitle.showSuccessToast(t.message),this.formUpdate.reset(),this.load_form(),this.getClasses(),this.isShow_update=!1,this.closeModale.emit()},error:t=>{this.pageTitle.showErrorToast(t.error.message)}})}static{this.\u0275fac=function(r){return new(r||n)(v(N),v(re),v(P),v(R),v(V))}}static{this.\u0275cmp=y({type:n,selectors:[["app-add-class-promotion"]],outputs:{closeModale:"closeModale"},decls:18,vars:7,consts:[[4,"ngIf"],["class","views",4,"ngIf"],[1,"second-child"],[3,"click"],[3,"icon"],[1,"delete",3,"icon"],[1,"views"],[1,"span"],[3,"ngSubmit","formGroup"],[1,"container-views"],[1,"form","form-group"],["for","select-modules-multiple",1,"label","form-label"],["formControlName","idAnnee",1,"form-select"],["selected","","disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["formControlName","idFiliere",1,"form-select"],[1,"button-cash"],[1,"submit",3,"click"],["type","submit",1,"submit"],[3,"value"],[1,"invalid-feedback"],[1,"label-error"],[1,"form-select",3,"change"],["formControlName","idAnneeScolaire",1,"form-select"],["placeholder","Choisir la clase",1,"form-select",3,"change"],["type","button",3,"click"]],template:function(r,t){r&1&&(i(0,"main"),_(1,ri,30,10,"ng-container",0)(2,ci,29,8,"ng-container",0)(3,pi,17,2,"ng-container",0)(4,_i,11,2,"div",1),i(5,"div",2)(6,"a",3),p("click",function(){return t.show_added()}),u(7,"fa-icon",4),i(8,"span"),a(9,"Ajouter"),o()(),i(10,"a",3),p("click",function(){return t.show_updated()}),u(11,"fa-icon",4),i(12,"span"),a(13,"Modifier"),o()(),i(14,"a",3),p("click",function(){return t.show_delete()}),u(15,"fa-icon",5),i(16,"span"),a(17,"Supprimer"),o()()()()),r&2&&(l(),s("ngIf",t.isShow_add),l(),s("ngIf",t.isShow_update),l(),s("ngIf",t.show_deleted),l(),s("ngIf",t.isConfirm),l(3),s("icon",t.icons.squarePlus),l(4),s("icon",t.icons.edit),l(4),s("icon",t.icons.delete))},dependencies:[L,M,I,U,G,J,F,T,A,k,O],styles:[".views-delete[_ngcontent-%COMP%]{overflow:hidden;position:fixed;outline:none;background-color:#fff;overflow:scroll;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10001;box-shadow:0 1px 3px #0000001a}.views-delete[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.template-vide[_ngcontent-%COMP%]{padding:10px;width:250px}.views-delete[_ngcontent-%COMP%]   .button-cash[_ngcontent-%COMP%]{padding:10px}main[_ngcontent-%COMP%]{position:relative}.label-error[_ngcontent-%COMP%]{color:red;font-weight:400}.views[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px;background-color:var(--primary);padding:8px;color:var(--secondary)}.span[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary);font-size:14px;padding:10px;width:100%;text-align:center;border-top-left-radius:4px;border-top-right-radius:4px}.second-child[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--primary);font-size:14px;font-weight:700;cursor:pointer}.second-child[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:var(--secondary)}fa-icon[_ngcontent-%COMP%]{cursor:pointer}fa-icon[_ngcontent-%COMP%]:hover{color:var(--secondary)}.container-views[_ngcontent-%COMP%]{padding:10px}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}label[_ngcontent-%COMP%]{margin-bottom:5px}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);background-color:var(--primary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.delete[_ngcontent-%COMP%]{color:red}.views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;border:1px solid #ddd;top:-276%;width:250px;border-radius:4px;z-index:1000;box-shadow:0 4px 8px #00000026}.second-child[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:space-between;align-items:flex-end}select[_ngcontent-%COMP%]{margin-bottom:10px}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px #0003}"]})}}return n})();function gi(n,d){if(n&1){let e=C();b(0),i(1,"div",19)(2,"div",20)(3,"p")(4,"strong"),a(5,"Nom de l'\xE9cole :"),o(),a(6),o(),i(7,"p")(8,"strong"),a(9,"Email :"),o(),a(10),o(),i(11,"p")(12,"strong"),a(13,"T\xE9l\xE9phone :"),o(),a(14),o(),i(15,"p")(16,"strong"),a(17,"D\xE9but de l'ann\xE9e : "),o(),a(18),o(),i(19,"p")(20,"strong"),a(21,"Fin de l'ann\xE9e : "),o(),a(22),o(),i(23,"p")(24,"strong"),a(25,"Localit\xE9 : "),o(),a(26),o()(),i(27,"div",21)(28,"a",22),p("click",function(){g(e);let t=m();return f(t.annuler())}),i(29,"span"),a(30,"Annuler"),o()()()(),w()}if(n&2){let e=m();l(6),E(" ",e.school==null?null:e.school.nomSchool,""),l(4),E(" ",e.school==null?null:e.school.email,""),l(4),E(" ",e.school==null?null:e.school.telephone,""),l(4),W(e.school==null||e.school.anneeScolaire==null?null:e.school.anneeScolaire.debutAnnee),l(4),W(e.school==null||e.school.anneeScolaire==null?null:e.school.anneeScolaire.finAnnee),l(4),W(e.school==null?null:e.school.localite)}}function fi(n,d){if(n&1){let e=C();i(0,"div",23),p("click",function(t){g(e);let c=m();return f(c.preventClick(t))}),o()}}function hi(n,d){if(n&1){let e=C();i(0,"div",23),p("click",function(t){g(e);let c=m();return f(c.preventClick(t))}),o()}}function vi(n,d){n&1&&u(0,"div",24)}var an=(()=>{class n{constructor(e,r,t,c){this.schoolService=e,this.service=r,this.icons=t,this.router=c,this.isshow_school_detail=!1,this.isshow_school_update=!1,this.isOverlay=!1}ngOnInit(){this.getSchoolInfo()}annuler(){this.isshow_school_detail=!1,this.isshow_school_update=!1}getSchoolInfo(){this.schoolService.getSchools().subscribe(e=>{this.school=e,this.school.urlPhoto=`http://localhost/StudentImg/${this.school.urlPhoto}`})}onFileSelected(e){this.fileName=e.target.files[0]}show_school_detail(){this.isshow_school_detail=!this.isshow_school_detail}preventClick(e){e.stopPropagation()}toggle_to_update_school(){this.router.navigate(["/dga/update-school"])}closeNiveau(){this.isOverlay=!this.isOverlay}static{this.\u0275fac=function(r){return new(r||n)(v(R),v(j),v(P),v(_e))}}static{this.\u0275cmp=y({type:n,selectors:[["app-settings"]],decls:86,vars:5,consts:[[1,"setting"],[1,"setting-contente"],[1,"contenaire"],[1,"first-child"],[1,"child"],[1,"logo"],["src","assets/logounivsegou.png","alt",""],[4,"ngIf"],[1,"second-child"],[3,"click"],[3,"icon"],["id","idFiliere","src","assets/book-open-icon.svg","alt",""],[3,"closeModal"],["src","assets/school-admission-icon.svg","alt",""],["src","assets/school-graduation-icon.svg","alt",""],["src","assets/time-period-icon.svg","alt",""],[3,"closeModale"],["class","overlay",3,"click",4,"ngIf"],["class","overlay",4,"ngIf"],[1,"views"],[1,"view-school"],[1,"button-cash"],[1,"submit",3,"click"],[1,"overlay",3,"click"],[1,"overlay"]],template:function(r,t){r&1&&(i(0,"main",0)(1,"div",1)(2,"section",2)(3,"div",3)(4,"div",4)(5,"div",5),u(6,"img",6),i(7,"h4"),a(8,"INFORMATION DE L'ECOLE"),o()(),i(9,"p"),a(10,"NB : Ici vous pouvez modifier les informations de l'etablissement"),o(),_(11,gi,31,6,"ng-container",7),o()(),i(12,"div",8)(13,"a",9),p("click",function(){return t.toggle_to_update_school()}),u(14,"fa-icon",10),i(15,"span"),a(16,"Modifier"),o()()()(),i(17,"section",2)(18,"div",3)(19,"div",4)(20,"div",5),u(21,"img",11),i(22,"h4"),a(23,"INFORMATIONS SUR LES FILIERES"),o()(),i(24,"p"),a(25,"NB : Ici vous pouvez modifier les informations des semestres"),o()()(),i(26,"div",8)(27,"app-filiere-widget",12),p("closeModal",function(){return t.closeNiveau()}),o()()(),i(28,"section",2)(29,"div",3)(30,"div",4)(31,"div",5),u(32,"img",13),i(33,"h4"),a(34,"INFORMATIONS SUR LES MENTIONS"),o()(),i(35,"p"),a(36,"NB : Ici vous pouvez modifier les informations sur les mentions"),o()()(),i(37,"div",8)(38,"app-classeroom-widget",12),p("closeModal",function(){return t.closeNiveau()}),o()()(),i(39,"section",2)(40,"div",3)(41,"div",4)(42,"div",5),u(43,"img",14),i(44,"h4"),a(45,"INFORMATION SUR LES NIVEAUX"),o()(),i(46,"p"),a(47,"NB : Ici vous pouvez modifier les information sur les niveaux"),o()()(),i(48,"div",8)(49,"app-niveau-widget",12),p("closeModal",function(){return t.closeNiveau()}),o()()(),i(50,"section",2)(51,"div",3)(52,"div",4)(53,"div",5),u(54,"img",15),i(55,"h4"),a(56,"INFORMATION SUR LES SEMESTRES"),o()(),i(57,"p"),a(58,"NB : Ici vous pouvez modifier les informations des semestres"),o()()(),i(59,"div",8)(60,"app-semestre-widget",12),p("closeModal",function(){return t.closeNiveau()}),o()()(),i(61,"section",2)(62,"div",3)(63,"div",4)(64,"div",5),u(65,"img",14),i(66,"h4"),a(67,"INFORMATION SUR LES PROMOTION"),o()(),i(68,"p"),a(69,"NB : Ici vous pouvez modifier les information sur les promotions"),o()()(),i(70,"div",8)(71,"app-promotion-widget",12),p("closeModal",function(){return t.closeNiveau()}),o()()(),i(72,"section",2)(73,"div",3)(74,"div",4)(75,"div",5),u(76,"img",14),i(77,"h4"),a(78,"INFORMATION SUR LES PRO-CLASSES"),o()(),i(79,"p"),a(80,"NB : Ici vous pouvez modifier les information sur les promotions des classes"),o()()(),i(81,"div",8)(82,"app-add-class-promotion",16),p("closeModale",function(){return t.closeNiveau()}),o()()(),_(83,fi,1,0,"div",17)(84,hi,1,0,"div",17)(85,vi,1,0,"div",18),o()()),r&2&&(l(11),s("ngIf",t.isshow_school_detail),l(3),s("icon",t.icons.edit),l(69),s("ngIf",t.isshow_school_detail),l(),s("ngIf",t.isshow_school_update),l(),s("ngIf",t.isOverlay))},dependencies:[M,O,fe,he,ve,xe,Ce,Se],styles:[".setting-contente[_ngcontent-%COMP%]{overflow:hidden;position:relative;overflow-y:auto;display:grid;grid-template-columns:3fr 3fr;gap:20px;height:90%;padding-left:20px;padding-right:20px}.setting-contente[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.setting-contente[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff;border-radius:10px}.setting-contente[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--tertiary);border-radius:10px}.setting-contente[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--primary)}main[_ngcontent-%COMP%]{width:100%;margin-top:20px;height:80vh}h2[_ngcontent-%COMP%]{color:#444;text-align:center;margin-bottom:20px}.setting[_ngcontent-%COMP%]   .contenaire[_ngcontent-%COMP%]{width:100%;background-color:#fff;border:1px solid #e0e0e0;margin-bottom:20px;padding:20px;display:flex;justify-content:space-between;align-items:flex-end}.contenaire[_ngcontent-%COMP%]:hover{border:var(--primary) 1px solid;box-shadow:0 4px 8px #0000001a}h4[_ngcontent-%COMP%]{font-size:16px}.first-child[_ngcontent-%COMP%], .second-child[_ngcontent-%COMP%]{margin-bottom:15px}.logo[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:10px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;padding:5px;border:#ccc 1px solid;border-radius:50%}.first-child[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.child[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.first-child[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:var(--primary)}button[_ngcontent-%COMP%]{color:var(--primary)}.second-child[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:space-between;align-items:center}.second-child[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;cursor:pointer}.second-child[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:var(--secondary)}span[_ngcontent-%COMP%]{color:var(--primary);font-size:13px;font-weight:700}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#555}.delete[_ngcontent-%COMP%]{color:red}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;transition:border-color .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary);outline:none;box-shadow:0 0 5px #0003}#button[_ngcontent-%COMP%], #btn[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;border:none;background-color:#007bff;color:#fff;font-size:16px;border-radius:4px;cursor:pointer;transition:background-color .3s ease,transform .3s ease}#button[_ngcontent-%COMP%]:hover, #btn[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:scale(1.05)}.modal-content[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #ddd;box-shadow:0 1px 3px #0000001a}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]{padding:20px}.modal-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#333}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;background-color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:red;color:var(--primary)}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1}.overlay-delete[_ngcontent-%COMP%]{position:fixed;top:0;left:0;background-color:#00000026;width:100%;height:100%;z-index:1}.child[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-top:8px}.child[_ngcontent-%COMP%]{position:relative}.child[_ngcontent-%COMP%]   .views[_ngcontent-%COMP%]{background-color:#fff;position:absolute;border:1px solid #ddd;border-radius:4px;z-index:1;box-shadow:0 4px 8px #00000026}.views-delete[_ngcontent-%COMP%]{overflow:hidden;position:fixed;outline:none;background-color:#fff;overflow:scroll;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;box-shadow:0 1px 3px #0000001a}.views-head[_ngcontent-%COMP%]{height:50px;background-color:var(--primary);width:100%}.grid-container[_ngcontent-%COMP%]{padding:15px;display:grid;grid-template-columns:repeat(4,1fr);gap:10px}.grid-item[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:12px;width:190px;border:1px solid;height:39px;text-align:left;padding:8px;cursor:pointer}.grid-item[_ngcontent-%COMP%]:hover{background-color:var(--primary);color:var(--secondary)}.views-delete[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.template-vide[_ngcontent-%COMP%]{padding:10px;width:250px}.views-delete[_ngcontent-%COMP%]   .button-cash[_ngcontent-%COMP%]{padding:10px}main[_ngcontent-%COMP%]{position:relative}.label-error[_ngcontent-%COMP%]{color:red;font-weight:400}.views[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px;background-color:var(--primary);padding:8px;color:var(--secondary)}.span[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--secondary);font-size:14px;padding:10px;width:100%;text-align:center;border-top-left-radius:4px;border-top-right-radius:4px}.container-views[_ngcontent-%COMP%]{padding:10px}"]})}}return n})();var ce=()=>({color:"red"});function xi(n,d){n&1&&(i(0,"div")(1,"span",25),a(2,"Champ obligatoire*"),o()())}function Ci(n,d){n&1&&(i(0,"div")(1,"span",25),a(2,"Le nom de l'\xE9cole ne doit pas d\xE9passer 50 caract\xE8res."),o()())}function Si(n,d){if(n&1&&(i(0,"div",23),_(1,xi,3,0,"div",24)(2,Ci,3,0,"div",24),o()),n&2){let e,r,t=m();l(),s("ngIf",(e=t.update_school_form.get("nomSchool").errors)==null?null:e.required),l(),s("ngIf",(r=t.update_school_form.get("nomSchool").errors)==null?null:r.maxlength)}}function bi(n,d){n&1&&(i(0,"div")(1,"span",25),a(2,"Champ obligatoire*"),o()())}function wi(n,d){if(n&1&&(i(0,"div",23),_(1,bi,3,0,"div",24),o()),n&2){let e,r=m();l(),s("ngIf",(e=r.update_school_form.get("email").errors)==null?null:e.required)}}function Ei(n,d){n&1&&(i(0,"span",26),a(1," Champ obligatoire* "),o()),n&2&&s("ngStyle",Y(1,ce))}function yi(n,d){n&1&&(i(0,"span",26),a(1," Maximum 12 chiffres autoris\xE9s* "),o()),n&2&&s("ngStyle",Y(1,ce))}function Mi(n,d){n&1&&(i(0,"span",26),a(1," Champ obligatoire* "),o()),n&2&&s("ngStyle",Y(1,ce))}function Pi(n,d){n&1&&u(0,"input",27)}var dn=(()=>{class n{constructor(e,r,t,c,x){this.icons=e,this.fb=r,this.setService=t,this.pageTitle=c,this.schoolService=x,this.isshow_overlay=!0,this.anneeScolaire=[]}ngOnInit(){this.load_school_form(),this.getSchoolInfo(),this.get_all_annee()}load_school_form(){this.update_school_form=this.fb.group({id:[""],nomSchool:["",[h.required,h.maxLength(40)]],localite:["",h.required],email:["",[h.required,h.email]],telephone:["",[h.required,h.maxLength(12)]]})}get_all_annee(){this.schoolService.getAll_annee().subscribe(e=>{this.anneeScolaire=e,console.log(this.anneeScolaire,"anneeScolaire")})}update_school(){let e=this.update_school_form.value;console.log(e,"fomdata");let r=this.anneeScolaire.find(c=>c.id==+e.anneeScolaire),t={id:e.id,nomSchool:e.nomSchool,localite:e.localite,email:e.email,telephone:e.telephone};this.update_school_form.valid?this.schoolService.updateSchools(t,this.fileName).subscribe({next:c=>{this.pageTitle.showSuccessToast(c.message),this.getSchoolInfo()},error:c=>{this.pageTitle.showErrorToast(c.error.message)}}):this.update_school_form.markAllAsTouched()}getSchoolInfo(){this.schoolService.getSchools().subscribe(e=>{this.school=e,this.school.urlPhoto=`http://localhost/StudentImg/${this.school.urlPhoto}`,this.load_school_input_value(this.school)})}load_school_input_value(e){this.update_school_form.get("nomSchool")?.setValue(e?.nomSchool),this.update_school_form.get("email")?.setValue(e?.email),this.update_school_form.get("telephone")?.setValue(e?.telephone),this.update_school_form.get("localite")?.setValue(e?.localite),this.update_school_form.get("id")?.setValue(e?.id)}onFileSelected(e){this.fileName=e.target.files[0]}goBack(){window.history.back()}static{this.\u0275fac=function(r){return new(r||n)(v(P),v(N),v(j),v(V),v(R))}}static{this.\u0275cmp=y({type:n,selectors:[["app-school-edit-widget"]],decls:40,vars:18,consts:[[1,"back-button",3,"click"],[3,"icon"],[1,"views"],[3,"ngSubmit","formGroup"],[1,"contente"],[1,"first-contente"],[1,"first-contenair"],[1,"img-container"],["alt","Image",3,"src"],["id","urlPhoto","type","file","formControlName","urlPhoto","accept","image/*",1,"form-control","file",3,"change"],[1,"input-content"],[1,"form-group"],["for",""],["type","text","formControlName","nomSchool",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","email","formControlName","email",1,"form-control"],["type","text","formControlName","telephone","pattern","[0-9]{1,8}",1,"form-control"],[3,"ngStyle",4,"ngIf"],[1,"column"],["type","text","formControlName","localite",1,"form-control"],["type","text","class","form-control","formControlName","id",4,"ngIf"],[1,"button-cash"],["type","submit",1,"submit"],[1,"invalid-feedback"],[4,"ngIf"],[1,"label-error"],[3,"ngStyle"],["type","text","formControlName","id",1,"form-control"]],template:function(r,t){r&1&&(i(0,"main")(1,"div",0),p("click",function(){return t.goBack()}),u(2,"fa-icon",1),o(),i(3,"div",2)(4,"form",3),p("ngSubmit",function(){return t.update_school()}),i(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7),u(9,"img",8),i(10,"input",9),p("change",function(x){return t.onFileSelected(x)}),o()(),i(11,"div",10)(12,"div",11)(13,"label",12),a(14,"Nom de l'\xE9tablissement :"),o(),u(15,"input",13),_(16,Si,3,2,"div",14),o(),i(17,"div",11)(18,"label",12),a(19,"Email :"),o(),u(20,"input",15),_(21,wi,2,1,"div",14),o(),i(22,"div",11)(23,"label",12),a(24,"t\xE9l\xE9phone :"),o(),u(25,"input",16),_(26,Ei,2,2,"span",17)(27,yi,2,2,"span",17),o()()(),i(28,"div",18)(29,"div",11)(30,"label",12),a(31,"Addresse :"),o(),u(32,"input",19),_(33,Mi,2,2,"span",17),o(),_(34,Pi,1,0,"input",20),o()()(),i(35,"div",21)(36,"button",22)(37,"span"),a(38,"Enregistrer"),o(),u(39,"fa-icon",1),o()()()()()),r&2&&(l(2),s("icon",t.icons.back),l(2),s("formGroup",t.update_school_form),l(5),pe("src",t.school==null?null:t.school.urlPhoto,me),l(6),S("is-invalid",t.update_school_form.get("nomSchool").invalid&&t.update_school_form.get("nomSchool").touched),l(),s("ngIf",t.update_school_form.get("nomSchool").invalid&&t.update_school_form.get("nomSchool").touched),l(4),S("is-invalid",t.update_school_form.get("email").invalid&&t.update_school_form.get("email").touched),l(),s("ngIf",t.update_school_form.get("email").invalid&&t.update_school_form.get("email").touched),l(4),S("is-invalid",t.update_school_form.get("telephone").invalid&&t.update_school_form.get("telephone").touched),l(),s("ngIf",t.update_school_form.controls.telephone.hasError("required")&&t.update_school_form.controls.telephone.touched),l(),s("ngIf",t.update_school_form.controls.telephone.hasError("pattern")&&!t.update_school_form.controls.telephone.hasError("required")),l(5),S("is-invalid",t.update_school_form.get("localite").invalid&&t.update_school_form.get("localite").touched),l(),s("ngIf",t.update_school_form.controls.localite.hasError("required")&&t.update_school_form.controls.localite.touched),l(),s("ngIf",!1),l(5),s("icon",t.icons.nexte_circle))},dependencies:[M,oe,I,z,F,T,ue,A,k,O],styles:[".button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.file[_ngcontent-%COMP%]{margin-top:16px}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:8px;height:150px;width:auto;border:#ccc 1px solid;border-radius:0}.input-content[_ngcontent-%COMP%]{width:100%}.form-group[_ngcontent-%COMP%]{width:100%;margin-top:8px}.first-contenair[_ngcontent-%COMP%]{display:flex;gap:20px}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border:none;margin-top:8px;padding:5px;border-radius:5px;background-color:var(--secondary);cursor:pointer}.button-cash[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:red;color:var(--primary)}.views[_ngcontent-%COMP%]{background-color:#fff;padding:0 40px}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border:1px solid var(--primary);box-shadow:0 0 5px var(--primary)}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}"]})}}return n})();export{an as a,dn as b};
