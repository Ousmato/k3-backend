import{a as Z}from"./chunk-DMQKSSUW.js";import{a as P}from"./chunk-63PPI6N3.js";import{A as _,Ab as W,C as s,Cb as X,D as I,Db as Y,Fa as A,Ga as R,Ha as j,I as i,Ia as L,J as e,K as d,Ka as z,L as E,M as y,N as S,Na as G,O as f,Oa as B,P as g,Q as p,Qa as q,R as F,S as V,Ta as U,U as l,W as x,Ya as $,Za as H,ba as v,cb as J,ja as T,na as k,o as w,oa as N,qb as K,r as h,s as C,vb as Q,w as O,x as o,y as c,za as D}from"./chunk-Q3UIBATL.js";var M=()=>({color:"red"});function it(r,u){r&1&&d(0,"input",21)}function nt(r,u){r&1&&(E(0),i(1,"p"),l(2,"La totalit\xE9 a \xE9t\xE9 pay\xE9e"),e(),y())}function ot(r,u){if(r&1&&(E(0),i(1,"p"),l(2,"Le montant restant \xE0 payer est "),i(3,"span"),l(4),e()(),y()),r&2){let a=g(2);o(4),x("",a.montantRestant," FCFA")}}function rt(r,u){if(r&1){let a=S();i(0,"p",27),f("click",function(){h(a);let t=g(2);return C(t.payer())}),l(1,"Payer"),e()}}function at(r,u){r&1&&(i(0,"span",35),l(1," Champ obligatoire* "),e()),r&2&&s("ngStyle",v(1,M))}function lt(r,u){r&1&&(i(0,"span",36),l(1," Maximum 7 chiffres autoris\xE9s* "),e()),r&2&&s("ngStyle",v(1,M))}function st(r,u){r&1&&(i(0,"span",36),l(1," Frais invalide* "),e()),r&2&&s("ngStyle",v(1,M))}function dt(r,u){if(r&1){let a=S();i(0,"div",28)(1,"form",29),f("ngSubmit",function(){h(a);let t=g(2);return C(t.update_paie_student(t.inscrit))}),i(2,"div",9)(3,"label",15),l(4,"Scolarit\xE9 : "),i(5,"span"),l(6,"(Montant en FCFA)"),e()(),d(7,"input",30),_(8,at,2,2,"span",31)(9,lt,2,2,"span",32)(10,st,2,2,"span",32),e(),i(11,"div",33)(12,"button",34)(13,"span"),l(14,"Suivant"),e(),d(15,"fa-icon",1),e()()()()}if(r&2){let a,n=g(2);o(),s("formGroup",n.update_paie_student_form),o(6),I("is-invalid",n.update_paie_student_form.get("scolarite").invalid&&n.update_paie_student_form.get("scolarite").touched),o(),s("ngIf",n.update_paie_student_form.controls.scolarite.invalid&&n.update_paie_student_form.controls.scolarite.touched),o(),s("ngIf",n.update_paie_student_form.controls.scolarite.hasError("pattern")&&!n.update_paie_student_form.controls.scolarite.hasError("required")),o(),s("ngIf",((a=n.update_paie_student_form.get("scolarite"))==null?null:a.value)>6e3&&(n.inscrit==null||n.inscrit.idEtudiant==null||n.inscrit.idEtudiant.status==null||(a=n.inscrit.idEtudiant.status.toString())==null?null:a.toLowerCase())==="r\xE9gulier"),o(5),s("icon",n.icons.nexte_circle)}}function pt(r,u){if(r&1&&(i(0,"div",22)(1,"div"),_(2,nt,3,0,"ng-container",23)(3,ot,5,1,"ng-container",23),i(4,"div",24),_(5,rt,2,0,"p",25)(6,dt,16,7,"div",26),e()()()),r&2){let a=g();o(2),s("ngIf",a.montantRestant<=0),o(),s("ngIf",a.montantRestant>0),o(2),s("ngIf",a.montantRestant>0),o(),s("ngIf",a.isShow)}}var xt=(()=>{class r{constructor(a,n,t,m,b,tt,et){this.studentService=a,this.location=n,this.fb=t,this.router=m,this.inscriptionService=b,this.icons=tt,this.pageTitle=et,this.isShow=!1,this.permission=!1}ngOnInit(){this.getPermission(),this.loadForm(),this.loadStudent()}goBack(){this.location.back()}getLabel(){return this.inscrit.idEtudiant.status===P.REG?"Frais":"Scolarit\xE9"}getPermission(){let a=X()?.comptable;return this.admin=a,a&&(this.permission=!0),!1}loadStudent(){this.router.queryParams.subscribe(a=>{this.idInscritption=+a.id,this.inscriptionService.getInscriptionById(this.idInscritption).subscribe(n=>{this.inscrit=n,console.log(this.inscrit,"l'inscrit"),this.inscrit.idEtudiant.urlPhoto=`${J.urlPhoto}${this.inscrit.idEtudiant.urlPhoto}`;let t=this.inscrit.scolarite;console.log(t,"payer");let m=this.inscrit.idClasse?.idFiliere?.scolarite;console.log(m,"scolarite"),this.inscrit.idEtudiant.status===P.REG?this.montantRestant=6e3-+t:this.montantRestant=+m-+t,console.log(this.montantRestant,"montant restant")})})}loadForm(){this.update_paie_student_form=this.fb.group({scolarite:["",R.required]})}update_paie_student(a){let n=this.update_paie_student_form.value;console.log(n),this.update_paie_student_form.valid?this.studentService.update_student_scolarite(a.id,this.admin.idAdministra,+n.scolarite).subscribe({next:t=>{this.pageTitle.showSuccessToast(t.message),this.loadStudent(),this.isShow=!1},error:t=>{this.pageTitle.showErrorToast(t.error.message)}}):(this.update_paie_student_form.markAllAsTouched(),console.log("Veuillez remplir tous les champs correctement!"))}onError(a){let n=a.target;n.src="assets/business-professional-icon.svg"}payer(){this.isShow=!this.isShow}static{this.\u0275fac=function(n){return new(n||r)(c(W),c(T),c(H),c(D),c(Z),c(K),c(Y))}}static{this.\u0275cmp=w({type:r,selectors:[["app-student-view"]],decls:65,vars:20,consts:[[1,"back-button",3,"click"],[3,"icon"],["type","number","formControlName","idEtudiant",4,"ngIf"],[1,"contenaires"],[1,"chil"],[1,"image-column"],[1,"pop-img"],["alt","Profile Image",3,"error","src"],[1,"inputs-box"],[1,"input"],["for","validationDefault01",1,"label-nom-prenom"],["type","text","readonly","",1,"form-control",3,"value"],["for","validationDefault02",1,"label-nom-prenom"],["for","validationDefault02",1,"label","form-label"],[1,"label","form-label"],["for","validationDefault03",1,"label","form-label"],["for","validationDefault0",1,"label","form-label"],["for","telephone",1,"label","form-label"],[1,"is-scolarite"],["type","text","readonly","",1,"input-with","form-control",3,"value"],["class","footer",4,"ngIf"],["type","number","formControlName","idEtudiant"],[1,"footer"],[4,"ngIf"],[1,"float-end"],[3,"click",4,"ngIf"],["class","views",4,"ngIf"],[3,"click"],[1,"views"],[3,"ngSubmit","formGroup"],["type","text","formControlName","scolarite","placeholder","La scolarite....","pattern","[0-9]{1,7}",1,"scolarite-input","form-control"],[3,"ngStyle",4,"ngIf"],["class","small",3,"ngStyle",4,"ngIf"],[1,"button-cash"],["type","submit",1,"submit"],[3,"ngStyle"],[1,"small",3,"ngStyle"]],template:function(n,t){n&1&&(i(0,"main")(1,"div",0),f("click",function(){return t.goBack()}),d(2,"fa-icon",1),e(),i(3,"form"),_(4,it,1,0,"input",2),i(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"img",7),f("error",function(b){return t.onError(b)}),e()(),i(10,"div",8)(11,"div",9)(12,"label",10),l(13,"Nom :"),e(),d(14,"input",11),e(),i(15,"div",9)(16,"label",12),l(17,"Prenom :"),e(),d(18,"input",11),e()()(),i(19,"div",9)(20,"label",13),l(21,"Matricule :"),e(),d(22,"input",11),e(),i(23,"div",9)(24,"label",14),l(25,"Email :"),e(),d(26,"input",11),e()(),i(27,"div",4)(28,"div",9)(29,"label",15),l(30,"Date de Naissance :"),e(),d(31,"input",11),e(),i(32,"div",9)(33,"label",16),l(34,"Lieu de Naissance :"),e(),d(35,"input",11),e(),i(36,"div",9)(37,"label",17),l(38,"T\xE9l\xE9phone :"),e(),d(39,"input",11),e(),i(40,"div",9)(41,"label",14),l(42,"Statut :"),e(),d(43,"input",11),e()(),i(44,"div",4)(45,"div",9)(46,"div",18)(47,"label",15),l(48),i(49,"span"),l(50,"(Montant en FCFA)"),e()(),d(51,"input",19),e()(),i(52,"div",9)(53,"label",15),l(54,"Classe :"),e(),d(55,"input",11),e(),i(56,"div",9)(57,"label",14),l(58,"Sexe :"),e(),d(59,"input",11),e(),i(60,"div",9)(61,"label",14),l(62,"Date inscription :"),e(),d(63,"input",11),e()()(),_(64,pt,7,4,"div",20),e()()),n&2&&(o(2),s("icon",t.icons.back),o(2),s("ngIf",!1),o(5),s("src",t.inscrit==null||t.inscrit.idEtudiant==null?null:t.inscrit.idEtudiant.urlPhoto,O),o(5),p("value",t.inscrit==null||t.inscrit.idEtudiant==null?null:t.inscrit.idEtudiant.nom),o(4),p("value",t.inscrit==null||t.inscrit.idEtudiant==null?null:t.inscrit.idEtudiant.prenom),o(4),p("value",t.inscrit==null||t.inscrit.idEtudiant==null?null:t.inscrit.idEtudiant.matricule),o(4),p("value",t.inscrit==null||t.inscrit.idEtudiant==null?null:t.inscrit.idEtudiant.email),o(5),p("value",t.inscrit==null||t.inscrit.idEtudiant==null?null:t.inscrit.idEtudiant.dateNaissance),o(4),p("value",t.inscrit==null||t.inscrit.idEtudiant==null?null:t.inscrit.idEtudiant.lieuNaissance),o(4),p("value",t.inscrit==null||t.inscrit.idEtudiant==null?null:t.inscrit.idEtudiant.telephone),o(4),p("value",t.inscrit==null||t.inscrit.idEtudiant==null?null:t.inscrit.idEtudiant.status),o(5),x("",t.getLabel()," : "),o(3),F("value","",t.inscrit==null?null:t.inscrit.scolarite," FCFA"),o(4),V("value","",t.inscrit==null||t.inscrit.idClasse==null||t.inscrit.idClasse.idFiliere==null||t.inscrit.idClasse.idFiliere.idNiveau==null?null:t.inscrit.idClasse.idFiliere.idNiveau.nom," ",t.inscrit.idClasse.idFiliere==null||t.inscrit.idClasse.idFiliere.idFiliere==null?null:t.inscrit.idClasse.idFiliere.idFiliere.nomFiliere,""),o(4),p("value",t.inscrit==null||t.inscrit.idEtudiant==null?null:t.inscrit.idEtudiant.sexe),o(4),p("value",t.inscrit==null?null:t.inscrit.date),o(),s("ngIf",t.permission))},dependencies:[k,N,G,A,B,j,L,$,z,q,U,Q],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:column}button[_ngcontent-%COMP%]{color:var(--secondary);margin-top:20px;background-color:var(--primary);border:none}button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}form[_ngcontent-%COMP%]{width:100%;padding:10px;justify-content:center;border-radius:8px}.pop-img[_ngcontent-%COMP%]{height:135px;width:auto;border:1px solid var(--tertiary)}.input[_ngcontent-%COMP%]{margin-top:10px}.label[_ngcontent-%COMP%]{font-weight:700;margin-right:30px}.label-nom-prenom[_ngcontent-%COMP%]{font-weight:700}.chil[_ngcontent-%COMP%]{width:30%}.position-relative[_ngcontent-%COMP%]{position:relative}.position-absolute[_ngcontent-%COMP%]{position:absolute}.radio-button[_ngcontent-%COMP%]{display:flex}a[_ngcontent-%COMP%]{color:#6565fd}#btn-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:20%;margin-top:10px}.contenaires[_ngcontent-%COMP%]{display:flex;justify-content:space-between}label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:var(--tertiary);font-weight:300}.image-column[_ngcontent-%COMP%]{margin-top:37px;display:flex;gap:10px;align-items:flex-end}.pop-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:auto;border:#ccc 1px solid;border-radius:0}input[_ngcontent-%COMP%]{border-radius:0;border:none;padding:0 0 5px;border-bottom:2px solid var(--primary);cursor:default}input[_ngcontent-%COMP%]:focus{border-bottom:2px solid var(--primary);outline:none;box-shadow:none}.footer[_ngcontent-%COMP%]{position:relative;margin-top:20px;padding:10px;border-radius:5px;background-color:var(--secondary);width:100%;text-align:center}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--primary);font-weight:700}.float-end[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-decoration:none;color:var(--primary);font-weight:700;cursor:pointer;padding:5px;margin:-30px 0 0;border-radius:5px}.footer[_ngcontent-%COMP%]   .views[_ngcontent-%COMP%]{width:250px;background-color:#fff;position:absolute;border:1px solid #ddd;border-radius:4px;right:20px;top:-180px;z-index:10001;box-shadow:0 4px 8px #00000026}.scolarite-input[_ngcontent-%COMP%]{width:100%;padding:5px;border-radius:4px;border:1px solid var(--tertiary);margin-top:10px}.button-cash[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:end}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--secondary);border:none;display:flex;gap:8px;margin-top:8px;padding:5px;border-radius:5px;cursor:pointer}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:var(--primary)}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--secondary)}.button-cash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:var(--primary)}.views[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:text}.back-button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;padding:8px;font-size:20px;margin:10px 0}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--tertiary);color:var(--primary);border:none;border-radius:50%}"]})}}return r})();export{xt as a};
